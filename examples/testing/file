  write(ref.next,0)
  write(sec.failed,0)
  write(mid_spec.queue.head,0)
  write(mid_spec.queue.tail,0)
  write(mid_spec.sec_failed,0)
  write(mid_spec.solution.pending.head,0)
  write(mid_spec.solution.pending.tail,0)
> cl.client_request(0,{knd:write,ky:"qh",vl:35165},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(0),{knd:write,ky:"qh",vl:35165})
  write(ref.next,1)
  write(mid_spec.req_dest(0),sec)
  write(request.tx(req_msg.req(loc:m)),0)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:35165})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:0,bd:{knd:write,ky:"qh",vl:35165}}}),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:50814},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(1),{knd:write,ky:"qh",vl:50814})
  write(ref.next,2)
  write(mid_spec.req_dest(1),sec)
  write(request.tx(req_msg.req(loc:m)),1)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:50814})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:1,bd:{knd:write,ky:"qh",vl:50814}}}),1)
}
> ser.serialize(0)
{
  write(ser.serialized(0),1)
  write(mid_spec.solution.pending.contents(0),0)
  write(mid_spec.solution.pending.head,1)
  write(mid_spec.queue.contents(0),0)
  write(mid_spec.queue.head,1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:0,bd:{knd:write,ky:"qh",vl:35165}}})
{
  write(mid_spec.queue.tail,1)
  write(ref.rep.store("qh"),35165)
  write(ref.txres(0),{vl:0})
  write(ref.committed(0),1)
  write(mid_spec.solution.pending.tail,1)
  write(response.tx(loc:res),0)
  write(sec.rep.store("qh"),35165)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(0),1)
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:0,bd:{knd:write,ky:"qh",vl:35165}}})
{
  write(mid_spec.acked(0),1)
}
}
> cl_chans.recv(1,{tx:0,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:16158},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(2),{knd:read,ky:"d",vl:16158})
  write(ref.next,3)
  write(mid_spec.req_dest(2),sec)
  write(request.tx(req_msg.req(loc:m)),2)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:16158})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:2,bd:{knd:read,ky:"d",vl:16158}}}),1)
}
> ser.serialize(1)
{
  write(ser.serialized(1),1)
  write(mid_spec.solution.pending.contents(1),1)
  write(mid_spec.solution.pending.head,2)
  write(mid_spec.queue.contents(1),1)
  write(mid_spec.queue.head,2)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:1,bd:{knd:write,ky:"qh",vl:50814}}})
{
  write(mid_spec.queue.tail,2)
  write(ref.rep.store("qh"),50814)
  write(ref.txres(1),{vl:0})
  write(ref.committed(1),1)
  write(mid_spec.solution.pending.tail,2)
  write(response.tx(loc:res),1)
  write(sec.rep.store("qh"),50814)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(1),1)
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:1,bd:{knd:write,ky:"qh",vl:50814}}})
{
  write(mid_spec.acked(1),1)
}
}
> cl.client_request(1,{knd:read,ky:"qh",vl:36117},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(3),{knd:read,ky:"qh",vl:36117})
  write(ref.next,4)
  write(mid_spec.req_dest(3),sec)
  write(request.tx(req_msg.req(loc:m)),3)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:36117})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:3,bd:{knd:read,ky:"qh",vl:36117}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:2,bd:{knd:read,ky:"d",vl:16158}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:2,bd:{knd:read,ky:"d",vl:16158}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(2),{vl:0})
  write(ref.committed(2),1)
  write(response.tx(loc:res),2)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(2),1)
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},0),1)
}
> cl.client_request(0,{knd:write,ky:"d",vl:19678},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(4),{knd:write,ky:"d",vl:19678})
  write(ref.next,5)
  write(mid_spec.req_dest(4),sec)
  write(request.tx(req_msg.req(loc:m)),4)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:19678})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:4,bd:{knd:write,ky:"d",vl:19678}}}),1)
}
> ser.serialize(4)
{
  write(ser.serialized(4),1)
  write(mid_spec.solution.pending.contents(2),4)
  write(mid_spec.solution.pending.head,3)
  write(mid_spec.queue.contents(2),4)
  write(mid_spec.queue.head,3)
}
> sec.req_chan.recv({cid:0,req:{tx:0,bd:{knd:write,ky:"qh",vl:35165}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:0,bd:{knd:write,ky:"qh",vl:35165}}}),0)
}
> sec.req_chan.recv({cid:0,req:{tx:1,bd:{knd:write,ky:"qh",vl:50814}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:1,bd:{knd:write,ky:"qh",vl:50814}}}),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:4,bd:{knd:write,ky:"d",vl:19678}}})
{
  write(mid_spec.queue.tail,3)
  write(ref.rep.store("d"),19678)
  write(ref.txres(4),{vl:0})
  write(ref.committed(4),1)
  write(mid_spec.solution.pending.tail,3)
  write(response.tx(loc:res),4)
  write(sec.rep.store("d"),19678)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(4),1)
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:4,bd:{knd:write,ky:"d",vl:19678}}})
{
  write(mid_spec.acked(4),1)
}
}
> cl.client_request(0,{knd:read,ky:"qh",vl:53332},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(5),{knd:read,ky:"qh",vl:53332})
  write(ref.next,6)
  write(mid_spec.req_dest(5),prim)
  write(request.tx(req_msg.req(loc:m)),5)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:53332})
}
> sec.req_chan.recv({cid:1,req:{tx:3,bd:{knd:read,ky:"qh",vl:36117}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:3,bd:{knd:read,ky:"qh",vl:36117}}}),0)
  write(response_body.vl(fml:out),50814)
  write(ref.txres(3),{vl:50814})
  write(ref.committed(3),1)
  write(response.tx(loc:res),3)
  write(response_body.vl(fml:out),50814)
  write(response.bd(loc:res),{vl:50814})
  write(service_spec.responded(3),1)
  write(cl_chans.spec.sent({tx:3,bd:{vl:50814}},1),1)
}
> ref.commit(5,prim)
{
  write(response_body.vl(fml:out),50814)
  write(ref.txres(5),{vl:50814})
  write(ref.committed(5),1)
}
> cl_chans.recv(1,{tx:3,bd:{vl:50814}})
{
  write(cl_chans.spec.sent({tx:3,bd:{vl:50814}},1),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:26840},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(6),{knd:read,ky:"qh",vl:26840})
  write(ref.next,7)
  write(mid_spec.req_dest(6),sec)
  write(request.tx(req_msg.req(loc:m)),6)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:26840})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:6,bd:{knd:read,ky:"qh",vl:26840}}}),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:11737},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(7),{knd:read,ky:"qh",vl:11737})
  write(ref.next,8)
  write(mid_spec.req_dest(7),prim)
  write(request.tx(req_msg.req(loc:m)),7)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:11737})
}
> sec.req_chan.recv({cid:0,req:{tx:4,bd:{knd:write,ky:"d",vl:19678}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:4,bd:{knd:write,ky:"d",vl:19678}}}),0)
}
> cl_chans.recv(0,{tx:1,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),0)
}
> ref.commit(7,prim)
{
  write(response_body.vl(fml:out),50814)
  write(ref.txres(7),{vl:50814})
  write(ref.committed(7),1)
}
> cl_chans.send(0,{tx:7,bd:{vl:50814}})
{
  write(service_spec.responded(7),1)
  write(cl_chans.spec.sent({tx:7,bd:{vl:50814}},0),1)
}
> cl_chans.recv(0,{tx:7,bd:{vl:50814}})
{
  write(cl_chans.spec.sent({tx:7,bd:{vl:50814}},0),0)
}
> cl_chans.send(0,{tx:5,bd:{vl:50814}})
{
  write(service_spec.responded(5),1)
  write(cl_chans.spec.sent({tx:5,bd:{vl:50814}},0),1)
}
> sec.req_chan.recv({cid:0,req:{tx:6,bd:{knd:read,ky:"qh",vl:26840}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:6,bd:{knd:read,ky:"qh",vl:26840}}}),0)
  write(response_body.vl(fml:out),50814)
  write(ref.txres(6),{vl:50814})
  write(ref.committed(6),1)
  write(response.tx(loc:res),6)
  write(response_body.vl(fml:out),50814)
  write(response.bd(loc:res),{vl:50814})
  write(service_spec.responded(6),1)
  write(cl_chans.spec.sent({tx:6,bd:{vl:50814}},0),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:5121},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(8),{knd:read,ky:"qh",vl:5121})
  write(ref.next,9)
  write(mid_spec.req_dest(8),prim)
  write(request.tx(req_msg.req(loc:m)),8)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:5121})
}
> ref.commit(8,prim)
{
  write(response_body.vl(fml:out),50814)
  write(ref.txres(8),{vl:50814})
  write(ref.committed(8),1)
}
> cl_chans.send(1,{tx:8,bd:{vl:50814}})
{
  write(service_spec.responded(8),1)
  write(cl_chans.spec.sent({tx:8,bd:{vl:50814}},1),1)
}
> cl_chans.recv(1,{tx:8,bd:{vl:50814}})
{
  write(cl_chans.spec.sent({tx:8,bd:{vl:50814}},1),0)
}
> cl_chans.recv(0,{tx:2,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:36109},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(9),{knd:read,ky:"qh",vl:36109})
  write(ref.next,10)
  write(mid_spec.req_dest(9),prim)
  write(request.tx(req_msg.req(loc:m)),9)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:36109})
}
> cl_chans.recv(1,{tx:4,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},1),0)
}
> ref.commit(9,prim)
{
  write(response_body.vl(fml:out),50814)
  write(ref.txres(9),{vl:50814})
  write(ref.committed(9),1)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:35803},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(10),{knd:write,ky:"qh",vl:35803})
  write(ref.next,11)
  write(mid_spec.req_dest(10),sec)
  write(request.tx(req_msg.req(loc:m)),10)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:35803})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:10,bd:{knd:write,ky:"qh",vl:35803}}}),1)
}
> cl_chans.send(1,{tx:9,bd:{vl:50814}})
{
  write(service_spec.responded(9),1)
  write(cl_chans.spec.sent({tx:9,bd:{vl:50814}},1),1)
}
> ser.serialize(10)
{
  write(ser.serialized(10),1)
  write(mid_spec.solution.pending.contents(3),10)
  write(mid_spec.solution.pending.head,4)
  write(mid_spec.queue.contents(3),10)
  write(mid_spec.queue.head,4)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:10,bd:{knd:write,ky:"qh",vl:35803}}})
{
  write(mid_spec.queue.tail,4)
  write(ref.rep.store("qh"),35803)
  write(ref.txres(10),{vl:0})
  write(ref.committed(10),1)
  write(mid_spec.solution.pending.tail,4)
  write(response.tx(loc:res),10)
  write(sec.rep.store("qh"),35803)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(10),1)
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:10,bd:{knd:write,ky:"qh",vl:35803}}})
{
  write(mid_spec.acked(10),1)
}
}
> cl.client_request(0,{knd:read,ky:"qh",vl:25332},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(11),{knd:read,ky:"qh",vl:25332})
  write(ref.next,12)
  write(mid_spec.req_dest(11),prim)
  write(request.tx(req_msg.req(loc:m)),11)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:25332})
}
> cl.client_request(1,{knd:read,ky:"d",vl:22572},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(12),{knd:read,ky:"d",vl:22572})
  write(ref.next,13)
  write(mid_spec.req_dest(12),sec)
  write(request.tx(req_msg.req(loc:m)),12)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:22572})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:12,bd:{knd:read,ky:"d",vl:22572}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:12,bd:{knd:read,ky:"d",vl:22572}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:12,bd:{knd:read,ky:"d",vl:22572}}}),0)
  write(response_body.vl(fml:out),19678)
  write(ref.txres(12),{vl:19678})
  write(ref.committed(12),1)
  write(response.tx(loc:res),12)
  write(response_body.vl(fml:out),19678)
  write(response.bd(loc:res),{vl:19678})
  write(service_spec.responded(12),1)
  write(cl_chans.spec.sent({tx:12,bd:{vl:19678}},1),1)
}
> cl_chans.recv(0,{tx:5,bd:{vl:50814}})
{
  write(cl_chans.spec.sent({tx:5,bd:{vl:50814}},0),0)
}
> ref.commit(11,prim)
{
  write(response_body.vl(fml:out),35803)
  write(ref.txres(11),{vl:35803})
  write(ref.committed(11),1)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:6917},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(13),{knd:read,ky:"qh",vl:6917})
  write(ref.next,14)
  write(mid_spec.req_dest(13),sec)
  write(request.tx(req_msg.req(loc:m)),13)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:6917})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:13,bd:{knd:read,ky:"qh",vl:6917}}}),1)
}
> cl_chans.recv(0,{tx:6,bd:{vl:50814}})
{
  write(cl_chans.spec.sent({tx:6,bd:{vl:50814}},0),0)
}
> cl.client_request(1,{knd:write,ky:"d",vl:56985},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(14),{knd:write,ky:"d",vl:56985})
  write(ref.next,15)
  write(mid_spec.req_dest(14),prim)
  write(request.tx(req_msg.req(loc:m)),14)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:56985})
}
> cl_chans.send(1,{tx:11,bd:{vl:35803}})
{
  write(service_spec.responded(11),1)
  write(cl_chans.spec.sent({tx:11,bd:{vl:35803}},1),1)
}
> sec.req_chan.recv({cid:0,req:{tx:13,bd:{knd:read,ky:"qh",vl:6917}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:13,bd:{knd:read,ky:"qh",vl:6917}}}),0)
  write(response_body.vl(fml:out),35803)
  write(ref.txres(13),{vl:35803})
  write(ref.committed(13),1)
  write(response.tx(loc:res),13)
  write(response_body.vl(fml:out),35803)
  write(response.bd(loc:res),{vl:35803})
  write(service_spec.responded(13),1)
  write(cl_chans.spec.sent({tx:13,bd:{vl:35803}},0),1)
}
> cl_chans.recv(0,{tx:13,bd:{vl:35803}})
{
  write(cl_chans.spec.sent({tx:13,bd:{vl:35803}},0),0)
}
> sec.req_chan.recv({cid:1,req:{tx:10,bd:{knd:write,ky:"qh",vl:35803}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:10,bd:{knd:write,ky:"qh",vl:35803}}}),0)
}
> cl.client_request(1,{knd:read,ky:"d",vl:55241},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(15),{knd:read,ky:"d",vl:55241})
  write(ref.next,16)
  write(mid_spec.req_dest(15),sec)
  write(request.tx(req_msg.req(loc:m)),15)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:55241})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:15,bd:{knd:read,ky:"d",vl:55241}}}),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:26282},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(16),{knd:read,ky:"qh",vl:26282})
  write(ref.next,17)
  write(mid_spec.req_dest(16),prim)
  write(request.tx(req_msg.req(loc:m)),16)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:26282})
}
> ser.serialize(14)
{
  write(ser.serialized(14),1)
  write(mid_spec.solution.pending.contents(4),14)
  write(mid_spec.solution.pending.head,5)
  write(mid_spec.queue.contents(4),14)
  write(mid_spec.queue.head,5)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:14,bd:{knd:write,ky:"d",vl:56985}}})
{
  write(mid_spec.queue.tail,5)
  write(ref.rep.store("d"),56985)
  write(ref.txres(14),{vl:0})
  write(ref.committed(14),1)
  write(mid_spec.solution.pending.tail,5)
  write(response.tx(loc:res),14)
  write(sec.rep.store("d"),56985)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(14),1)
  write(cl_chans.spec.sent({tx:14,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:14,bd:{knd:write,ky:"d",vl:56985}}})
{
  write(mid_spec.acked(14),1)
}
}
> ref.commit(16,prim)
{
  write(response_body.vl(fml:out),35803)
  write(ref.txres(16),{vl:35803})
  write(ref.committed(16),1)
}
> cl_chans.recv(1,{tx:11,bd:{vl:35803}})
{
  write(cl_chans.spec.sent({tx:11,bd:{vl:35803}},1),0)
}
> cl.client_request(1,{knd:write,ky:"d",vl:21658},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(17),{knd:write,ky:"d",vl:21658})
  write(ref.next,18)
  write(mid_spec.req_dest(17),sec)
  write(request.tx(req_msg.req(loc:m)),17)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:21658})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:17,bd:{knd:write,ky:"d",vl:21658}}}),1)
}
> cl_chans.send(1,{tx:16,bd:{vl:35803}})
{
  write(service_spec.responded(16),1)
  write(cl_chans.spec.sent({tx:16,bd:{vl:35803}},1),1)
}
> cl_chans.recv(1,{tx:12,bd:{vl:19678}})
{
  write(cl_chans.spec.sent({tx:12,bd:{vl:19678}},1),0)
}
> ser.serialize(17)
{
  write(ser.serialized(17),1)
  write(mid_spec.solution.pending.contents(5),17)
  write(mid_spec.solution.pending.head,6)
  write(mid_spec.queue.contents(5),17)
  write(mid_spec.queue.head,6)
}
> cl.client_request(1,{knd:read,ky:"d",vl:31832},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(18),{knd:read,ky:"d",vl:31832})
  write(ref.next,19)
  write(mid_spec.req_dest(18),sec)
  write(request.tx(req_msg.req(loc:m)),18)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:31832})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:18,bd:{knd:read,ky:"d",vl:31832}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:15,bd:{knd:read,ky:"d",vl:55241}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:15,bd:{knd:read,ky:"d",vl:55241}}}),0)
  write(response_body.vl(fml:out),56985)
  write(ref.txres(15),{vl:56985})
  write(ref.committed(15),1)
  write(response.tx(loc:res),15)
  write(response_body.vl(fml:out),56985)
  write(response.bd(loc:res),{vl:56985})
  write(service_spec.responded(15),1)
  write(cl_chans.spec.sent({tx:15,bd:{vl:56985}},1),1)
}
> sec.req_chan.recv({cid:1,req:{tx:17,bd:{knd:write,ky:"d",vl:21658}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:17,bd:{knd:write,ky:"d",vl:21658}}}),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:17,bd:{knd:write,ky:"d",vl:21658}}})
{
  write(mid_spec.queue.tail,6)
  write(ref.rep.store("d"),21658)
  write(ref.txres(17),{vl:0})
  write(ref.committed(17),1)
  write(mid_spec.solution.pending.tail,6)
  write(response.tx(loc:res),17)
  write(sec.rep.store("d"),21658)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(17),1)
  write(cl_chans.spec.sent({tx:17,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:17,bd:{knd:write,ky:"d",vl:21658}}})
{
  write(mid_spec.acked(17),1)
}
}
> cl_chans.recv(1,{tx:10,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},1),0)
}
> sec.req_chan.recv({cid:1,req:{tx:18,bd:{knd:read,ky:"d",vl:31832}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:18,bd:{knd:read,ky:"d",vl:31832}}}),0)
  write(response_body.vl(fml:out),21658)
  write(ref.txres(18),{vl:21658})
  write(ref.committed(18),1)
  write(response.tx(loc:res),18)
  write(response_body.vl(fml:out),21658)
  write(response.bd(loc:res),{vl:21658})
  write(service_spec.responded(18),1)
  write(cl_chans.spec.sent({tx:18,bd:{vl:21658}},1),1)
}
> cl_chans.recv(1,{tx:18,bd:{vl:21658}})
{
  write(cl_chans.spec.sent({tx:18,bd:{vl:21658}},1),0)
}
> cl_chans.recv(1,{tx:16,bd:{vl:35803}})
{
  write(cl_chans.spec.sent({tx:16,bd:{vl:35803}},1),0)
}
> cl_chans.recv(1,{tx:15,bd:{vl:56985}})
{
  write(cl_chans.spec.sent({tx:15,bd:{vl:56985}},1),0)
}
> cl_chans.recv(1,{tx:9,bd:{vl:50814}})
{
  write(cl_chans.spec.sent({tx:9,bd:{vl:50814}},1),0)
}
> cl_chans.recv(1,{tx:17,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:17,bd:{vl:0}},1),0)
}
> cl_chans.recv(1,{tx:14,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:14,bd:{vl:0}},1),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:3406},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(19),{knd:read,ky:"qh",vl:3406})
  write(ref.next,20)
  write(mid_spec.req_dest(19),sec)
  write(request.tx(req_msg.req(loc:m)),19)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:3406})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:3406}}}),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:50914},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(20),{knd:read,ky:"qh",vl:50914})
  write(ref.next,21)
  write(mid_spec.req_dest(20),sec)
  write(request.tx(req_msg.req(loc:m)),20)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:50914})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:read,ky:"qh",vl:50914}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:3406}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:3406}}}),0)
  write(response_body.vl(fml:out),35803)
  write(ref.txres(19),{vl:35803})
  write(ref.committed(19),1)
  write(response.tx(loc:res),19)
  write(response_body.vl(fml:out),35803)
  write(response.bd(loc:res),{vl:35803})
  write(service_spec.responded(19),1)
  write(cl_chans.spec.sent({tx:19,bd:{vl:35803}},0),1)
}
> cl_chans.recv(0,{tx:19,bd:{vl:35803}})
{
  write(cl_chans.spec.sent({tx:19,bd:{vl:35803}},0),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:50927},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(21),{knd:write,ky:"d",vl:50927})
  write(ref.next,22)
  write(mid_spec.req_dest(21),sec)
  write(request.tx(req_msg.req(loc:m)),21)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:50927})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:write,ky:"d",vl:50927}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:21,bd:{knd:write,ky:"d",vl:50927}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:write,ky:"d",vl:50927}}}),0)
}
> sec.req_chan.recv({cid:1,req:{tx:20,bd:{knd:read,ky:"qh",vl:50914}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:read,ky:"qh",vl:50914}}}),0)
  write(response_body.vl(fml:out),35803)
  write(ref.txres(20),{vl:35803})
  write(ref.committed(20),1)
  write(response.tx(loc:res),20)
  write(response_body.vl(fml:out),35803)
  write(response.bd(loc:res),{vl:35803})
  write(service_spec.responded(20),1)
  write(cl_chans.spec.sent({tx:20,bd:{vl:35803}},1),1)
}
> ser.serialize(21)
{
  write(ser.serialized(21),1)
  write(mid_spec.solution.pending.contents(6),21)
  write(mid_spec.solution.pending.head,7)
  write(mid_spec.queue.contents(6),21)
  write(mid_spec.queue.head,7)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:21,bd:{knd:write,ky:"d",vl:50927}}})
{
  write(mid_spec.queue.tail,7)
  write(ref.rep.store("d"),50927)
  write(ref.txres(21),{vl:0})
  write(ref.committed(21),1)
  write(mid_spec.solution.pending.tail,7)
  write(response.tx(loc:res),21)
  write(sec.rep.store("d"),50927)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(21),1)
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:21,bd:{knd:write,ky:"d",vl:50927}}})
{
  write(mid_spec.acked(21),1)
}
}
> cl_chans.recv(1,{tx:20,bd:{vl:35803}})
{
  write(cl_chans.spec.sent({tx:20,bd:{vl:35803}},1),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:37441},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(22),{knd:read,ky:"d",vl:37441})
  write(ref.next,23)
  write(mid_spec.req_dest(22),prim)
  write(request.tx(req_msg.req(loc:m)),22)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:37441})
}
> cl_chans.recv(1,{tx:21,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},1),0)
}
> ref.commit(22,prim)
{
  write(response_body.vl(fml:out),50927)
  write(ref.txres(22),{vl:50927})
  write(ref.committed(22),1)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:47315},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(23),{knd:write,ky:"qh",vl:47315})
  write(ref.next,24)
  write(mid_spec.req_dest(23),sec)
  write(request.tx(req_msg.req(loc:m)),23)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:47315})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:23,bd:{knd:write,ky:"qh",vl:47315}}}),1)
}
> ser.serialize(23)
{
  write(ser.serialized(23),1)
  write(mid_spec.solution.pending.contents(7),23)
  write(mid_spec.solution.pending.head,8)
  write(mid_spec.queue.contents(7),23)
  write(mid_spec.queue.head,8)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:23,bd:{knd:write,ky:"qh",vl:47315}}})
{
  write(mid_spec.queue.tail,8)
  write(ref.rep.store("qh"),47315)
  write(ref.txres(23),{vl:0})
  write(ref.committed(23),1)
  write(mid_spec.solution.pending.tail,8)
  write(response.tx(loc:res),23)
  write(sec.rep.store("qh"),47315)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(23),1)
  write(cl_chans.spec.sent({tx:23,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:23,bd:{knd:write,ky:"qh",vl:47315}}})
{
  write(mid_spec.acked(23),1)
}
}
> cl.client_request(0,{knd:read,ky:"qh",vl:27746},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(24),{knd:read,ky:"qh",vl:27746})
  write(ref.next,25)
  write(mid_spec.req_dest(24),sec)
  write(request.tx(req_msg.req(loc:m)),24)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:27746})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:24,bd:{knd:read,ky:"qh",vl:27746}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:23,bd:{knd:write,ky:"qh",vl:47315}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:23,bd:{knd:write,ky:"qh",vl:47315}}}),0)
}
> cl_chans.recv(0,{tx:23,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:23,bd:{vl:0}},0),0)
}
> sec.req_chan.recv({cid:0,req:{tx:24,bd:{knd:read,ky:"qh",vl:27746}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:24,bd:{knd:read,ky:"qh",vl:27746}}}),0)
  write(response_body.vl(fml:out),47315)
  write(ref.txres(24),{vl:47315})
  write(ref.committed(24),1)
  write(response.tx(loc:res),24)
  write(response_body.vl(fml:out),47315)
  write(response.bd(loc:res),{vl:47315})
  write(service_spec.responded(24),1)
  write(cl_chans.spec.sent({tx:24,bd:{vl:47315}},0),1)
}
> cl_chans.send(1,{tx:22,bd:{vl:50927}})
{
  write(service_spec.responded(22),1)
  write(cl_chans.spec.sent({tx:22,bd:{vl:50927}},1),1)
}
> cl_chans.recv(0,{tx:24,bd:{vl:47315}})
{
  write(cl_chans.spec.sent({tx:24,bd:{vl:47315}},0),0)
}
> cl_chans.recv(1,{tx:22,bd:{vl:50927}})
{
  write(cl_chans.spec.sent({tx:22,bd:{vl:50927}},1),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:1248},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(25),{knd:read,ky:"qh",vl:1248})
  write(ref.next,26)
  write(mid_spec.req_dest(25),prim)
  write(request.tx(req_msg.req(loc:m)),25)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:1248})
}
> cl.client_request(0,{knd:write,ky:"qh",vl:15150},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(26),{knd:write,ky:"qh",vl:15150})
  write(ref.next,27)
  write(mid_spec.req_dest(26),prim)
  write(request.tx(req_msg.req(loc:m)),26)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:15150})
}
> ser.serialize(26)
{
  write(ser.serialized(26),1)
  write(mid_spec.solution.pending.contents(8),26)
  write(mid_spec.solution.pending.head,9)
  write(mid_spec.queue.contents(8),26)
  write(mid_spec.queue.head,9)
}
test_completed
  write(ref.next,0)
  write(sec.failed,0)
  write(mid_spec.queue.head,0)
  write(mid_spec.queue.tail,0)
  write(mid_spec.sec_failed,0)
  write(mid_spec.solution.pending.head,0)
  write(mid_spec.solution.pending.tail,0)
> cl.client_request(0,{knd:write,ky:"qh",vl:8386},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(0),{knd:write,ky:"qh",vl:8386})
  write(ref.next,1)
  write(mid_spec.req_dest(0),sec)
  write(request.tx(req_msg.req(loc:m)),0)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:8386})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:0,bd:{knd:write,ky:"qh",vl:8386}}}),1)
}
> cl.client_request(0,{knd:write,ky:"d",vl:27427},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(1),{knd:write,ky:"d",vl:27427})
  write(ref.next,2)
  write(mid_spec.req_dest(1),prim)
  write(request.tx(req_msg.req(loc:m)),1)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:27427})
}
> sec.req_chan.recv({cid:0,req:{tx:0,bd:{knd:write,ky:"qh",vl:8386}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:0,bd:{knd:write,ky:"qh",vl:8386}}}),0)
}
> ser.serialize(0)
{
  write(ser.serialized(0),1)
  write(mid_spec.solution.pending.contents(0),0)
  write(mid_spec.solution.pending.head,1)
  write(mid_spec.queue.contents(0),0)
  write(mid_spec.queue.head,1)
}
> ser.serialize(1)
{
  write(ser.serialized(1),1)
  write(mid_spec.solution.pending.contents(1),1)
  write(mid_spec.solution.pending.head,2)
  write(mid_spec.queue.contents(1),1)
  write(mid_spec.queue.head,2)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:0,bd:{knd:write,ky:"qh",vl:8386}}})
{
  write(mid_spec.queue.tail,1)
  write(ref.rep.store("qh"),8386)
  write(ref.txres(0),{vl:0})
  write(ref.committed(0),1)
  write(mid_spec.solution.pending.tail,1)
  write(response.tx(loc:res),0)
  write(sec.rep.store("qh"),8386)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(0),1)
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:0,bd:{knd:write,ky:"qh",vl:8386}}})
{
  write(mid_spec.acked(0),1)
}
}
> cl.client_request(1,{knd:read,ky:"d",vl:49661},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(2),{knd:read,ky:"d",vl:49661})
  write(ref.next,3)
  write(mid_spec.req_dest(2),prim)
  write(request.tx(req_msg.req(loc:m)),2)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:49661})
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:1,bd:{knd:write,ky:"d",vl:27427}}})
{
  write(mid_spec.queue.tail,2)
  write(ref.rep.store("d"),27427)
  write(ref.txres(1),{vl:0})
  write(ref.committed(1),1)
  write(mid_spec.solution.pending.tail,2)
  write(response.tx(loc:res),1)
  write(sec.rep.store("d"),27427)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(1),1)
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:1,bd:{knd:write,ky:"d",vl:27427}}})
{
  write(mid_spec.acked(1),1)
}
}
> ref.commit(2,prim)
{
  write(response_body.vl(fml:out),27427)
  write(ref.txres(2),{vl:27427})
  write(ref.committed(2),1)
}
> cl_chans.send(0,{tx:2,bd:{vl:27427}})
{
  write(service_spec.responded(2),1)
  write(cl_chans.spec.sent({tx:2,bd:{vl:27427}},0),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:20137},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(3),{knd:read,ky:"d",vl:20137})
  write(ref.next,4)
  write(mid_spec.req_dest(3),prim)
  write(request.tx(req_msg.req(loc:m)),3)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:20137})
}
> ref.commit(3,prim)
{
  write(response_body.vl(fml:out),27427)
  write(ref.txres(3),{vl:27427})
  write(ref.committed(3),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:52843},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(4),{knd:write,ky:"qh",vl:52843})
  write(ref.next,5)
  write(mid_spec.req_dest(4),prim)
  write(request.tx(req_msg.req(loc:m)),4)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:52843})
}
> cl_chans.send(1,{tx:3,bd:{vl:27427}})
{
  write(service_spec.responded(3),1)
  write(cl_chans.spec.sent({tx:3,bd:{vl:27427}},1),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:4213},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(5),{knd:read,ky:"qh",vl:4213})
  write(ref.next,6)
  write(mid_spec.req_dest(5),prim)
  write(request.tx(req_msg.req(loc:m)),5)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:4213})
}
> ser.serialize(4)
{
  write(ser.serialized(4),1)
  write(mid_spec.solution.pending.contents(2),4)
  write(mid_spec.solution.pending.head,3)
  write(mid_spec.queue.contents(2),4)
  write(mid_spec.queue.head,3)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:4,bd:{knd:write,ky:"qh",vl:52843}}})
{
  write(mid_spec.queue.tail,3)
  write(ref.rep.store("qh"),52843)
  write(ref.txres(4),{vl:0})
  write(ref.committed(4),1)
  write(mid_spec.solution.pending.tail,3)
  write(response.tx(loc:res),4)
  write(sec.rep.store("qh"),52843)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(4),1)
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:4,bd:{knd:write,ky:"qh",vl:52843}}})
{
  write(mid_spec.acked(4),1)
}
}
> cl_chans.recv(0,{tx:0,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:11050},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(6),{knd:read,ky:"d",vl:11050})
  write(ref.next,7)
  write(mid_spec.req_dest(6),sec)
  write(request.tx(req_msg.req(loc:m)),6)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:11050})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:6,bd:{knd:read,ky:"d",vl:11050}}}),1)
}
> ref.commit(5,prim)
{
  write(response_body.vl(fml:out),52843)
  write(ref.txres(5),{vl:52843})
  write(ref.committed(5),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:30432},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(7),{knd:read,ky:"d",vl:30432})
  write(ref.next,8)
  write(mid_spec.req_dest(7),prim)
  write(request.tx(req_msg.req(loc:m)),7)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:30432})
}
> cl_chans.recv(1,{tx:3,bd:{vl:27427}})
{
  write(cl_chans.spec.sent({tx:3,bd:{vl:27427}},1),0)
}
> ref.commit(7,prim)
{
  write(response_body.vl(fml:out),27427)
  write(ref.txres(7),{vl:27427})
  write(ref.committed(7),1)
}
> sec.req_chan.recv({cid:0,req:{tx:6,bd:{knd:read,ky:"d",vl:11050}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:6,bd:{knd:read,ky:"d",vl:11050}}}),0)
  write(response_body.vl(fml:out),27427)
  write(ref.txres(6),{vl:27427})
  write(ref.committed(6),1)
  write(response.tx(loc:res),6)
  write(response_body.vl(fml:out),27427)
  write(response.bd(loc:res),{vl:27427})
  write(service_spec.responded(6),1)
  write(cl_chans.spec.sent({tx:6,bd:{vl:27427}},0),1)
}
> cl_chans.recv(0,{tx:1,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),0)
}
> cl.client_request(1,{knd:write,ky:"d",vl:55358},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(8),{knd:write,ky:"d",vl:55358})
  write(ref.next,9)
  write(mid_spec.req_dest(8),sec)
  write(request.tx(req_msg.req(loc:m)),8)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:55358})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:8,bd:{knd:write,ky:"d",vl:55358}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:8,bd:{knd:write,ky:"d",vl:55358}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:8,bd:{knd:write,ky:"d",vl:55358}}}),0)
}
> cl_chans.send(1,{tx:7,bd:{vl:27427}})
{
  write(service_spec.responded(7),1)
  write(cl_chans.spec.sent({tx:7,bd:{vl:27427}},1),1)
}
> cl_chans.recv(1,{tx:4,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},1),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:48983},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(9),{knd:read,ky:"d",vl:48983})
  write(ref.next,10)
  write(mid_spec.req_dest(9),prim)
  write(request.tx(req_msg.req(loc:m)),9)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:48983})
}
> cl_chans.recv(0,{tx:2,bd:{vl:27427}})
{
  write(cl_chans.spec.sent({tx:2,bd:{vl:27427}},0),0)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:19678},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(10),{knd:write,ky:"qh",vl:19678})
  write(ref.next,11)
  write(mid_spec.req_dest(10),sec)
  write(request.tx(req_msg.req(loc:m)),10)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:19678})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:10,bd:{knd:write,ky:"qh",vl:19678}}}),1)
}
> ref.commit(9,prim)
{
  write(response_body.vl(fml:out),27427)
  write(ref.txres(9),{vl:27427})
  write(ref.committed(9),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:27029},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(11),{knd:read,ky:"qh",vl:27029})
  write(ref.next,12)
  write(mid_spec.req_dest(11),prim)
  write(request.tx(req_msg.req(loc:m)),11)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:27029})
}
> cl_chans.send(0,{tx:9,bd:{vl:27427}})
{
  write(service_spec.responded(9),1)
  write(cl_chans.spec.sent({tx:9,bd:{vl:27427}},0),1)
}
> ref.commit(11,prim)
{
  write(response_body.vl(fml:out),52843)
  write(ref.txres(11),{vl:52843})
  write(ref.committed(11),1)
}
> sec.req_chan.recv({cid:1,req:{tx:10,bd:{knd:write,ky:"qh",vl:19678}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:10,bd:{knd:write,ky:"qh",vl:19678}}}),0)
}
> cl_chans.send(0,{tx:5,bd:{vl:52843}})
{
  write(service_spec.responded(5),1)
  write(cl_chans.spec.sent({tx:5,bd:{vl:52843}},0),1)
}
> cl_chans.send(0,{tx:11,bd:{vl:52843}})
{
  write(service_spec.responded(11),1)
  write(cl_chans.spec.sent({tx:11,bd:{vl:52843}},0),1)
}
> ser.serialize(10)
{
  write(ser.serialized(10),1)
  write(mid_spec.solution.pending.contents(3),10)
  write(mid_spec.solution.pending.head,4)
  write(mid_spec.queue.contents(3),10)
  write(mid_spec.queue.head,4)
}
> ser.serialize(8)
{
  write(ser.serialized(8),1)
  write(mid_spec.solution.pending.contents(4),8)
  write(mid_spec.solution.pending.head,5)
  write(mid_spec.queue.contents(4),8)
  write(mid_spec.queue.head,5)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:10,bd:{knd:write,ky:"qh",vl:19678}}})
{
  write(mid_spec.queue.tail,4)
  write(ref.rep.store("qh"),19678)
  write(ref.txres(10),{vl:0})
  write(ref.committed(10),1)
  write(mid_spec.solution.pending.tail,4)
  write(response.tx(loc:res),10)
  write(sec.rep.store("qh"),19678)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(10),1)
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:10,bd:{knd:write,ky:"qh",vl:19678}}})
{
  write(mid_spec.acked(10),1)
}
}
> cl.client_request(0,{knd:write,ky:"d",vl:29753},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(12),{knd:write,ky:"d",vl:29753})
  write(ref.next,13)
  write(mid_spec.req_dest(12),sec)
  write(request.tx(req_msg.req(loc:m)),12)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:29753})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:12,bd:{knd:write,ky:"d",vl:29753}}}),1)
}
> cl_chans.recv(1,{tx:7,bd:{vl:27427}})
{
  write(cl_chans.spec.sent({tx:7,bd:{vl:27427}},1),0)
}
> cl_chans.recv(0,{tx:11,bd:{vl:52843}})
{
  write(cl_chans.spec.sent({tx:11,bd:{vl:52843}},0),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:35472},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(13),{knd:read,ky:"qh",vl:35472})
  write(ref.next,14)
  write(mid_spec.req_dest(13),prim)
  write(request.tx(req_msg.req(loc:m)),13)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:35472})
}
> sec.req_chan.recv({cid:0,req:{tx:12,bd:{knd:write,ky:"d",vl:29753}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:12,bd:{knd:write,ky:"d",vl:29753}}}),0)
}
> cl_chans.recv(0,{tx:5,bd:{vl:52843}})
{
  write(cl_chans.spec.sent({tx:5,bd:{vl:52843}},0),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:24564},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(14),{knd:read,ky:"qh",vl:24564})
  write(ref.next,15)
  write(mid_spec.req_dest(14),prim)
  write(request.tx(req_msg.req(loc:m)),14)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:24564})
}
> ser.serialize(12)
{
  write(ser.serialized(12),1)
  write(mid_spec.solution.pending.contents(5),12)
  write(mid_spec.solution.pending.head,6)
  write(mid_spec.queue.contents(5),12)
  write(mid_spec.queue.head,6)
}
> cl.client_request(1,{knd:read,ky:"d",vl:28904},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(15),{knd:read,ky:"d",vl:28904})
  write(ref.next,16)
  write(mid_spec.req_dest(15),sec)
  write(request.tx(req_msg.req(loc:m)),15)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:28904})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:15,bd:{knd:read,ky:"d",vl:28904}}}),1)
}
> cl_chans.recv(0,{tx:10,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},0),0)
}
> sec.req_chan.recv({cid:1,req:{tx:15,bd:{knd:read,ky:"d",vl:28904}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:15,bd:{knd:read,ky:"d",vl:28904}}}),0)
  write(response_body.vl(fml:out),27427)
  write(ref.txres(15),{vl:27427})
  write(ref.committed(15),1)
  write(response.tx(loc:res),15)
  write(response_body.vl(fml:out),27427)
  write(response.bd(loc:res),{vl:27427})
  write(service_spec.responded(15),1)
  write(cl_chans.spec.sent({tx:15,bd:{vl:27427}},1),1)
}
> ref.commit(14,prim)
{
  write(response_body.vl(fml:out),19678)
  write(ref.txres(14),{vl:19678})
  write(ref.committed(14),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:8,bd:{knd:write,ky:"d",vl:55358}}})
{
  write(mid_spec.queue.tail,5)
  write(ref.rep.store("d"),55358)
  write(ref.txres(8),{vl:0})
  write(ref.committed(8),1)
  write(mid_spec.solution.pending.tail,5)
  write(response.tx(loc:res),8)
  write(sec.rep.store("d"),55358)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(8),1)
  write(cl_chans.spec.sent({tx:8,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:8,bd:{knd:write,ky:"d",vl:55358}}})
{
  write(mid_spec.acked(8),1)
}
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:12,bd:{knd:write,ky:"d",vl:29753}}})
{
  write(mid_spec.queue.tail,6)
  write(ref.rep.store("d"),29753)
  write(ref.txres(12),{vl:0})
  write(ref.committed(12),1)
  write(mid_spec.solution.pending.tail,6)
  write(response.tx(loc:res),12)
  write(sec.rep.store("d"),29753)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(12),1)
  write(cl_chans.spec.sent({tx:12,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:12,bd:{knd:write,ky:"d",vl:29753}}})
{
  write(mid_spec.acked(12),1)
}
}
> cl_chans.send(1,{tx:14,bd:{vl:19678}})
{
  write(service_spec.responded(14),1)
  write(cl_chans.spec.sent({tx:14,bd:{vl:19678}},1),1)
}
> cl_chans.recv(1,{tx:14,bd:{vl:19678}})
{
  write(cl_chans.spec.sent({tx:14,bd:{vl:19678}},1),0)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:43633},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(16),{knd:write,ky:"qh",vl:43633})
  write(ref.next,17)
  write(mid_spec.req_dest(16),sec)
  write(request.tx(req_msg.req(loc:m)),16)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:43633})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:16,bd:{knd:write,ky:"qh",vl:43633}}}),1)
}
> cl_chans.recv(1,{tx:15,bd:{vl:27427}})
{
  write(cl_chans.spec.sent({tx:15,bd:{vl:27427}},1),0)
}
> ref.commit(13,prim)
{
  write(response_body.vl(fml:out),19678)
  write(ref.txres(13),{vl:19678})
  write(ref.committed(13),1)
}
> sec.req_chan.recv({cid:1,req:{tx:16,bd:{knd:write,ky:"qh",vl:43633}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:16,bd:{knd:write,ky:"qh",vl:43633}}}),0)
}
> cl_chans.recv(0,{tx:8,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:8,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:30062},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(17),{knd:read,ky:"qh",vl:30062})
  write(ref.next,18)
  write(mid_spec.req_dest(17),prim)
  write(request.tx(req_msg.req(loc:m)),17)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:30062})
}
> ref.commit(17,prim)
{
  write(response_body.vl(fml:out),19678)
  write(ref.txres(17),{vl:19678})
  write(ref.committed(17),1)
}
> ser.serialize(16)
{
  write(ser.serialized(16),1)
  write(mid_spec.solution.pending.contents(6),16)
  write(mid_spec.solution.pending.head,7)
  write(mid_spec.queue.contents(6),16)
  write(mid_spec.queue.head,7)
}
> cl_chans.send(0,{tx:13,bd:{vl:19678}})
{
  write(service_spec.responded(13),1)
  write(cl_chans.spec.sent({tx:13,bd:{vl:19678}},0),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:18537},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(18),{knd:write,ky:"d",vl:18537})
  write(ref.next,19)
  write(mid_spec.req_dest(18),sec)
  write(request.tx(req_msg.req(loc:m)),18)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:18537})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:18,bd:{knd:write,ky:"d",vl:18537}}}),1)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:46808},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(19),{knd:read,ky:"qh",vl:46808})
  write(ref.next,20)
  write(mid_spec.req_dest(19),sec)
  write(request.tx(req_msg.req(loc:m)),19)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:46808})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:46808}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:18,bd:{knd:write,ky:"d",vl:18537}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:18,bd:{knd:write,ky:"d",vl:18537}}}),0)
}
> cl.client_request(1,{knd:read,ky:"d",vl:57579},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(20),{knd:read,ky:"d",vl:57579})
  write(ref.next,21)
  write(mid_spec.req_dest(20),prim)
  write(request.tx(req_msg.req(loc:m)),20)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:57579})
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:16,bd:{knd:write,ky:"qh",vl:43633}}})
{
  write(mid_spec.queue.tail,7)
  write(ref.rep.store("qh"),43633)
  write(ref.txres(16),{vl:0})
  write(ref.committed(16),1)
  write(mid_spec.solution.pending.tail,7)
  write(response.tx(loc:res),16)
  write(sec.rep.store("qh"),43633)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(16),1)
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:16,bd:{knd:write,ky:"qh",vl:43633}}})
{
  write(mid_spec.acked(16),1)
}
}
> sec.req_chan.recv({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:46808}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:46808}}}),0)
  write(response_body.vl(fml:out),43633)
  write(ref.txres(19),{vl:43633})
  write(ref.committed(19),1)
  write(response.tx(loc:res),19)
  write(response_body.vl(fml:out),43633)
  write(response.bd(loc:res),{vl:43633})
  write(service_spec.responded(19),1)
  write(cl_chans.spec.sent({tx:19,bd:{vl:43633}},0),1)
}
> ser.serialize(18)
{
  write(ser.serialized(18),1)
  write(mid_spec.solution.pending.contents(7),18)
  write(mid_spec.solution.pending.head,8)
  write(mid_spec.queue.contents(7),18)
  write(mid_spec.queue.head,8)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:18,bd:{knd:write,ky:"d",vl:18537}}})
{
  write(mid_spec.queue.tail,8)
  write(ref.rep.store("d"),18537)
  write(ref.txres(18),{vl:0})
  write(ref.committed(18),1)
  write(mid_spec.solution.pending.tail,8)
  write(response.tx(loc:res),18)
  write(sec.rep.store("d"),18537)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(18),1)
  write(cl_chans.spec.sent({tx:18,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:18,bd:{knd:write,ky:"d",vl:18537}}})
{
  write(mid_spec.acked(18),1)
}
}
> ref.commit(20,prim)
{
  write(response_body.vl(fml:out),18537)
  write(ref.txres(20),{vl:18537})
  write(ref.committed(20),1)
}
> cl_chans.recv(0,{tx:16,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:64413},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(21),{knd:write,ky:"qh",vl:64413})
  write(ref.next,22)
  write(mid_spec.req_dest(21),prim)
  write(request.tx(req_msg.req(loc:m)),21)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:64413})
}
> ser.serialize(21)
{
  write(ser.serialized(21),1)
  write(mid_spec.solution.pending.contents(8),21)
  write(mid_spec.solution.pending.head,9)
  write(mid_spec.queue.contents(8),21)
  write(mid_spec.queue.head,9)
}
> cl_chans.send(1,{tx:17,bd:{vl:19678}})
{
  write(service_spec.responded(17),1)
  write(cl_chans.spec.sent({tx:17,bd:{vl:19678}},1),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:63913},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(22),{knd:read,ky:"qh",vl:63913})
  write(ref.next,23)
  write(mid_spec.req_dest(22),sec)
  write(request.tx(req_msg.req(loc:m)),22)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:63913})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:22,bd:{knd:read,ky:"qh",vl:63913}}}),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:21,bd:{knd:write,ky:"qh",vl:64413}}})
{
  write(mid_spec.queue.tail,9)
  write(ref.rep.store("qh"),64413)
  write(ref.txres(21),{vl:0})
  write(ref.committed(21),1)
  write(mid_spec.solution.pending.tail,9)
  write(response.tx(loc:res),21)
  write(sec.rep.store("qh"),64413)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(21),1)
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:21,bd:{knd:write,ky:"qh",vl:64413}}})
{
  write(mid_spec.acked(21),1)
}
}
> cl.client_request(1,{knd:write,ky:"d",vl:11023},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(23),{knd:write,ky:"d",vl:11023})
  write(ref.next,24)
  write(mid_spec.req_dest(23),sec)
  write(request.tx(req_msg.req(loc:m)),23)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:11023})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:23,bd:{knd:write,ky:"d",vl:11023}}}),1)
}
> cl_chans.send(1,{tx:20,bd:{vl:18537}})
{
  write(service_spec.responded(20),1)
  write(cl_chans.spec.sent({tx:20,bd:{vl:18537}},1),1)
}
> cl_chans.recv(1,{tx:18,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:18,bd:{vl:0}},1),0)
}
> cl_chans.recv(0,{tx:13,bd:{vl:19678}})
{
  write(cl_chans.spec.sent({tx:13,bd:{vl:19678}},0),0)
}
> sec.req_chan.recv({cid:1,req:{tx:23,bd:{knd:write,ky:"d",vl:11023}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:23,bd:{knd:write,ky:"d",vl:11023}}}),0)
}
> sec.req_chan.recv({cid:1,req:{tx:22,bd:{knd:read,ky:"qh",vl:63913}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:22,bd:{knd:read,ky:"qh",vl:63913}}}),0)
  write(response_body.vl(fml:out),64413)
  write(ref.txres(22),{vl:64413})
  write(ref.committed(22),1)
  write(response.tx(loc:res),22)
  write(response_body.vl(fml:out),64413)
  write(response.bd(loc:res),{vl:64413})
  write(service_spec.responded(22),1)
  write(cl_chans.spec.sent({tx:22,bd:{vl:64413}},1),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:45702},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(24),{knd:read,ky:"d",vl:45702})
  write(ref.next,25)
  write(mid_spec.req_dest(24),sec)
  write(request.tx(req_msg.req(loc:m)),24)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:45702})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:24,bd:{knd:read,ky:"d",vl:45702}}}),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:64382},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(25),{knd:read,ky:"d",vl:64382})
  write(ref.next,26)
  write(mid_spec.req_dest(25),prim)
  write(request.tx(req_msg.req(loc:m)),25)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:64382})
}
> sec.req_chan.recv({cid:1,req:{tx:24,bd:{knd:read,ky:"d",vl:45702}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:24,bd:{knd:read,ky:"d",vl:45702}}}),0)
  write(response_body.vl(fml:out),18537)
  write(ref.txres(24),{vl:18537})
  write(ref.committed(24),1)
  write(response.tx(loc:res),24)
  write(response_body.vl(fml:out),18537)
  write(response.bd(loc:res),{vl:18537})
  write(service_spec.responded(24),1)
  write(cl_chans.spec.sent({tx:24,bd:{vl:18537}},1),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:52836},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(26),{knd:write,ky:"qh",vl:52836})
  write(ref.next,27)
  write(mid_spec.req_dest(26),prim)
  write(request.tx(req_msg.req(loc:m)),26)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:52836})
}
> ser.serialize(26)
{
  write(ser.serialized(26),1)
  write(mid_spec.solution.pending.contents(9),26)
  write(mid_spec.solution.pending.head,10)
  write(mid_spec.queue.contents(9),26)
  write(mid_spec.queue.head,10)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:31250},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(27),{knd:read,ky:"qh",vl:31250})
  write(ref.next,28)
  write(mid_spec.req_dest(27),prim)
  write(request.tx(req_msg.req(loc:m)),27)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:31250})
}
> cl_chans.recv(0,{tx:9,bd:{vl:27427}})
{
  write(cl_chans.spec.sent({tx:9,bd:{vl:27427}},0),0)
}
> ser.serialize(23)
{
  write(ser.serialized(23),1)
  write(mid_spec.solution.pending.contents(10),23)
  write(mid_spec.solution.pending.head,11)
  write(mid_spec.queue.contents(10),23)
  write(mid_spec.queue.head,11)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:26,bd:{knd:write,ky:"qh",vl:52836}}})
{
  write(mid_spec.queue.tail,10)
  write(ref.rep.store("qh"),52836)
  write(ref.txres(26),{vl:0})
  write(ref.committed(26),1)
  write(mid_spec.solution.pending.tail,10)
  write(response.tx(loc:res),26)
  write(sec.rep.store("qh"),52836)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(26),1)
  write(cl_chans.spec.sent({tx:26,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:26,bd:{knd:write,ky:"qh",vl:52836}}})
{
  write(mid_spec.acked(26),1)
}
}
> cl.client_request(0,{knd:read,ky:"d",vl:22643},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(28),{knd:read,ky:"d",vl:22643})
  write(ref.next,29)
  write(mid_spec.req_dest(28),prim)
  write(request.tx(req_msg.req(loc:m)),28)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:22643})
}
> cl.client_request(1,{knd:read,ky:"qh",vl:28018},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(29),{knd:read,ky:"qh",vl:28018})
  write(ref.next,30)
  write(mid_spec.req_dest(29),prim)
  write(request.tx(req_msg.req(loc:m)),29)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:28018})
}
> cl_chans.recv(1,{tx:17,bd:{vl:19678}})
{
  write(cl_chans.spec.sent({tx:17,bd:{vl:19678}},1),0)
}
test_completed
  write(ref.next,0)
  write(sec.failed,0)
  write(mid_spec.queue.head,0)
  write(mid_spec.queue.tail,0)
  write(mid_spec.sec_failed,0)
  write(mid_spec.solution.pending.head,0)
  write(mid_spec.solution.pending.tail,0)
> cl.client_request(1,{knd:write,ky:"d",vl:59945},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(0),{knd:write,ky:"d",vl:59945})
  write(ref.next,1)
  write(mid_spec.req_dest(0),prim)
  write(request.tx(req_msg.req(loc:m)),0)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:59945})
}
> ser.serialize(0)
{
  write(ser.serialized(0),1)
  write(mid_spec.solution.pending.contents(0),0)
  write(mid_spec.solution.pending.head,1)
  write(mid_spec.queue.contents(0),0)
  write(mid_spec.queue.head,1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:39859},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(1),{knd:write,ky:"d",vl:39859})
  write(ref.next,2)
  write(mid_spec.req_dest(1),sec)
  write(request.tx(req_msg.req(loc:m)),1)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:39859})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:1,bd:{knd:write,ky:"d",vl:39859}}}),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:0,bd:{knd:write,ky:"d",vl:59945}}})
{
  write(mid_spec.queue.tail,1)
  write(ref.rep.store("d"),59945)
  write(ref.txres(0),{vl:0})
  write(ref.committed(0),1)
  write(mid_spec.solution.pending.tail,1)
  write(response.tx(loc:res),0)
  write(sec.rep.store("d"),59945)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(0),1)
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:0,bd:{knd:write,ky:"d",vl:59945}}})
{
  write(mid_spec.acked(0),1)
}
}
> cl_chans.recv(1,{tx:0,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),0)
}
> ser.serialize(1)
{
  write(ser.serialized(1),1)
  write(mid_spec.solution.pending.contents(1),1)
  write(mid_spec.solution.pending.head,2)
  write(mid_spec.queue.contents(1),1)
  write(mid_spec.queue.head,2)
}
> sec.req_chan.recv({cid:1,req:{tx:1,bd:{knd:write,ky:"d",vl:39859}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:1,bd:{knd:write,ky:"d",vl:39859}}}),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:57930},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(2),{knd:read,ky:"d",vl:57930})
  write(ref.next,3)
  write(mid_spec.req_dest(2),prim)
  write(request.tx(req_msg.req(loc:m)),2)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:57930})
}
> ref.commit(2,prim)
{
  write(response_body.vl(fml:out),59945)
  write(ref.txres(2),{vl:59945})
  write(ref.committed(2),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:1,bd:{knd:write,ky:"d",vl:39859}}})
{
  write(mid_spec.queue.tail,2)
  write(ref.rep.store("d"),39859)
  write(ref.txres(1),{vl:0})
  write(ref.committed(1),1)
  write(mid_spec.solution.pending.tail,2)
  write(response.tx(loc:res),1)
  write(sec.rep.store("d"),39859)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(1),1)
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:1,bd:{knd:write,ky:"d",vl:39859}}})
{
  write(mid_spec.acked(1),1)
}
}
> cl_chans.recv(0,{tx:1,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),0)
}
> cl_chans.send(0,{tx:2,bd:{vl:59945}})
{
  write(service_spec.responded(2),1)
  write(cl_chans.spec.sent({tx:2,bd:{vl:59945}},0),1)
}
> cl_chans.recv(0,{tx:2,bd:{vl:59945}})
{
  write(cl_chans.spec.sent({tx:2,bd:{vl:59945}},0),0)
}
> cl.client_request(1,{knd:write,ky:"d",vl:20845},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(3),{knd:write,ky:"d",vl:20845})
  write(ref.next,4)
  write(mid_spec.req_dest(3),prim)
  write(request.tx(req_msg.req(loc:m)),3)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:20845})
}
> cl.client_request(0,{knd:read,ky:"qh",vl:9637},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(4),{knd:read,ky:"qh",vl:9637})
  write(ref.next,5)
  write(mid_spec.req_dest(4),prim)
  write(request.tx(req_msg.req(loc:m)),4)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:9637})
}
> cl.client_request(0,{knd:read,ky:"d",vl:12870},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(5),{knd:read,ky:"d",vl:12870})
  write(ref.next,6)
  write(mid_spec.req_dest(5),prim)
  write(request.tx(req_msg.req(loc:m)),5)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:12870})
}
> cl.client_request(0,{knd:read,ky:"d",vl:7523},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(6),{knd:read,ky:"d",vl:7523})
  write(ref.next,7)
  write(mid_spec.req_dest(6),prim)
  write(request.tx(req_msg.req(loc:m)),6)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:7523})
}
> cl.client_request(1,{knd:read,ky:"qh",vl:45595},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(7),{knd:read,ky:"qh",vl:45595})
  write(ref.next,8)
  write(mid_spec.req_dest(7),prim)
  write(request.tx(req_msg.req(loc:m)),7)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:45595})
}
> ref.commit(5,prim)
{
  write(response_body.vl(fml:out),39859)
  write(ref.txres(5),{vl:39859})
  write(ref.committed(5),1)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:56931},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(8),{knd:read,ky:"qh",vl:56931})
  write(ref.next,9)
  write(mid_spec.req_dest(8),sec)
  write(request.tx(req_msg.req(loc:m)),8)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:56931})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:8,bd:{knd:read,ky:"qh",vl:56931}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:8,bd:{knd:read,ky:"qh",vl:56931}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:8,bd:{knd:read,ky:"qh",vl:56931}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(8),{vl:0})
  write(ref.committed(8),1)
  write(response.tx(loc:res),8)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(8),1)
  write(cl_chans.spec.sent({tx:8,bd:{vl:0}},0),1)
}
> cl_chans.recv(0,{tx:8,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:8,bd:{vl:0}},0),0)
}
> ser.serialize(3)
{
  write(ser.serialized(3),1)
  write(mid_spec.solution.pending.contents(2),3)
  write(mid_spec.solution.pending.head,3)
  write(mid_spec.queue.contents(2),3)
  write(mid_spec.queue.head,3)
}
> cl.client_request(1,{knd:write,ky:"d",vl:773},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(9),{knd:write,ky:"d",vl:773})
  write(ref.next,10)
  write(mid_spec.req_dest(9),sec)
  write(request.tx(req_msg.req(loc:m)),9)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:773})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:9,bd:{knd:write,ky:"d",vl:773}}}),1)
}
> ref.commit(7,prim)
{
  write(response_body.vl(fml:out),0)
  write(ref.txres(7),{vl:0})
  write(ref.committed(7),1)
}
> ref.commit(4,prim)
{
  write(response_body.vl(fml:out),0)
  write(ref.txres(4),{vl:0})
  write(ref.committed(4),1)
}
> cl_chans.send(1,{tx:5,bd:{vl:39859}})
{
  write(service_spec.responded(5),1)
  write(cl_chans.spec.sent({tx:5,bd:{vl:39859}},1),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:3,bd:{knd:write,ky:"d",vl:20845}}})
{
  write(mid_spec.queue.tail,3)
  write(ref.rep.store("d"),20845)
  write(ref.txres(3),{vl:0})
  write(ref.committed(3),1)
  write(mid_spec.solution.pending.tail,3)
  write(response.tx(loc:res),3)
  write(sec.rep.store("d"),20845)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(3),1)
  write(cl_chans.spec.sent({tx:3,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:3,bd:{knd:write,ky:"d",vl:20845}}})
{
  write(mid_spec.acked(3),1)
}
}
> ref.commit(6,prim)
{
  write(response_body.vl(fml:out),20845)
  write(ref.txres(6),{vl:20845})
  write(ref.committed(6),1)
}
> sec.req_chan.recv({cid:1,req:{tx:9,bd:{knd:write,ky:"d",vl:773}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:9,bd:{knd:write,ky:"d",vl:773}}}),0)
}
> cl_chans.recv(1,{tx:5,bd:{vl:39859}})
{
  write(cl_chans.spec.sent({tx:5,bd:{vl:39859}},1),0)
}
> ser.serialize(9)
{
  write(ser.serialized(9),1)
  write(mid_spec.solution.pending.contents(3),9)
  write(mid_spec.solution.pending.head,4)
  write(mid_spec.queue.contents(3),9)
  write(mid_spec.queue.head,4)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:441},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(10),{knd:write,ky:"qh",vl:441})
  write(ref.next,11)
  write(mid_spec.req_dest(10),prim)
  write(request.tx(req_msg.req(loc:m)),10)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:441})
}
> cl_chans.recv(0,{tx:3,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:3,bd:{vl:0}},0),0)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:54070},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(11),{knd:read,ky:"qh",vl:54070})
  write(ref.next,12)
  write(mid_spec.req_dest(11),prim)
  write(request.tx(req_msg.req(loc:m)),11)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:54070})
}
> cl_chans.send(1,{tx:6,bd:{vl:20845}})
{
  write(service_spec.responded(6),1)
  write(cl_chans.spec.sent({tx:6,bd:{vl:20845}},1),1)
}
> ser.serialize(10)
{
  write(ser.serialized(10),1)
  write(mid_spec.solution.pending.contents(4),10)
  write(mid_spec.solution.pending.head,5)
  write(mid_spec.queue.contents(4),10)
  write(mid_spec.queue.head,5)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:9,bd:{knd:write,ky:"d",vl:773}}})
{
  write(mid_spec.queue.tail,4)
  write(ref.rep.store("d"),773)
  write(ref.txres(9),{vl:0})
  write(ref.committed(9),1)
  write(mid_spec.solution.pending.tail,4)
  write(response.tx(loc:res),9)
  write(sec.rep.store("d"),773)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(9),1)
  write(cl_chans.spec.sent({tx:9,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:9,bd:{knd:write,ky:"d",vl:773}}})
{
  write(mid_spec.acked(9),1)
}
}
> cl_chans.recv(1,{tx:6,bd:{vl:20845}})
{
  write(cl_chans.spec.sent({tx:6,bd:{vl:20845}},1),0)
}
> cl_chans.send(1,{tx:4,bd:{vl:0}})
{
  write(service_spec.responded(4),1)
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},1),1)
}
> cl_chans.recv(1,{tx:4,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},1),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:10,bd:{knd:write,ky:"qh",vl:441}}})
{
  write(mid_spec.queue.tail,5)
  write(ref.rep.store("qh"),441)
  write(ref.txres(10),{vl:0})
  write(ref.committed(10),1)
  write(mid_spec.solution.pending.tail,5)
  write(response.tx(loc:res),10)
  write(sec.rep.store("qh"),441)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(10),1)
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:10,bd:{knd:write,ky:"qh",vl:441}}})
{
  write(mid_spec.acked(10),1)
}
}
> ref.commit(11,prim)
{
  write(response_body.vl(fml:out),441)
  write(ref.txres(11),{vl:441})
  write(ref.committed(11),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:1805},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(12),{knd:read,ky:"d",vl:1805})
  write(ref.next,13)
  write(mid_spec.req_dest(12),sec)
  write(request.tx(req_msg.req(loc:m)),12)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:1805})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:12,bd:{knd:read,ky:"d",vl:1805}}}),1)
}
> cl_chans.send(1,{tx:7,bd:{vl:0}})
{
  write(service_spec.responded(7),1)
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},1),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:48878},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(13),{knd:read,ky:"d",vl:48878})
  write(ref.next,14)
  write(mid_spec.req_dest(13),sec)
  write(request.tx(req_msg.req(loc:m)),13)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:48878})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:13,bd:{knd:read,ky:"d",vl:48878}}}),1)
}
> cl_chans.recv(1,{tx:7,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},1),0)
}
> cl_chans.send(0,{tx:11,bd:{vl:441}})
{
  write(service_spec.responded(11),1)
  write(cl_chans.spec.sent({tx:11,bd:{vl:441}},0),1)
}
> sec.req_chan.recv({cid:0,req:{tx:13,bd:{knd:read,ky:"d",vl:48878}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:13,bd:{knd:read,ky:"d",vl:48878}}}),0)
  write(response_body.vl(fml:out),773)
  write(ref.txres(13),{vl:773})
  write(ref.committed(13),1)
  write(response.tx(loc:res),13)
  write(response_body.vl(fml:out),773)
  write(response.bd(loc:res),{vl:773})
  write(service_spec.responded(13),1)
  write(cl_chans.spec.sent({tx:13,bd:{vl:773}},0),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:55992},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(14),{knd:read,ky:"d",vl:55992})
  write(ref.next,15)
  write(mid_spec.req_dest(14),sec)
  write(request.tx(req_msg.req(loc:m)),14)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:55992})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:14,bd:{knd:read,ky:"d",vl:55992}}}),1)
}
> cl_chans.recv(0,{tx:13,bd:{vl:773}})
{
  write(cl_chans.spec.sent({tx:13,bd:{vl:773}},0),0)
}
> cl_chans.recv(1,{tx:10,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},1),0)
}
> cl.client_request(1,{knd:write,ky:"d",vl:49421},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(15),{knd:write,ky:"d",vl:49421})
  write(ref.next,16)
  write(mid_spec.req_dest(15),sec)
  write(request.tx(req_msg.req(loc:m)),15)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:49421})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:15,bd:{knd:write,ky:"d",vl:49421}}}),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:31261},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(16),{knd:write,ky:"d",vl:31261})
  write(ref.next,17)
  write(mid_spec.req_dest(16),prim)
  write(request.tx(req_msg.req(loc:m)),16)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:31261})
}
> sec.req_chan.recv({cid:0,req:{tx:12,bd:{knd:read,ky:"d",vl:1805}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:12,bd:{knd:read,ky:"d",vl:1805}}}),0)
  write(response_body.vl(fml:out),773)
  write(ref.txres(12),{vl:773})
  write(ref.committed(12),1)
  write(response.tx(loc:res),12)
  write(response_body.vl(fml:out),773)
  write(response.bd(loc:res),{vl:773})
  write(service_spec.responded(12),1)
  write(cl_chans.spec.sent({tx:12,bd:{vl:773}},0),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:37186},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(17),{knd:read,ky:"d",vl:37186})
  write(ref.next,18)
  write(mid_spec.req_dest(17),prim)
  write(request.tx(req_msg.req(loc:m)),17)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:37186})
}
> ser.serialize(16)
{
  write(ser.serialized(16),1)
  write(mid_spec.solution.pending.contents(5),16)
  write(mid_spec.solution.pending.head,6)
  write(mid_spec.queue.contents(5),16)
  write(mid_spec.queue.head,6)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:53873},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(18),{knd:read,ky:"qh",vl:53873})
  write(ref.next,19)
  write(mid_spec.req_dest(18),sec)
  write(request.tx(req_msg.req(loc:m)),18)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:53873})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:18,bd:{knd:read,ky:"qh",vl:53873}}}),1)
}
> cl_chans.recv(1,{tx:9,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:9,bd:{vl:0}},1),0)
}
> sec.req_chan.recv({cid:0,req:{tx:18,bd:{knd:read,ky:"qh",vl:53873}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:18,bd:{knd:read,ky:"qh",vl:53873}}}),0)
  write(response_body.vl(fml:out),441)
  write(ref.txres(18),{vl:441})
  write(ref.committed(18),1)
  write(response.tx(loc:res),18)
  write(response_body.vl(fml:out),441)
  write(response.bd(loc:res),{vl:441})
  write(service_spec.responded(18),1)
  write(cl_chans.spec.sent({tx:18,bd:{vl:441}},0),1)
}
> cl_chans.recv(0,{tx:18,bd:{vl:441}})
{
  write(cl_chans.spec.sent({tx:18,bd:{vl:441}},0),0)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:17753},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(19),{knd:write,ky:"qh",vl:17753})
  write(ref.next,20)
  write(mid_spec.req_dest(19),prim)
  write(request.tx(req_msg.req(loc:m)),19)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:17753})
}
> ref.commit(17,prim)
{
  write(response_body.vl(fml:out),773)
  write(ref.txres(17),{vl:773})
  write(ref.committed(17),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:16,bd:{knd:write,ky:"d",vl:31261}}})
{
  write(mid_spec.queue.tail,6)
  write(ref.rep.store("d"),31261)
  write(ref.txres(16),{vl:0})
  write(ref.committed(16),1)
  write(mid_spec.solution.pending.tail,6)
  write(response.tx(loc:res),16)
  write(sec.rep.store("d"),31261)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(16),1)
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:16,bd:{knd:write,ky:"d",vl:31261}}})
{
  write(mid_spec.acked(16),1)
}
}
> ser.serialize(19)
{
  write(ser.serialized(19),1)
  write(mid_spec.solution.pending.contents(6),19)
  write(mid_spec.solution.pending.head,7)
  write(mid_spec.queue.contents(6),19)
  write(mid_spec.queue.head,7)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:63608},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(20),{knd:write,ky:"qh",vl:63608})
  write(ref.next,21)
  write(mid_spec.req_dest(20),sec)
  write(request.tx(req_msg.req(loc:m)),20)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:63608})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:write,ky:"qh",vl:63608}}}),1)
}
> cl_chans.send(0,{tx:17,bd:{vl:773}})
{
  write(service_spec.responded(17),1)
  write(cl_chans.spec.sent({tx:17,bd:{vl:773}},0),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:19,bd:{knd:write,ky:"qh",vl:17753}}})
{
  write(mid_spec.queue.tail,7)
  write(ref.rep.store("qh"),17753)
  write(ref.txres(19),{vl:0})
  write(ref.committed(19),1)
  write(mid_spec.solution.pending.tail,7)
  write(response.tx(loc:res),19)
  write(sec.rep.store("qh"),17753)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(19),1)
  write(cl_chans.spec.sent({tx:19,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:19,bd:{knd:write,ky:"qh",vl:17753}}})
{
  write(mid_spec.acked(19),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:20,bd:{knd:write,ky:"qh",vl:63608}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:write,ky:"qh",vl:63608}}}),0)
}
> cl_chans.recv(0,{tx:17,bd:{vl:773}})
{
  write(cl_chans.spec.sent({tx:17,bd:{vl:773}},0),0)
}
> ser.serialize(20)
{
  write(ser.serialized(20),1)
  write(mid_spec.solution.pending.contents(7),20)
  write(mid_spec.solution.pending.head,8)
  write(mid_spec.queue.contents(7),20)
  write(mid_spec.queue.head,8)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:20,bd:{knd:write,ky:"qh",vl:63608}}})
{
  write(mid_spec.queue.tail,8)
  write(ref.rep.store("qh"),63608)
  write(ref.txres(20),{vl:0})
  write(ref.committed(20),1)
  write(mid_spec.solution.pending.tail,8)
  write(response.tx(loc:res),20)
  write(sec.rep.store("qh"),63608)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(20),1)
  write(cl_chans.spec.sent({tx:20,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:20,bd:{knd:write,ky:"qh",vl:63608}}})
{
  write(mid_spec.acked(20),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:15,bd:{knd:write,ky:"d",vl:49421}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:15,bd:{knd:write,ky:"d",vl:49421}}}),0)
}
> sec.req_chan.recv({cid:1,req:{tx:14,bd:{knd:read,ky:"d",vl:55992}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:14,bd:{knd:read,ky:"d",vl:55992}}}),0)
  write(response_body.vl(fml:out),31261)
  write(ref.txres(14),{vl:31261})
  write(ref.committed(14),1)
  write(response.tx(loc:res),14)
  write(response_body.vl(fml:out),31261)
  write(response.bd(loc:res),{vl:31261})
  write(service_spec.responded(14),1)
  write(cl_chans.spec.sent({tx:14,bd:{vl:31261}},1),1)
}
> cl_chans.recv(1,{tx:20,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:20,bd:{vl:0}},1),0)
}
> cl_chans.recv(1,{tx:14,bd:{vl:31261}})
{
  write(cl_chans.spec.sent({tx:14,bd:{vl:31261}},1),0)
}
> cl_chans.recv(1,{tx:16,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},1),0)
}
> cl_chans.recv(0,{tx:11,bd:{vl:441}})
{
  write(cl_chans.spec.sent({tx:11,bd:{vl:441}},0),0)
}
> cl_chans.recv(0,{tx:19,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:19,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:51497},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(21),{knd:write,ky:"d",vl:51497})
  write(ref.next,22)
  write(mid_spec.req_dest(21),sec)
  write(request.tx(req_msg.req(loc:m)),21)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:51497})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:write,ky:"d",vl:51497}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:21,bd:{knd:write,ky:"d",vl:51497}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:write,ky:"d",vl:51497}}}),0)
}
> ser.serialize(21)
{
  write(ser.serialized(21),1)
  write(mid_spec.solution.pending.contents(8),21)
  write(mid_spec.solution.pending.head,9)
  write(mid_spec.queue.contents(8),21)
  write(mid_spec.queue.head,9)
}
> cl_chans.recv(0,{tx:12,bd:{vl:773}})
{
  write(cl_chans.spec.sent({tx:12,bd:{vl:773}},0),0)
}
> ser.serialize(15)
{
  write(ser.serialized(15),1)
  write(mid_spec.solution.pending.contents(9),15)
  write(mid_spec.solution.pending.head,10)
  write(mid_spec.queue.contents(9),15)
  write(mid_spec.queue.head,10)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:24671},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(22),{knd:write,ky:"qh",vl:24671})
  write(ref.next,23)
  write(mid_spec.req_dest(22),prim)
  write(request.tx(req_msg.req(loc:m)),22)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:24671})
}
> ser.serialize(22)
{
  write(ser.serialized(22),1)
  write(mid_spec.solution.pending.contents(10),22)
  write(mid_spec.solution.pending.head,11)
  write(mid_spec.queue.contents(10),22)
  write(mid_spec.queue.head,11)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:21,bd:{knd:write,ky:"d",vl:51497}}})
{
  write(mid_spec.queue.tail,9)
  write(ref.rep.store("d"),51497)
  write(ref.txres(21),{vl:0})
  write(ref.committed(21),1)
  write(mid_spec.solution.pending.tail,9)
  write(response.tx(loc:res),21)
  write(sec.rep.store("d"),51497)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(21),1)
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:21,bd:{knd:write,ky:"d",vl:51497}}})
{
  write(mid_spec.acked(21),1)
}
}
> cl_chans.recv(1,{tx:21,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},1),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:34696},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(23),{knd:read,ky:"qh",vl:34696})
  write(ref.next,24)
  write(mid_spec.req_dest(23),prim)
  write(request.tx(req_msg.req(loc:m)),23)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:34696})
}
> ref.commit(23,prim)
{
  write(response_body.vl(fml:out),63608)
  write(ref.txres(23),{vl:63608})
  write(ref.committed(23),1)
}
> cl_chans.send(1,{tx:23,bd:{vl:63608}})
{
  write(service_spec.responded(23),1)
  write(cl_chans.spec.sent({tx:23,bd:{vl:63608}},1),1)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:43031},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(24),{knd:write,ky:"qh",vl:43031})
  write(ref.next,25)
  write(mid_spec.req_dest(24),sec)
  write(request.tx(req_msg.req(loc:m)),24)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:43031})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:24,bd:{knd:write,ky:"qh",vl:43031}}}),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:17848},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(25),{knd:write,ky:"d",vl:17848})
  write(ref.next,26)
  write(mid_spec.req_dest(25),sec)
  write(request.tx(req_msg.req(loc:m)),25)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:17848})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:25,bd:{knd:write,ky:"d",vl:17848}}}),1)
}
> ser.serialize(25)
{
  write(ser.serialized(25),1)
  write(mid_spec.solution.pending.contents(11),25)
  write(mid_spec.solution.pending.head,12)
  write(mid_spec.queue.contents(11),25)
  write(mid_spec.queue.head,12)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:63892},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(26),{knd:read,ky:"qh",vl:63892})
  write(ref.next,27)
  write(mid_spec.req_dest(26),prim)
  write(request.tx(req_msg.req(loc:m)),26)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:63892})
}
> cl.client_request(0,{knd:write,ky:"d",vl:48873},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(27),{knd:write,ky:"d",vl:48873})
  write(ref.next,28)
  write(mid_spec.req_dest(27),prim)
  write(request.tx(req_msg.req(loc:m)),27)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:48873})
}
> sec.req_chan.recv({cid:1,req:{tx:25,bd:{knd:write,ky:"d",vl:17848}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:25,bd:{knd:write,ky:"d",vl:17848}}}),0)
}
> ref.commit(26,prim)
{
  write(response_body.vl(fml:out),63608)
  write(ref.txres(26),{vl:63608})
  write(ref.committed(26),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:15,bd:{knd:write,ky:"d",vl:49421}}})
{
  write(mid_spec.queue.tail,10)
  write(ref.rep.store("d"),49421)
  write(ref.txres(15),{vl:0})
  write(ref.committed(15),1)
  write(mid_spec.solution.pending.tail,10)
  write(response.tx(loc:res),15)
  write(sec.rep.store("d"),49421)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(15),1)
  write(cl_chans.spec.sent({tx:15,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:15,bd:{knd:write,ky:"d",vl:49421}}})
{
  write(mid_spec.acked(15),1)
}
}
> cl_chans.send(1,{tx:26,bd:{vl:63608}})
{
  write(service_spec.responded(26),1)
  write(cl_chans.spec.sent({tx:26,bd:{vl:63608}},1),1)
}
test_completed
  write(ref.next,0)
  write(sec.failed,0)
  write(mid_spec.queue.head,0)
  write(mid_spec.queue.tail,0)
  write(mid_spec.sec_failed,0)
  write(mid_spec.solution.pending.head,0)
  write(mid_spec.solution.pending.tail,0)
> cl.client_request(0,{knd:write,ky:"qh",vl:32186},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(0),{knd:write,ky:"qh",vl:32186})
  write(ref.next,1)
  write(mid_spec.req_dest(0),prim)
  write(request.tx(req_msg.req(loc:m)),0)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:32186})
}
> cl.client_request(0,{knd:write,ky:"d",vl:32932},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(1),{knd:write,ky:"d",vl:32932})
  write(ref.next,2)
  write(mid_spec.req_dest(1),sec)
  write(request.tx(req_msg.req(loc:m)),1)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:32932})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:1,bd:{knd:write,ky:"d",vl:32932}}}),1)
}
> ser.serialize(0)
{
  write(ser.serialized(0),1)
  write(mid_spec.solution.pending.contents(0),0)
  write(mid_spec.solution.pending.head,1)
  write(mid_spec.queue.contents(0),0)
  write(mid_spec.queue.head,1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:22312},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(2),{knd:read,ky:"d",vl:22312})
  write(ref.next,3)
  write(mid_spec.req_dest(2),sec)
  write(request.tx(req_msg.req(loc:m)),2)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:22312})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:2,bd:{knd:read,ky:"d",vl:22312}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:1,bd:{knd:write,ky:"d",vl:32932}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:1,bd:{knd:write,ky:"d",vl:32932}}}),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:15984},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(3),{knd:read,ky:"d",vl:15984})
  write(ref.next,4)
  write(mid_spec.req_dest(3),prim)
  write(request.tx(req_msg.req(loc:m)),3)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:15984})
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:0,bd:{knd:write,ky:"qh",vl:32186}}})
{
  write(mid_spec.queue.tail,1)
  write(ref.rep.store("qh"),32186)
  write(ref.txres(0),{vl:0})
  write(ref.committed(0),1)
  write(mid_spec.solution.pending.tail,1)
  write(response.tx(loc:res),0)
  write(sec.rep.store("qh"),32186)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(0),1)
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:0,bd:{knd:write,ky:"qh",vl:32186}}})
{
  write(mid_spec.acked(0),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:2,bd:{knd:read,ky:"d",vl:22312}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:2,bd:{knd:read,ky:"d",vl:22312}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(2),{vl:0})
  write(ref.committed(2),1)
  write(response.tx(loc:res),2)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(2),1)
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},1),1)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:57286},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(4),{knd:read,ky:"qh",vl:57286})
  write(ref.next,5)
  write(mid_spec.req_dest(4),sec)
  write(request.tx(req_msg.req(loc:m)),4)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:57286})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:4,bd:{knd:read,ky:"qh",vl:57286}}}),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:22815},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(5),{knd:read,ky:"d",vl:22815})
  write(ref.next,6)
  write(mid_spec.req_dest(5),sec)
  write(request.tx(req_msg.req(loc:m)),5)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:22815})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:5,bd:{knd:read,ky:"d",vl:22815}}}),1)
}
> cl_chans.recv(0,{tx:0,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},0),0)
}
> cl_chans.recv(1,{tx:2,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},1),0)
}
> ser.serialize(1)
{
  write(ser.serialized(1),1)
  write(mid_spec.solution.pending.contents(1),1)
  write(mid_spec.solution.pending.head,2)
  write(mid_spec.queue.contents(1),1)
  write(mid_spec.queue.head,2)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:20779},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(6),{knd:write,ky:"qh",vl:20779})
  write(ref.next,7)
  write(mid_spec.req_dest(6),prim)
  write(request.tx(req_msg.req(loc:m)),6)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:20779})
}
> cl.client_request(0,{knd:read,ky:"d",vl:55042},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(7),{knd:read,ky:"d",vl:55042})
  write(ref.next,8)
  write(mid_spec.req_dest(7),prim)
  write(request.tx(req_msg.req(loc:m)),7)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:55042})
}
> cl.client_request(1,{knd:write,ky:"qh",vl:4393},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(8),{knd:write,ky:"qh",vl:4393})
  write(ref.next,9)
  write(mid_spec.req_dest(8),sec)
  write(request.tx(req_msg.req(loc:m)),8)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:4393})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:8,bd:{knd:write,ky:"qh",vl:4393}}}),1)
}
> ser.serialize(8)
{
  write(ser.serialized(8),1)
  write(mid_spec.solution.pending.contents(2),8)
  write(mid_spec.solution.pending.head,3)
  write(mid_spec.queue.contents(2),8)
  write(mid_spec.queue.head,3)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:1,bd:{knd:write,ky:"d",vl:32932}}})
{
  write(mid_spec.queue.tail,2)
  write(ref.rep.store("d"),32932)
  write(ref.txres(1),{vl:0})
  write(ref.committed(1),1)
  write(mid_spec.solution.pending.tail,2)
  write(response.tx(loc:res),1)
  write(sec.rep.store("d"),32932)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(1),1)
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:1,bd:{knd:write,ky:"d",vl:32932}}})
{
  write(mid_spec.acked(1),1)
}
}
> ser.serialize(6)
{
  write(ser.serialized(6),1)
  write(mid_spec.solution.pending.contents(3),6)
  write(mid_spec.solution.pending.head,4)
  write(mid_spec.queue.contents(3),6)
  write(mid_spec.queue.head,4)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:8,bd:{knd:write,ky:"qh",vl:4393}}})
{
  write(mid_spec.queue.tail,3)
  write(ref.rep.store("qh"),4393)
  write(ref.txres(8),{vl:0})
  write(ref.committed(8),1)
  write(mid_spec.solution.pending.tail,3)
  write(response.tx(loc:res),8)
  write(sec.rep.store("qh"),4393)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(8),1)
  write(cl_chans.spec.sent({tx:8,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:8,bd:{knd:write,ky:"qh",vl:4393}}})
{
  write(mid_spec.acked(8),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:8,bd:{knd:write,ky:"qh",vl:4393}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:8,bd:{knd:write,ky:"qh",vl:4393}}}),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:6,bd:{knd:write,ky:"qh",vl:20779}}})
{
  write(mid_spec.queue.tail,4)
  write(ref.rep.store("qh"),20779)
  write(ref.txres(6),{vl:0})
  write(ref.committed(6),1)
  write(mid_spec.solution.pending.tail,4)
  write(response.tx(loc:res),6)
  write(sec.rep.store("qh"),20779)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(6),1)
  write(cl_chans.spec.sent({tx:6,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:6,bd:{knd:write,ky:"qh",vl:20779}}})
{
  write(mid_spec.acked(6),1)
}
}
> sec.req_chan.recv({cid:0,req:{tx:5,bd:{knd:read,ky:"d",vl:22815}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:5,bd:{knd:read,ky:"d",vl:22815}}}),0)
  write(response_body.vl(fml:out),32932)
  write(ref.txres(5),{vl:32932})
  write(ref.committed(5),1)
  write(response.tx(loc:res),5)
  write(response_body.vl(fml:out),32932)
  write(response.bd(loc:res),{vl:32932})
  write(service_spec.responded(5),1)
  write(cl_chans.spec.sent({tx:5,bd:{vl:32932}},0),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:21004},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(9),{knd:read,ky:"d",vl:21004})
  write(ref.next,10)
  write(mid_spec.req_dest(9),prim)
  write(request.tx(req_msg.req(loc:m)),9)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:21004})
}
> ref.commit(9,prim)
{
  write(response_body.vl(fml:out),32932)
  write(ref.txres(9),{vl:32932})
  write(ref.committed(9),1)
}
> cl.client_request(0,{knd:write,ky:"d",vl:60493},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(10),{knd:write,ky:"d",vl:60493})
  write(ref.next,11)
  write(mid_spec.req_dest(10),sec)
  write(request.tx(req_msg.req(loc:m)),10)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:60493})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:10,bd:{knd:write,ky:"d",vl:60493}}}),1)
}
> ref.commit(7,prim)
{
  write(response_body.vl(fml:out),32932)
  write(ref.txres(7),{vl:32932})
  write(ref.committed(7),1)
}
> cl_chans.send(1,{tx:7,bd:{vl:32932}})
{
  write(service_spec.responded(7),1)
  write(cl_chans.spec.sent({tx:7,bd:{vl:32932}},1),1)
}
> cl_chans.recv(1,{tx:7,bd:{vl:32932}})
{
  write(cl_chans.spec.sent({tx:7,bd:{vl:32932}},1),0)
}
> cl_chans.recv(0,{tx:1,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),0)
}
> cl_chans.send(0,{tx:9,bd:{vl:32932}})
{
  write(service_spec.responded(9),1)
  write(cl_chans.spec.sent({tx:9,bd:{vl:32932}},0),1)
}
> ref.commit(3,prim)
{
  write(response_body.vl(fml:out),32932)
  write(ref.txres(3),{vl:32932})
  write(ref.committed(3),1)
}
> sec.req_chan.recv({cid:0,req:{tx:4,bd:{knd:read,ky:"qh",vl:57286}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:4,bd:{knd:read,ky:"qh",vl:57286}}}),0)
  write(response_body.vl(fml:out),20779)
  write(ref.txres(4),{vl:20779})
  write(ref.committed(4),1)
  write(response.tx(loc:res),4)
  write(response_body.vl(fml:out),20779)
  write(response.bd(loc:res),{vl:20779})
  write(service_spec.responded(4),1)
  write(cl_chans.spec.sent({tx:4,bd:{vl:20779}},0),1)
}
> cl_chans.send(0,{tx:3,bd:{vl:32932}})
{
  write(service_spec.responded(3),1)
  write(cl_chans.spec.sent({tx:3,bd:{vl:32932}},0),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:49768},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(11),{knd:read,ky:"d",vl:49768})
  write(ref.next,12)
  write(mid_spec.req_dest(11),prim)
  write(request.tx(req_msg.req(loc:m)),11)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:49768})
}
> cl.client_request(1,{knd:read,ky:"d",vl:51415},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(12),{knd:read,ky:"d",vl:51415})
  write(ref.next,13)
  write(mid_spec.req_dest(12),sec)
  write(request.tx(req_msg.req(loc:m)),12)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:51415})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:12,bd:{knd:read,ky:"d",vl:51415}}}),1)
}
> ser.serialize(10)
{
  write(ser.serialized(10),1)
  write(mid_spec.solution.pending.contents(4),10)
  write(mid_spec.solution.pending.head,5)
  write(mid_spec.queue.contents(4),10)
  write(mid_spec.queue.head,5)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:10,bd:{knd:write,ky:"d",vl:60493}}})
{
  write(mid_spec.queue.tail,5)
  write(ref.rep.store("d"),60493)
  write(ref.txres(10),{vl:0})
  write(ref.committed(10),1)
  write(mid_spec.solution.pending.tail,5)
  write(response.tx(loc:res),10)
  write(sec.rep.store("d"),60493)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(10),1)
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:10,bd:{knd:write,ky:"d",vl:60493}}})
{
  write(mid_spec.acked(10),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:12,bd:{knd:read,ky:"d",vl:51415}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:12,bd:{knd:read,ky:"d",vl:51415}}}),0)
  write(response_body.vl(fml:out),60493)
  write(ref.txres(12),{vl:60493})
  write(ref.committed(12),1)
  write(response.tx(loc:res),12)
  write(response_body.vl(fml:out),60493)
  write(response.bd(loc:res),{vl:60493})
  write(service_spec.responded(12),1)
  write(cl_chans.spec.sent({tx:12,bd:{vl:60493}},1),1)
}
> cl_chans.recv(0,{tx:4,bd:{vl:20779}})
{
  write(cl_chans.spec.sent({tx:4,bd:{vl:20779}},0),0)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:12676},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(13),{knd:write,ky:"qh",vl:12676})
  write(ref.next,14)
  write(mid_spec.req_dest(13),prim)
  write(request.tx(req_msg.req(loc:m)),13)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:12676})
}
> ref.commit(11,prim)
{
  write(response_body.vl(fml:out),60493)
  write(ref.txres(11),{vl:60493})
  write(ref.committed(11),1)
}
> ser.serialize(13)
{
  write(ser.serialized(13),1)
  write(mid_spec.solution.pending.contents(5),13)
  write(mid_spec.solution.pending.head,6)
  write(mid_spec.queue.contents(5),13)
  write(mid_spec.queue.head,6)
}
> cl_chans.send(1,{tx:11,bd:{vl:60493}})
{
  write(service_spec.responded(11),1)
  write(cl_chans.spec.sent({tx:11,bd:{vl:60493}},1),1)
}
> sec.req_chan.recv({cid:0,req:{tx:10,bd:{knd:write,ky:"d",vl:60493}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:10,bd:{knd:write,ky:"d",vl:60493}}}),0)
}
> cl_chans.recv(0,{tx:9,bd:{vl:32932}})
{
  write(cl_chans.spec.sent({tx:9,bd:{vl:32932}},0),0)
}
> cl_chans.recv(1,{tx:11,bd:{vl:60493}})
{
  write(cl_chans.spec.sent({tx:11,bd:{vl:60493}},1),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:29823},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(14),{knd:read,ky:"d",vl:29823})
  write(ref.next,15)
  write(mid_spec.req_dest(14),prim)
  write(request.tx(req_msg.req(loc:m)),14)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:29823})
}
> cl_chans.recv(1,{tx:10,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},1),0)
}
> ref.commit(14,prim)
{
  write(response_body.vl(fml:out),60493)
  write(ref.txres(14),{vl:60493})
  write(ref.committed(14),1)
}
> cl_chans.send(1,{tx:14,bd:{vl:60493}})
{
  write(service_spec.responded(14),1)
  write(cl_chans.spec.sent({tx:14,bd:{vl:60493}},1),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:13,bd:{knd:write,ky:"qh",vl:12676}}})
{
  write(mid_spec.queue.tail,6)
  write(ref.rep.store("qh"),12676)
  write(ref.txres(13),{vl:0})
  write(ref.committed(13),1)
  write(mid_spec.solution.pending.tail,6)
  write(response.tx(loc:res),13)
  write(sec.rep.store("qh"),12676)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(13),1)
  write(cl_chans.spec.sent({tx:13,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:13,bd:{knd:write,ky:"qh",vl:12676}}})
{
  write(mid_spec.acked(13),1)
}
}
> cl.client_request(1,{knd:read,ky:"d",vl:5732},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(15),{knd:read,ky:"d",vl:5732})
  write(ref.next,16)
  write(mid_spec.req_dest(15),prim)
  write(request.tx(req_msg.req(loc:m)),15)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:5732})
}
> ref.commit(15,prim)
{
  write(response_body.vl(fml:out),60493)
  write(ref.txres(15),{vl:60493})
  write(ref.committed(15),1)
}
> cl_chans.send(0,{tx:15,bd:{vl:60493}})
{
  write(service_spec.responded(15),1)
  write(cl_chans.spec.sent({tx:15,bd:{vl:60493}},0),1)
}
> cl_chans.recv(1,{tx:14,bd:{vl:60493}})
{
  write(cl_chans.spec.sent({tx:14,bd:{vl:60493}},1),0)
}
> cl_chans.recv(0,{tx:15,bd:{vl:60493}})
{
  write(cl_chans.spec.sent({tx:15,bd:{vl:60493}},0),0)
}
> cl_chans.recv(1,{tx:12,bd:{vl:60493}})
{
  write(cl_chans.spec.sent({tx:12,bd:{vl:60493}},1),0)
}
> cl_chans.recv(1,{tx:6,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:6,bd:{vl:0}},1),0)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:17884},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(16),{knd:write,ky:"qh",vl:17884})
  write(ref.next,17)
  write(mid_spec.req_dest(16),prim)
  write(request.tx(req_msg.req(loc:m)),16)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:17884})
}
> cl.client_request(0,{knd:write,ky:"qh",vl:12462},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(17),{knd:write,ky:"qh",vl:12462})
  write(ref.next,18)
  write(mid_spec.req_dest(17),sec)
  write(request.tx(req_msg.req(loc:m)),17)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:12462})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:17,bd:{knd:write,ky:"qh",vl:12462}}}),1)
}
> ser.serialize(17)
{
  write(ser.serialized(17),1)
  write(mid_spec.solution.pending.contents(6),17)
  write(mid_spec.solution.pending.head,7)
  write(mid_spec.queue.contents(6),17)
  write(mid_spec.queue.head,7)
}
> ser.serialize(16)
{
  write(ser.serialized(16),1)
  write(mid_spec.solution.pending.contents(7),16)
  write(mid_spec.solution.pending.head,8)
  write(mid_spec.queue.contents(7),16)
  write(mid_spec.queue.head,8)
}
> cl_chans.recv(0,{tx:5,bd:{vl:32932}})
{
  write(cl_chans.spec.sent({tx:5,bd:{vl:32932}},0),0)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:14496},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(18),{knd:read,ky:"qh",vl:14496})
  write(ref.next,19)
  write(mid_spec.req_dest(18),prim)
  write(request.tx(req_msg.req(loc:m)),18)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:14496})
}
> cl_chans.recv(0,{tx:8,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:8,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:20315},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(19),{knd:write,ky:"qh",vl:20315})
  write(ref.next,20)
  write(mid_spec.req_dest(19),prim)
  write(request.tx(req_msg.req(loc:m)),19)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:20315})
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:17,bd:{knd:write,ky:"qh",vl:12462}}})
{
  write(mid_spec.queue.tail,7)
  write(ref.rep.store("qh"),12462)
  write(ref.txres(17),{vl:0})
  write(ref.committed(17),1)
  write(mid_spec.solution.pending.tail,7)
  write(response.tx(loc:res),17)
  write(sec.rep.store("qh"),12462)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(17),1)
  write(cl_chans.spec.sent({tx:17,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:17,bd:{knd:write,ky:"qh",vl:12462}}})
{
  write(mid_spec.acked(17),1)
}
}
> ref.commit(18,prim)
{
  write(response_body.vl(fml:out),12462)
  write(ref.txres(18),{vl:12462})
  write(ref.committed(18),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:16,bd:{knd:write,ky:"qh",vl:17884}}})
{
  write(mid_spec.queue.tail,8)
  write(ref.rep.store("qh"),17884)
  write(ref.txres(16),{vl:0})
  write(ref.committed(16),1)
  write(mid_spec.solution.pending.tail,8)
  write(response.tx(loc:res),16)
  write(sec.rep.store("qh"),17884)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(16),1)
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:16,bd:{knd:write,ky:"qh",vl:17884}}})
{
  write(mid_spec.acked(16),1)
}
}
> ser.serialize(19)
{
  write(ser.serialized(19),1)
  write(mid_spec.solution.pending.contents(8),19)
  write(mid_spec.solution.pending.head,9)
  write(mid_spec.queue.contents(8),19)
  write(mid_spec.queue.head,9)
}
> cl.client_request(0,{knd:write,ky:"d",vl:19435},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(20),{knd:write,ky:"d",vl:19435})
  write(ref.next,21)
  write(mid_spec.req_dest(20),sec)
  write(request.tx(req_msg.req(loc:m)),20)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:19435})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:20,bd:{knd:write,ky:"d",vl:19435}}}),1)
}
> cl_chans.send(0,{tx:18,bd:{vl:12462}})
{
  write(service_spec.responded(18),1)
  write(cl_chans.spec.sent({tx:18,bd:{vl:12462}},0),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:19,bd:{knd:write,ky:"qh",vl:20315}}})
{
  write(mid_spec.queue.tail,9)
  write(ref.rep.store("qh"),20315)
  write(ref.txres(19),{vl:0})
  write(ref.committed(19),1)
  write(mid_spec.solution.pending.tail,9)
  write(response.tx(loc:res),19)
  write(sec.rep.store("qh"),20315)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(19),1)
  write(cl_chans.spec.sent({tx:19,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:19,bd:{knd:write,ky:"qh",vl:20315}}})
{
  write(mid_spec.acked(19),1)
}
}
> cl.client_request(1,{knd:write,ky:"qh",vl:52241},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(21),{knd:write,ky:"qh",vl:52241})
  write(ref.next,22)
  write(mid_spec.req_dest(21),prim)
  write(request.tx(req_msg.req(loc:m)),21)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:52241})
}
> sec.req_chan.recv({cid:0,req:{tx:17,bd:{knd:write,ky:"qh",vl:12462}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:17,bd:{knd:write,ky:"qh",vl:12462}}}),0)
}
> cl_chans.recv(1,{tx:19,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:19,bd:{vl:0}},1),0)
}
> cl_chans.recv(1,{tx:13,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:13,bd:{vl:0}},1),0)
}
> ser.serialize(21)
{
  write(ser.serialized(21),1)
  write(mid_spec.solution.pending.contents(9),21)
  write(mid_spec.solution.pending.head,10)
  write(mid_spec.queue.contents(9),21)
  write(mid_spec.queue.head,10)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:21,bd:{knd:write,ky:"qh",vl:52241}}})
{
  write(mid_spec.queue.tail,10)
  write(ref.rep.store("qh"),52241)
  write(ref.txres(21),{vl:0})
  write(ref.committed(21),1)
  write(mid_spec.solution.pending.tail,10)
  write(response.tx(loc:res),21)
  write(sec.rep.store("qh"),52241)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(21),1)
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:21,bd:{knd:write,ky:"qh",vl:52241}}})
{
  write(mid_spec.acked(21),1)
}
}
> sec.req_chan.recv({cid:0,req:{tx:20,bd:{knd:write,ky:"d",vl:19435}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:20,bd:{knd:write,ky:"d",vl:19435}}}),0)
}
> ser.serialize(20)
{
  write(ser.serialized(20),1)
  write(mid_spec.solution.pending.contents(10),20)
  write(mid_spec.solution.pending.head,11)
  write(mid_spec.queue.contents(10),20)
  write(mid_spec.queue.head,11)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:20,bd:{knd:write,ky:"d",vl:19435}}})
{
  write(mid_spec.queue.tail,11)
  write(ref.rep.store("d"),19435)
  write(ref.txres(20),{vl:0})
  write(ref.committed(20),1)
  write(mid_spec.solution.pending.tail,11)
  write(response.tx(loc:res),20)
  write(sec.rep.store("d"),19435)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(20),1)
  write(cl_chans.spec.sent({tx:20,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:20,bd:{knd:write,ky:"d",vl:19435}}})
{
  write(mid_spec.acked(20),1)
}
}
> cl.client_request(1,{knd:write,ky:"d",vl:25489},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(22),{knd:write,ky:"d",vl:25489})
  write(ref.next,23)
  write(mid_spec.req_dest(22),sec)
  write(request.tx(req_msg.req(loc:m)),22)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:25489})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:22,bd:{knd:write,ky:"d",vl:25489}}}),1)
}
> ser.serialize(22)
{
  write(ser.serialized(22),1)
  write(mid_spec.solution.pending.contents(11),22)
  write(mid_spec.solution.pending.head,12)
  write(mid_spec.queue.contents(11),22)
  write(mid_spec.queue.head,12)
}
> sec.req_chan.recv({cid:1,req:{tx:22,bd:{knd:write,ky:"d",vl:25489}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:22,bd:{knd:write,ky:"d",vl:25489}}}),0)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:51249},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(23),{knd:write,ky:"qh",vl:51249})
  write(ref.next,24)
  write(mid_spec.req_dest(23),prim)
  write(request.tx(req_msg.req(loc:m)),23)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:51249})
}
> ser.serialize(23)
{
  write(ser.serialized(23),1)
  write(mid_spec.solution.pending.contents(12),23)
  write(mid_spec.solution.pending.head,13)
  write(mid_spec.queue.contents(12),23)
  write(mid_spec.queue.head,13)
}
> cl.client_request(1,{knd:read,ky:"d",vl:57148},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(24),{knd:read,ky:"d",vl:57148})
  write(ref.next,25)
  write(mid_spec.req_dest(24),sec)
  write(request.tx(req_msg.req(loc:m)),24)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:57148})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:24,bd:{knd:read,ky:"d",vl:57148}}}),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:12982},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(25),{knd:write,ky:"d",vl:12982})
  write(ref.next,26)
  write(mid_spec.req_dest(25),sec)
  write(request.tx(req_msg.req(loc:m)),25)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:12982})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:25,bd:{knd:write,ky:"d",vl:12982}}}),1)
}
> ser.serialize(25)
{
  write(ser.serialized(25),1)
  write(mid_spec.solution.pending.contents(13),25)
  write(mid_spec.solution.pending.head,14)
  write(mid_spec.queue.contents(13),25)
  write(mid_spec.queue.head,14)
}
> cl_chans.recv(0,{tx:16,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},0),0)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:22,bd:{knd:write,ky:"d",vl:25489}}})
{
  write(mid_spec.queue.tail,12)
  write(ref.rep.store("d"),25489)
  write(ref.txres(22),{vl:0})
  write(ref.committed(22),1)
  write(mid_spec.solution.pending.tail,12)
  write(response.tx(loc:res),22)
  write(sec.rep.store("d"),25489)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(22),1)
  write(cl_chans.spec.sent({tx:22,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:22,bd:{knd:write,ky:"d",vl:25489}}})
{
  write(mid_spec.acked(22),1)
}
}
> cl_chans.recv(0,{tx:22,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:22,bd:{vl:0}},0),0)
}
> cl_chans.recv(0,{tx:21,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},0),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:23,bd:{knd:write,ky:"qh",vl:51249}}})
{
  write(mid_spec.queue.tail,13)
  write(ref.rep.store("qh"),51249)
  write(ref.txres(23),{vl:0})
  write(ref.committed(23),1)
  write(mid_spec.solution.pending.tail,13)
  write(response.tx(loc:res),23)
  write(sec.rep.store("qh"),51249)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(23),1)
  write(cl_chans.spec.sent({tx:23,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:23,bd:{knd:write,ky:"qh",vl:51249}}})
{
  write(mid_spec.acked(23),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:25,bd:{knd:write,ky:"d",vl:12982}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:25,bd:{knd:write,ky:"d",vl:12982}}}),0)
}
> cl_chans.recv(0,{tx:18,bd:{vl:12462}})
{
  write(cl_chans.spec.sent({tx:18,bd:{vl:12462}},0),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:40166},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(26),{knd:read,ky:"qh",vl:40166})
  write(ref.next,27)
  write(mid_spec.req_dest(26),sec)
  write(request.tx(req_msg.req(loc:m)),26)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:40166})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:26,bd:{knd:read,ky:"qh",vl:40166}}}),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:25,bd:{knd:write,ky:"d",vl:12982}}})
{
  write(mid_spec.queue.tail,14)
  write(ref.rep.store("d"),12982)
  write(ref.txres(25),{vl:0})
  write(ref.committed(25),1)
  write(mid_spec.solution.pending.tail,14)
  write(response.tx(loc:res),25)
  write(sec.rep.store("d"),12982)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(25),1)
  write(cl_chans.spec.sent({tx:25,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:25,bd:{knd:write,ky:"d",vl:12982}}})
{
  write(mid_spec.acked(25),1)
}
}
test_completed
  write(ref.next,0)
  write(sec.failed,0)
  write(mid_spec.queue.head,0)
  write(mid_spec.queue.tail,0)
  write(mid_spec.sec_failed,0)
  write(mid_spec.solution.pending.head,0)
  write(mid_spec.solution.pending.tail,0)
> cl.client_request(1,{knd:read,ky:"d",vl:61926},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(0),{knd:read,ky:"d",vl:61926})
  write(ref.next,1)
  write(mid_spec.req_dest(0),sec)
  write(request.tx(req_msg.req(loc:m)),0)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:61926})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:0,bd:{knd:read,ky:"d",vl:61926}}}),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:40262},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(1),{knd:write,ky:"qh",vl:40262})
  write(ref.next,2)
  write(mid_spec.req_dest(1),prim)
  write(request.tx(req_msg.req(loc:m)),1)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:40262})
}
> ser.serialize(1)
{
  write(ser.serialized(1),1)
  write(mid_spec.solution.pending.contents(0),1)
  write(mid_spec.solution.pending.head,1)
  write(mid_spec.queue.contents(0),1)
  write(mid_spec.queue.head,1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:1,bd:{knd:write,ky:"qh",vl:40262}}})
{
  write(mid_spec.queue.tail,1)
  write(ref.rep.store("qh"),40262)
  write(ref.txres(1),{vl:0})
  write(ref.committed(1),1)
  write(mid_spec.solution.pending.tail,1)
  write(response.tx(loc:res),1)
  write(sec.rep.store("qh"),40262)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(1),1)
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:1,bd:{knd:write,ky:"qh",vl:40262}}})
{
  write(mid_spec.acked(1),1)
}
}
> cl_chans.recv(1,{tx:1,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},1),0)
}
> sec.req_chan.recv({cid:1,req:{tx:0,bd:{knd:read,ky:"d",vl:61926}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:0,bd:{knd:read,ky:"d",vl:61926}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(0),{vl:0})
  write(ref.committed(0),1)
  write(response.tx(loc:res),0)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(0),1)
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:45680},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(2),{knd:write,ky:"d",vl:45680})
  write(ref.next,3)
  write(mid_spec.req_dest(2),sec)
  write(request.tx(req_msg.req(loc:m)),2)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:45680})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:2,bd:{knd:write,ky:"d",vl:45680}}}),1)
}
> cl_chans.recv(1,{tx:0,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),0)
}
> ser.serialize(2)
{
  write(ser.serialized(2),1)
  write(mid_spec.solution.pending.contents(1),2)
  write(mid_spec.solution.pending.head,2)
  write(mid_spec.queue.contents(1),2)
  write(mid_spec.queue.head,2)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:44497},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(3),{knd:read,ky:"qh",vl:44497})
  write(ref.next,4)
  write(mid_spec.req_dest(3),prim)
  write(request.tx(req_msg.req(loc:m)),3)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:44497})
}
> sec.req_chan.recv({cid:1,req:{tx:2,bd:{knd:write,ky:"d",vl:45680}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:2,bd:{knd:write,ky:"d",vl:45680}}}),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:12664},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(4),{knd:write,ky:"d",vl:12664})
  write(ref.next,5)
  write(mid_spec.req_dest(4),sec)
  write(request.tx(req_msg.req(loc:m)),4)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:12664})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:4,bd:{knd:write,ky:"d",vl:12664}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:4,bd:{knd:write,ky:"d",vl:12664}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:4,bd:{knd:write,ky:"d",vl:12664}}}),0)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:48350},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(5),{knd:write,ky:"qh",vl:48350})
  write(ref.next,6)
  write(mid_spec.req_dest(5),prim)
  write(request.tx(req_msg.req(loc:m)),5)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:48350})
}
> cl.client_request(0,{knd:read,ky:"qh",vl:51317},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(6),{knd:read,ky:"qh",vl:51317})
  write(ref.next,7)
  write(mid_spec.req_dest(6),prim)
  write(request.tx(req_msg.req(loc:m)),6)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:51317})
}
> ref.commit(6,prim)
{
  write(response_body.vl(fml:out),40262)
  write(ref.txres(6),{vl:40262})
  write(ref.committed(6),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:45212},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(7),{knd:write,ky:"qh",vl:45212})
  write(ref.next,8)
  write(mid_spec.req_dest(7),prim)
  write(request.tx(req_msg.req(loc:m)),7)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:45212})
}
> cl_chans.send(0,{tx:6,bd:{vl:40262}})
{
  write(service_spec.responded(6),1)
  write(cl_chans.spec.sent({tx:6,bd:{vl:40262}},0),1)
}
> ref.commit(3,prim)
{
  write(response_body.vl(fml:out),40262)
  write(ref.txres(3),{vl:40262})
  write(ref.committed(3),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:33473},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(8),{knd:read,ky:"qh",vl:33473})
  write(ref.next,9)
  write(mid_spec.req_dest(8),sec)
  write(request.tx(req_msg.req(loc:m)),8)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:33473})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:8,bd:{knd:read,ky:"qh",vl:33473}}}),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:44190},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(9),{knd:read,ky:"d",vl:44190})
  write(ref.next,10)
  write(mid_spec.req_dest(9),prim)
  write(request.tx(req_msg.req(loc:m)),9)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:44190})
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:2,bd:{knd:write,ky:"d",vl:45680}}})
{
  write(mid_spec.queue.tail,2)
  write(ref.rep.store("d"),45680)
  write(ref.txres(2),{vl:0})
  write(ref.committed(2),1)
  write(mid_spec.solution.pending.tail,2)
  write(response.tx(loc:res),2)
  write(sec.rep.store("d"),45680)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(2),1)
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:2,bd:{knd:write,ky:"d",vl:45680}}})
{
  write(mid_spec.acked(2),1)
}
}
> cl.client_request(1,{knd:read,ky:"d",vl:11666},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(10),{knd:read,ky:"d",vl:11666})
  write(ref.next,11)
  write(mid_spec.req_dest(10),sec)
  write(request.tx(req_msg.req(loc:m)),10)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:11666})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:10,bd:{knd:read,ky:"d",vl:11666}}}),1)
}
> cl_chans.recv(0,{tx:6,bd:{vl:40262}})
{
  write(cl_chans.spec.sent({tx:6,bd:{vl:40262}},0),0)
}
> ser.serialize(7)
{
  write(ser.serialized(7),1)
  write(mid_spec.solution.pending.contents(2),7)
  write(mid_spec.solution.pending.head,3)
  write(mid_spec.queue.contents(2),7)
  write(mid_spec.queue.head,3)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:7,bd:{knd:write,ky:"qh",vl:45212}}})
{
  write(mid_spec.queue.tail,3)
  write(ref.rep.store("qh"),45212)
  write(ref.txres(7),{vl:0})
  write(ref.committed(7),1)
  write(mid_spec.solution.pending.tail,3)
  write(response.tx(loc:res),7)
  write(sec.rep.store("qh"),45212)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(7),1)
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:7,bd:{knd:write,ky:"qh",vl:45212}}})
{
  write(mid_spec.acked(7),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:8,bd:{knd:read,ky:"qh",vl:33473}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:8,bd:{knd:read,ky:"qh",vl:33473}}}),0)
  write(response_body.vl(fml:out),45212)
  write(ref.txres(8),{vl:45212})
  write(ref.committed(8),1)
  write(response.tx(loc:res),8)
  write(response_body.vl(fml:out),45212)
  write(response.bd(loc:res),{vl:45212})
  write(service_spec.responded(8),1)
  write(cl_chans.spec.sent({tx:8,bd:{vl:45212}},1),1)
}
> ref.commit(9,prim)
{
  write(response_body.vl(fml:out),45680)
  write(ref.txres(9),{vl:45680})
  write(ref.committed(9),1)
}
> cl_chans.recv(1,{tx:8,bd:{vl:45212}})
{
  write(cl_chans.spec.sent({tx:8,bd:{vl:45212}},1),0)
}
> ser.serialize(5)
{
  write(ser.serialized(5),1)
  write(mid_spec.solution.pending.contents(3),5)
  write(mid_spec.solution.pending.head,4)
  write(mid_spec.queue.contents(3),5)
  write(mid_spec.queue.head,4)
}
> cl.client_request(0,{knd:write,ky:"d",vl:41264},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(11),{knd:write,ky:"d",vl:41264})
  write(ref.next,12)
  write(mid_spec.req_dest(11),prim)
  write(request.tx(req_msg.req(loc:m)),11)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:41264})
}
> sec.req_chan.recv({cid:1,req:{tx:10,bd:{knd:read,ky:"d",vl:11666}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:10,bd:{knd:read,ky:"d",vl:11666}}}),0)
  write(response_body.vl(fml:out),45680)
  write(ref.txres(10),{vl:45680})
  write(ref.committed(10),1)
  write(response.tx(loc:res),10)
  write(response_body.vl(fml:out),45680)
  write(response.bd(loc:res),{vl:45680})
  write(service_spec.responded(10),1)
  write(cl_chans.spec.sent({tx:10,bd:{vl:45680}},1),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:8515},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(12),{knd:write,ky:"qh",vl:8515})
  write(ref.next,13)
  write(mid_spec.req_dest(12),sec)
  write(request.tx(req_msg.req(loc:m)),12)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:8515})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:12,bd:{knd:write,ky:"qh",vl:8515}}}),1)
}
> ser.serialize(12)
{
  write(ser.serialized(12),1)
  write(mid_spec.solution.pending.contents(4),12)
  write(mid_spec.solution.pending.head,5)
  write(mid_spec.queue.contents(4),12)
  write(mid_spec.queue.head,5)
}
> sec.req_chan.recv({cid:0,req:{tx:12,bd:{knd:write,ky:"qh",vl:8515}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:12,bd:{knd:write,ky:"qh",vl:8515}}}),0)
}
> cl_chans.recv(0,{tx:2,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},0),0)
}
> ser.serialize(11)
{
  write(ser.serialized(11),1)
  write(mid_spec.solution.pending.contents(5),11)
  write(mid_spec.solution.pending.head,6)
  write(mid_spec.queue.contents(5),11)
  write(mid_spec.queue.head,6)
}
> ser.serialize(4)
{
  write(ser.serialized(4),1)
  write(mid_spec.solution.pending.contents(6),4)
  write(mid_spec.solution.pending.head,7)
  write(mid_spec.queue.contents(6),4)
  write(mid_spec.queue.head,7)
}
> cl_chans.send(0,{tx:3,bd:{vl:40262}})
{
  write(service_spec.responded(3),1)
  write(cl_chans.spec.sent({tx:3,bd:{vl:40262}},0),1)
}
> cl_chans.send(0,{tx:9,bd:{vl:45680}})
{
  write(service_spec.responded(9),1)
  write(cl_chans.spec.sent({tx:9,bd:{vl:45680}},0),1)
}
> cl_chans.recv(1,{tx:10,bd:{vl:45680}})
{
  write(cl_chans.spec.sent({tx:10,bd:{vl:45680}},1),0)
}
> cl_chans.recv(0,{tx:9,bd:{vl:45680}})
{
  write(cl_chans.spec.sent({tx:9,bd:{vl:45680}},0),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:63090},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(13),{knd:read,ky:"d",vl:63090})
  write(ref.next,14)
  write(mid_spec.req_dest(13),sec)
  write(request.tx(req_msg.req(loc:m)),13)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:63090})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:13,bd:{knd:read,ky:"d",vl:63090}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:13,bd:{knd:read,ky:"d",vl:63090}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:13,bd:{knd:read,ky:"d",vl:63090}}}),0)
  write(response_body.vl(fml:out),45680)
  write(ref.txres(13),{vl:45680})
  write(ref.committed(13),1)
  write(response.tx(loc:res),13)
  write(response_body.vl(fml:out),45680)
  write(response.bd(loc:res),{vl:45680})
  write(service_spec.responded(13),1)
  write(cl_chans.spec.sent({tx:13,bd:{vl:45680}},0),1)
}
> cl_chans.recv(0,{tx:13,bd:{vl:45680}})
{
  write(cl_chans.spec.sent({tx:13,bd:{vl:45680}},0),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:26665},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(14),{knd:write,ky:"d",vl:26665})
  write(ref.next,15)
  write(mid_spec.req_dest(14),sec)
  write(request.tx(req_msg.req(loc:m)),14)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:26665})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:14,bd:{knd:write,ky:"d",vl:26665}}}),1)
}
> ser.serialize(14)
{
  write(ser.serialized(14),1)
  write(mid_spec.solution.pending.contents(7),14)
  write(mid_spec.solution.pending.head,8)
  write(mid_spec.queue.contents(7),14)
  write(mid_spec.queue.head,8)
}
> sec.req_chan.recv({cid:0,req:{tx:14,bd:{knd:write,ky:"d",vl:26665}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:14,bd:{knd:write,ky:"d",vl:26665}}}),0)
}
> cl_chans.recv(0,{tx:7,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},0),0)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:5,bd:{knd:write,ky:"qh",vl:48350}}})
{
  write(mid_spec.queue.tail,4)
  write(ref.rep.store("qh"),48350)
  write(ref.txres(5),{vl:0})
  write(ref.committed(5),1)
  write(mid_spec.solution.pending.tail,4)
  write(response.tx(loc:res),5)
  write(sec.rep.store("qh"),48350)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(5),1)
  write(cl_chans.spec.sent({tx:5,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:5,bd:{knd:write,ky:"qh",vl:48350}}})
{
  write(mid_spec.acked(5),1)
}
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:12,bd:{knd:write,ky:"qh",vl:8515}}})
{
  write(mid_spec.queue.tail,5)
  write(ref.rep.store("qh"),8515)
  write(ref.txres(12),{vl:0})
  write(ref.committed(12),1)
  write(mid_spec.solution.pending.tail,5)
  write(response.tx(loc:res),12)
  write(sec.rep.store("qh"),8515)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(12),1)
  write(cl_chans.spec.sent({tx:12,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:12,bd:{knd:write,ky:"qh",vl:8515}}})
{
  write(mid_spec.acked(12),1)
}
}
> cl.client_request(0,{knd:read,ky:"d",vl:5144},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(15),{knd:read,ky:"d",vl:5144})
  write(ref.next,16)
  write(mid_spec.req_dest(15),prim)
  write(request.tx(req_msg.req(loc:m)),15)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:5144})
}
> cl_chans.recv(1,{tx:12,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:12,bd:{vl:0}},1),0)
}
> ref.commit(15,prim)
{
  write(response_body.vl(fml:out),45680)
  write(ref.txres(15),{vl:45680})
  write(ref.committed(15),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:17380},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(16),{knd:read,ky:"d",vl:17380})
  write(ref.next,17)
  write(mid_spec.req_dest(16),sec)
  write(request.tx(req_msg.req(loc:m)),16)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:17380})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:16,bd:{knd:read,ky:"d",vl:17380}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:16,bd:{knd:read,ky:"d",vl:17380}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:16,bd:{knd:read,ky:"d",vl:17380}}}),0)
  write(response_body.vl(fml:out),45680)
  write(ref.txres(16),{vl:45680})
  write(ref.committed(16),1)
  write(response.tx(loc:res),16)
  write(response_body.vl(fml:out),45680)
  write(response.bd(loc:res),{vl:45680})
  write(service_spec.responded(16),1)
  write(cl_chans.spec.sent({tx:16,bd:{vl:45680}},0),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:63114},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(17),{knd:write,ky:"d",vl:63114})
  write(ref.next,18)
  write(mid_spec.req_dest(17),sec)
  write(request.tx(req_msg.req(loc:m)),17)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:63114})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:17,bd:{knd:write,ky:"d",vl:63114}}}),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:11,bd:{knd:write,ky:"d",vl:41264}}})
{
  write(mid_spec.queue.tail,6)
  write(ref.rep.store("d"),41264)
  write(ref.txres(11),{vl:0})
  write(ref.committed(11),1)
  write(mid_spec.solution.pending.tail,6)
  write(response.tx(loc:res),11)
  write(sec.rep.store("d"),41264)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(11),1)
  write(cl_chans.spec.sent({tx:11,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:11,bd:{knd:write,ky:"d",vl:41264}}})
{
  write(mid_spec.acked(11),1)
}
}
> cl.client_request(1,{knd:write,ky:"qh",vl:53081},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(18),{knd:write,ky:"qh",vl:53081})
  write(ref.next,19)
  write(mid_spec.req_dest(18),prim)
  write(request.tx(req_msg.req(loc:m)),18)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:53081})
}
> ser.serialize(18)
{
  write(ser.serialized(18),1)
  write(mid_spec.solution.pending.contents(8),18)
  write(mid_spec.solution.pending.head,9)
  write(mid_spec.queue.contents(8),18)
  write(mid_spec.queue.head,9)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:5385},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(19),{knd:read,ky:"qh",vl:5385})
  write(ref.next,20)
  write(mid_spec.req_dest(19),sec)
  write(request.tx(req_msg.req(loc:m)),19)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:5385})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:5385}}}),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:63172},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(20),{knd:read,ky:"d",vl:63172})
  write(ref.next,21)
  write(mid_spec.req_dest(20),prim)
  write(request.tx(req_msg.req(loc:m)),20)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:63172})
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:4,bd:{knd:write,ky:"d",vl:12664}}})
{
  write(mid_spec.queue.tail,7)
  write(ref.rep.store("d"),12664)
  write(ref.txres(4),{vl:0})
  write(ref.committed(4),1)
  write(mid_spec.solution.pending.tail,7)
  write(response.tx(loc:res),4)
  write(sec.rep.store("d"),12664)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(4),1)
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:4,bd:{knd:write,ky:"d",vl:12664}}})
{
  write(mid_spec.acked(4),1)
}
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:14,bd:{knd:write,ky:"d",vl:26665}}})
{
  write(mid_spec.queue.tail,8)
  write(ref.rep.store("d"),26665)
  write(ref.txres(14),{vl:0})
  write(ref.committed(14),1)
  write(mid_spec.solution.pending.tail,8)
  write(response.tx(loc:res),14)
  write(sec.rep.store("d"),26665)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(14),1)
  write(cl_chans.spec.sent({tx:14,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:14,bd:{knd:write,ky:"d",vl:26665}}})
{
  write(mid_spec.acked(14),1)
}
}
> cl_chans.recv(0,{tx:14,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:14,bd:{vl:0}},0),0)
}
> ref.commit(20,prim)
{
  write(response_body.vl(fml:out),26665)
  write(ref.txres(20),{vl:26665})
  write(ref.committed(20),1)
}
> cl_chans.send(0,{tx:15,bd:{vl:45680}})
{
  write(service_spec.responded(15),1)
  write(cl_chans.spec.sent({tx:15,bd:{vl:45680}},0),1)
}
> cl_chans.send(0,{tx:20,bd:{vl:26665}})
{
  write(service_spec.responded(20),1)
  write(cl_chans.spec.sent({tx:20,bd:{vl:26665}},0),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:18,bd:{knd:write,ky:"qh",vl:53081}}})
{
  write(mid_spec.queue.tail,9)
  write(ref.rep.store("qh"),53081)
  write(ref.txres(18),{vl:0})
  write(ref.committed(18),1)
  write(mid_spec.solution.pending.tail,9)
  write(response.tx(loc:res),18)
  write(sec.rep.store("qh"),53081)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(18),1)
  write(cl_chans.spec.sent({tx:18,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:18,bd:{knd:write,ky:"qh",vl:53081}}})
{
  write(mid_spec.acked(18),1)
}
}
> cl_chans.recv(1,{tx:18,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:18,bd:{vl:0}},1),0)
}
> sec.req_chan.recv({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:5385}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:5385}}}),0)
  write(response_body.vl(fml:out),53081)
  write(ref.txres(19),{vl:53081})
  write(ref.committed(19),1)
  write(response.tx(loc:res),19)
  write(response_body.vl(fml:out),53081)
  write(response.bd(loc:res),{vl:53081})
  write(service_spec.responded(19),1)
  write(cl_chans.spec.sent({tx:19,bd:{vl:53081}},0),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:21686},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(21),{knd:write,ky:"qh",vl:21686})
  write(ref.next,22)
  write(mid_spec.req_dest(21),sec)
  write(request.tx(req_msg.req(loc:m)),21)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:21686})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:write,ky:"qh",vl:21686}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:21,bd:{knd:write,ky:"qh",vl:21686}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:write,ky:"qh",vl:21686}}}),0)
}
> sec.req_chan.recv({cid:1,req:{tx:17,bd:{knd:write,ky:"d",vl:63114}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:17,bd:{knd:write,ky:"d",vl:63114}}}),0)
}
> ser.serialize(21)
{
  write(ser.serialized(21),1)
  write(mid_spec.solution.pending.contents(9),21)
  write(mid_spec.solution.pending.head,10)
  write(mid_spec.queue.contents(9),21)
  write(mid_spec.queue.head,10)
}
> cl.client_request(0,{knd:read,ky:"d",vl:62493},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(22),{knd:read,ky:"d",vl:62493})
  write(ref.next,23)
  write(mid_spec.req_dest(22),prim)
  write(request.tx(req_msg.req(loc:m)),22)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:62493})
}
> cl_chans.recv(0,{tx:19,bd:{vl:53081}})
{
  write(cl_chans.spec.sent({tx:19,bd:{vl:53081}},0),0)
}
> ser.serialize(17)
{
  write(ser.serialized(17),1)
  write(mid_spec.solution.pending.contents(10),17)
  write(mid_spec.solution.pending.head,11)
  write(mid_spec.queue.contents(10),17)
  write(mid_spec.queue.head,11)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:31215},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(23),{knd:read,ky:"qh",vl:31215})
  write(ref.next,24)
  write(mid_spec.req_dest(23),prim)
  write(request.tx(req_msg.req(loc:m)),23)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:31215})
}
> cl.client_request(0,{knd:read,ky:"qh",vl:8895},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(24),{knd:read,ky:"qh",vl:8895})
  write(ref.next,25)
  write(mid_spec.req_dest(24),sec)
  write(request.tx(req_msg.req(loc:m)),24)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:8895})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:24,bd:{knd:read,ky:"qh",vl:8895}}}),1)
}
> ref.commit(22,prim)
{
  write(response_body.vl(fml:out),26665)
  write(ref.txres(22),{vl:26665})
  write(ref.committed(22),1)
}
> cl_chans.recv(0,{tx:20,bd:{vl:26665}})
{
  write(cl_chans.spec.sent({tx:20,bd:{vl:26665}},0),0)
}
> cl_chans.send(0,{tx:22,bd:{vl:26665}})
{
  write(service_spec.responded(22),1)
  write(cl_chans.spec.sent({tx:22,bd:{vl:26665}},0),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:14095},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(25),{knd:read,ky:"d",vl:14095})
  write(ref.next,26)
  write(mid_spec.req_dest(25),prim)
  write(request.tx(req_msg.req(loc:m)),25)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:14095})
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:21,bd:{knd:write,ky:"qh",vl:21686}}})
{
  write(mid_spec.queue.tail,10)
  write(ref.rep.store("qh"),21686)
  write(ref.txres(21),{vl:0})
  write(ref.committed(21),1)
  write(mid_spec.solution.pending.tail,10)
  write(response.tx(loc:res),21)
  write(sec.rep.store("qh"),21686)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(21),1)
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:21,bd:{knd:write,ky:"qh",vl:21686}}})
{
  write(mid_spec.acked(21),1)
}
}
> sec.req_chan.recv({cid:0,req:{tx:24,bd:{knd:read,ky:"qh",vl:8895}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:24,bd:{knd:read,ky:"qh",vl:8895}}}),0)
  write(response_body.vl(fml:out),21686)
  write(ref.txres(24),{vl:21686})
  write(ref.committed(24),1)
  write(response.tx(loc:res),24)
  write(response_body.vl(fml:out),21686)
  write(response.bd(loc:res),{vl:21686})
  write(service_spec.responded(24),1)
  write(cl_chans.spec.sent({tx:24,bd:{vl:21686}},0),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:17,bd:{knd:write,ky:"d",vl:63114}}})
{
  write(mid_spec.queue.tail,11)
  write(ref.rep.store("d"),63114)
  write(ref.txres(17),{vl:0})
  write(ref.committed(17),1)
  write(mid_spec.solution.pending.tail,11)
  write(response.tx(loc:res),17)
  write(sec.rep.store("d"),63114)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(17),1)
  write(cl_chans.spec.sent({tx:17,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:17,bd:{knd:write,ky:"d",vl:63114}}})
{
  write(mid_spec.acked(17),1)
}
}
> cl_chans.recv(0,{tx:3,bd:{vl:40262}})
{
  write(cl_chans.spec.sent({tx:3,bd:{vl:40262}},0),0)
}
> cl.client_request(1,{knd:read,ky:"d",vl:59351},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(26),{knd:read,ky:"d",vl:59351})
  write(ref.next,27)
  write(mid_spec.req_dest(26),prim)
  write(request.tx(req_msg.req(loc:m)),26)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:59351})
}
> ref.commit(23,prim)
{
  write(response_body.vl(fml:out),21686)
  write(ref.txres(23),{vl:21686})
  write(ref.committed(23),1)
}
> ref.commit(25,prim)
{
  write(response_body.vl(fml:out),63114)
  write(ref.txres(25),{vl:63114})
  write(ref.committed(25),1)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:17907},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(27),{knd:read,ky:"qh",vl:17907})
  write(ref.next,28)
  write(mid_spec.req_dest(27),prim)
  write(request.tx(req_msg.req(loc:m)),27)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:17907})
}
> cl.client_request(0,{knd:read,ky:"qh",vl:1308},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(28),{knd:read,ky:"qh",vl:1308})
  write(ref.next,29)
  write(mid_spec.req_dest(28),sec)
  write(request.tx(req_msg.req(loc:m)),28)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:1308})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:28,bd:{knd:read,ky:"qh",vl:1308}}}),1)
}
> cl_chans.send(0,{tx:23,bd:{vl:21686}})
{
  write(service_spec.responded(23),1)
  write(cl_chans.spec.sent({tx:23,bd:{vl:21686}},0),1)
}
> cl_chans.recv(0,{tx:24,bd:{vl:21686}})
{
  write(cl_chans.spec.sent({tx:24,bd:{vl:21686}},0),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:63278},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(29),{knd:read,ky:"d",vl:63278})
  write(ref.next,30)
  write(mid_spec.req_dest(29),prim)
  write(request.tx(req_msg.req(loc:m)),29)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:63278})
}
> ref.commit(29,prim)
{
  write(response_body.vl(fml:out),63114)
  write(ref.txres(29),{vl:63114})
  write(ref.committed(29),1)
}
> cl_chans.send(1,{tx:25,bd:{vl:63114}})
{
  write(service_spec.responded(25),1)
  write(cl_chans.spec.sent({tx:25,bd:{vl:63114}},1),1)
}
> cl_chans.recv(1,{tx:17,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:17,bd:{vl:0}},1),0)
}
> ref.commit(26,prim)
{
  write(response_body.vl(fml:out),63114)
  write(ref.txres(26),{vl:63114})
  write(ref.committed(26),1)
}
test_completed
  write(ref.next,0)
  write(sec.failed,0)
  write(mid_spec.queue.head,0)
  write(mid_spec.queue.tail,0)
  write(mid_spec.sec_failed,0)
  write(mid_spec.solution.pending.head,0)
  write(mid_spec.solution.pending.tail,0)
> cl.client_request(0,{knd:write,ky:"qh",vl:30774},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(0),{knd:write,ky:"qh",vl:30774})
  write(ref.next,1)
  write(mid_spec.req_dest(0),prim)
  write(request.tx(req_msg.req(loc:m)),0)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:30774})
}
> ser.serialize(0)
{
  write(ser.serialized(0),1)
  write(mid_spec.solution.pending.contents(0),0)
  write(mid_spec.solution.pending.head,1)
  write(mid_spec.queue.contents(0),0)
  write(mid_spec.queue.head,1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:34810},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(1),{knd:read,ky:"d",vl:34810})
  write(ref.next,2)
  write(mid_spec.req_dest(1),prim)
  write(request.tx(req_msg.req(loc:m)),1)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:34810})
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:0,bd:{knd:write,ky:"qh",vl:30774}}})
{
  write(mid_spec.queue.tail,1)
  write(ref.rep.store("qh"),30774)
  write(ref.txres(0),{vl:0})
  write(ref.committed(0),1)
  write(mid_spec.solution.pending.tail,1)
  write(response.tx(loc:res),0)
  write(sec.rep.store("qh"),30774)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(0),1)
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:0,bd:{knd:write,ky:"qh",vl:30774}}})
{
  write(mid_spec.acked(0),1)
}
}
> ref.commit(1,prim)
{
  write(response_body.vl(fml:out),0)
  write(ref.txres(1),{vl:0})
  write(ref.committed(1),1)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:27512},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(2),{knd:read,ky:"qh",vl:27512})
  write(ref.next,3)
  write(mid_spec.req_dest(2),prim)
  write(request.tx(req_msg.req(loc:m)),2)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:27512})
}
> cl_chans.send(0,{tx:1,bd:{vl:0}})
{
  write(service_spec.responded(1),1)
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),1)
}
> ref.commit(2,prim)
{
  write(response_body.vl(fml:out),30774)
  write(ref.txres(2),{vl:30774})
  write(ref.committed(2),1)
}
> cl_chans.send(1,{tx:2,bd:{vl:30774}})
{
  write(service_spec.responded(2),1)
  write(cl_chans.spec.sent({tx:2,bd:{vl:30774}},1),1)
}
> cl_chans.recv(0,{tx:1,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),0)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:49779},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(3),{knd:read,ky:"qh",vl:49779})
  write(ref.next,4)
  write(mid_spec.req_dest(3),prim)
  write(request.tx(req_msg.req(loc:m)),3)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:49779})
}
> ref.commit(3,prim)
{
  write(response_body.vl(fml:out),30774)
  write(ref.txres(3),{vl:30774})
  write(ref.committed(3),1)
}
> cl_chans.send(1,{tx:3,bd:{vl:30774}})
{
  write(service_spec.responded(3),1)
  write(cl_chans.spec.sent({tx:3,bd:{vl:30774}},1),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:3559},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(4),{knd:read,ky:"d",vl:3559})
  write(ref.next,5)
  write(mid_spec.req_dest(4),prim)
  write(request.tx(req_msg.req(loc:m)),4)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:3559})
}
> ref.commit(4,prim)
{
  write(response_body.vl(fml:out),0)
  write(ref.txres(4),{vl:0})
  write(ref.committed(4),1)
}
> cl_chans.send(0,{tx:4,bd:{vl:0}})
{
  write(service_spec.responded(4),1)
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},0),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:13608},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(5),{knd:write,ky:"qh",vl:13608})
  write(ref.next,6)
  write(mid_spec.req_dest(5),sec)
  write(request.tx(req_msg.req(loc:m)),5)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:13608})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:5,bd:{knd:write,ky:"qh",vl:13608}}}),1)
}
> cl_chans.recv(0,{tx:4,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},0),0)
}
> sec.req_chan.recv({cid:0,req:{tx:5,bd:{knd:write,ky:"qh",vl:13608}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:5,bd:{knd:write,ky:"qh",vl:13608}}}),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:12828},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(6),{knd:read,ky:"d",vl:12828})
  write(ref.next,7)
  write(mid_spec.req_dest(6),sec)
  write(request.tx(req_msg.req(loc:m)),6)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:12828})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:6,bd:{knd:read,ky:"d",vl:12828}}}),1)
}
> ser.serialize(5)
{
  write(ser.serialized(5),1)
  write(mid_spec.solution.pending.contents(1),5)
  write(mid_spec.solution.pending.head,2)
  write(mid_spec.queue.contents(1),5)
  write(mid_spec.queue.head,2)
}
> sec.req_chan.recv({cid:0,req:{tx:6,bd:{knd:read,ky:"d",vl:12828}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:6,bd:{knd:read,ky:"d",vl:12828}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(6),{vl:0})
  write(ref.committed(6),1)
  write(response.tx(loc:res),6)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(6),1)
  write(cl_chans.spec.sent({tx:6,bd:{vl:0}},0),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:50689},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(7),{knd:write,ky:"d",vl:50689})
  write(ref.next,8)
  write(mid_spec.req_dest(7),prim)
  write(request.tx(req_msg.req(loc:m)),7)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:50689})
}
> cl_chans.recv(1,{tx:0,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),0)
}
> cl_chans.recv(1,{tx:2,bd:{vl:30774}})
{
  write(cl_chans.spec.sent({tx:2,bd:{vl:30774}},1),0)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:5,bd:{knd:write,ky:"qh",vl:13608}}})
{
  write(mid_spec.queue.tail,2)
  write(ref.rep.store("qh"),13608)
  write(ref.txres(5),{vl:0})
  write(ref.committed(5),1)
  write(mid_spec.solution.pending.tail,2)
  write(response.tx(loc:res),5)
  write(sec.rep.store("qh"),13608)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(5),1)
  write(cl_chans.spec.sent({tx:5,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:5,bd:{knd:write,ky:"qh",vl:13608}}})
{
  write(mid_spec.acked(5),1)
}
}
> ser.serialize(7)
{
  write(ser.serialized(7),1)
  write(mid_spec.solution.pending.contents(2),7)
  write(mid_spec.solution.pending.head,3)
  write(mid_spec.queue.contents(2),7)
  write(mid_spec.queue.head,3)
}
> cl_chans.recv(1,{tx:3,bd:{vl:30774}})
{
  write(cl_chans.spec.sent({tx:3,bd:{vl:30774}},1),0)
}
> cl_chans.recv(0,{tx:6,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:6,bd:{vl:0}},0),0)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:7,bd:{knd:write,ky:"d",vl:50689}}})
{
  write(mid_spec.queue.tail,3)
  write(ref.rep.store("d"),50689)
  write(ref.txres(7),{vl:0})
  write(ref.committed(7),1)
  write(mid_spec.solution.pending.tail,3)
  write(response.tx(loc:res),7)
  write(sec.rep.store("d"),50689)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(7),1)
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:7,bd:{knd:write,ky:"d",vl:50689}}})
{
  write(mid_spec.acked(7),1)
}
}
> cl.client_request(1,{knd:read,ky:"qh",vl:53703},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(8),{knd:read,ky:"qh",vl:53703})
  write(ref.next,9)
  write(mid_spec.req_dest(8),prim)
  write(request.tx(req_msg.req(loc:m)),8)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:53703})
}
> cl.client_request(0,{knd:write,ky:"qh",vl:36134},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(9),{knd:write,ky:"qh",vl:36134})
  write(ref.next,10)
  write(mid_spec.req_dest(9),sec)
  write(request.tx(req_msg.req(loc:m)),9)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:36134})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:9,bd:{knd:write,ky:"qh",vl:36134}}}),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:58833},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(10),{knd:read,ky:"d",vl:58833})
  write(ref.next,11)
  write(mid_spec.req_dest(10),sec)
  write(request.tx(req_msg.req(loc:m)),10)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:58833})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:10,bd:{knd:read,ky:"d",vl:58833}}}),1)
}
> ref.commit(8,prim)
{
  write(response_body.vl(fml:out),13608)
  write(ref.txres(8),{vl:13608})
  write(ref.committed(8),1)
}
> ser.serialize(9)
{
  write(ser.serialized(9),1)
  write(mid_spec.solution.pending.contents(3),9)
  write(mid_spec.solution.pending.head,4)
  write(mid_spec.queue.contents(3),9)
  write(mid_spec.queue.head,4)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:9,bd:{knd:write,ky:"qh",vl:36134}}})
{
  write(mid_spec.queue.tail,4)
  write(ref.rep.store("qh"),36134)
  write(ref.txres(9),{vl:0})
  write(ref.committed(9),1)
  write(mid_spec.solution.pending.tail,4)
  write(response.tx(loc:res),9)
  write(sec.rep.store("qh"),36134)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(9),1)
  write(cl_chans.spec.sent({tx:9,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:9,bd:{knd:write,ky:"qh",vl:36134}}})
{
  write(mid_spec.acked(9),1)
}
}
> cl_chans.recv(1,{tx:9,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:9,bd:{vl:0}},1),0)
}
> sec.req_chan.recv({cid:0,req:{tx:10,bd:{knd:read,ky:"d",vl:58833}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:10,bd:{knd:read,ky:"d",vl:58833}}}),0)
  write(response_body.vl(fml:out),50689)
  write(ref.txres(10),{vl:50689})
  write(ref.committed(10),1)
  write(response.tx(loc:res),10)
  write(response_body.vl(fml:out),50689)
  write(response.bd(loc:res),{vl:50689})
  write(service_spec.responded(10),1)
  write(cl_chans.spec.sent({tx:10,bd:{vl:50689}},0),1)
}
> cl_chans.recv(0,{tx:10,bd:{vl:50689}})
{
  write(cl_chans.spec.sent({tx:10,bd:{vl:50689}},0),0)
}
> cl_chans.recv(0,{tx:7,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},0),0)
}
> cl_chans.send(1,{tx:8,bd:{vl:13608}})
{
  write(service_spec.responded(8),1)
  write(cl_chans.spec.sent({tx:8,bd:{vl:13608}},1),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:24389},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(11),{knd:read,ky:"d",vl:24389})
  write(ref.next,12)
  write(mid_spec.req_dest(11),prim)
  write(request.tx(req_msg.req(loc:m)),11)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:24389})
}
> sec.req_chan.recv({cid:0,req:{tx:9,bd:{knd:write,ky:"qh",vl:36134}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:9,bd:{knd:write,ky:"qh",vl:36134}}}),0)
}
> cl_chans.recv(0,{tx:5,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:5,bd:{vl:0}},0),0)
}
> cl_chans.recv(1,{tx:8,bd:{vl:13608}})
{
  write(cl_chans.spec.sent({tx:8,bd:{vl:13608}},1),0)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:39117},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(12),{knd:write,ky:"qh",vl:39117})
  write(ref.next,13)
  write(mid_spec.req_dest(12),sec)
  write(request.tx(req_msg.req(loc:m)),12)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:39117})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:12,bd:{knd:write,ky:"qh",vl:39117}}}),1)
}
> ser.serialize(12)
{
  write(ser.serialized(12),1)
  write(mid_spec.solution.pending.contents(4),12)
  write(mid_spec.solution.pending.head,5)
  write(mid_spec.queue.contents(4),12)
  write(mid_spec.queue.head,5)
}
> ref.commit(11,prim)
{
  write(response_body.vl(fml:out),50689)
  write(ref.txres(11),{vl:50689})
  write(ref.committed(11),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:12,bd:{knd:write,ky:"qh",vl:39117}}})
{
  write(mid_spec.queue.tail,5)
  write(ref.rep.store("qh"),39117)
  write(ref.txres(12),{vl:0})
  write(ref.committed(12),1)
  write(mid_spec.solution.pending.tail,5)
  write(response.tx(loc:res),12)
  write(sec.rep.store("qh"),39117)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(12),1)
  write(cl_chans.spec.sent({tx:12,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:12,bd:{knd:write,ky:"qh",vl:39117}}})
{
  write(mid_spec.acked(12),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:12,bd:{knd:write,ky:"qh",vl:39117}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:12,bd:{knd:write,ky:"qh",vl:39117}}}),0)
}
> cl_chans.send(0,{tx:11,bd:{vl:50689}})
{
  write(service_spec.responded(11),1)
  write(cl_chans.spec.sent({tx:11,bd:{vl:50689}},0),1)
}
> cl_chans.recv(0,{tx:11,bd:{vl:50689}})
{
  write(cl_chans.spec.sent({tx:11,bd:{vl:50689}},0),0)
}
> cl_chans.recv(0,{tx:12,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:12,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:24536},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(13),{knd:read,ky:"d",vl:24536})
  write(ref.next,14)
  write(mid_spec.req_dest(13),prim)
  write(request.tx(req_msg.req(loc:m)),13)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:24536})
}
> cl.client_request(1,{knd:read,ky:"qh",vl:28559},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(14),{knd:read,ky:"qh",vl:28559})
  write(ref.next,15)
  write(mid_spec.req_dest(14),sec)
  write(request.tx(req_msg.req(loc:m)),14)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:28559})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:14,bd:{knd:read,ky:"qh",vl:28559}}}),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:2491},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(15),{knd:write,ky:"qh",vl:2491})
  write(ref.next,16)
  write(mid_spec.req_dest(15),sec)
  write(request.tx(req_msg.req(loc:m)),15)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:2491})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:15,bd:{knd:write,ky:"qh",vl:2491}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:14,bd:{knd:read,ky:"qh",vl:28559}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:14,bd:{knd:read,ky:"qh",vl:28559}}}),0)
  write(response_body.vl(fml:out),39117)
  write(ref.txres(14),{vl:39117})
  write(ref.committed(14),1)
  write(response.tx(loc:res),14)
  write(response_body.vl(fml:out),39117)
  write(response.bd(loc:res),{vl:39117})
  write(service_spec.responded(14),1)
  write(cl_chans.spec.sent({tx:14,bd:{vl:39117}},1),1)
}
> sec.req_chan.recv({cid:0,req:{tx:15,bd:{knd:write,ky:"qh",vl:2491}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:15,bd:{knd:write,ky:"qh",vl:2491}}}),0)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:58631},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(16),{knd:write,ky:"qh",vl:58631})
  write(ref.next,17)
  write(mid_spec.req_dest(16),sec)
  write(request.tx(req_msg.req(loc:m)),16)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:58631})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:16,bd:{knd:write,ky:"qh",vl:58631}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:16,bd:{knd:write,ky:"qh",vl:58631}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:16,bd:{knd:write,ky:"qh",vl:58631}}}),0)
}
> ser.serialize(16)
{
  write(ser.serialized(16),1)
  write(mid_spec.solution.pending.contents(5),16)
  write(mid_spec.solution.pending.head,6)
  write(mid_spec.queue.contents(5),16)
  write(mid_spec.queue.head,6)
}
> ref.commit(13,prim)
{
  write(response_body.vl(fml:out),50689)
  write(ref.txres(13),{vl:50689})
  write(ref.committed(13),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:16,bd:{knd:write,ky:"qh",vl:58631}}})
{
  write(mid_spec.queue.tail,6)
  write(ref.rep.store("qh"),58631)
  write(ref.txres(16),{vl:0})
  write(ref.committed(16),1)
  write(mid_spec.solution.pending.tail,6)
  write(response.tx(loc:res),16)
  write(sec.rep.store("qh"),58631)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(16),1)
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:16,bd:{knd:write,ky:"qh",vl:58631}}})
{
  write(mid_spec.acked(16),1)
}
}
> ser.serialize(15)
{
  write(ser.serialized(15),1)
  write(mid_spec.solution.pending.contents(6),15)
  write(mid_spec.solution.pending.head,7)
  write(mid_spec.queue.contents(6),15)
  write(mid_spec.queue.head,7)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:15,bd:{knd:write,ky:"qh",vl:2491}}})
{
  write(mid_spec.queue.tail,7)
  write(ref.rep.store("qh"),2491)
  write(ref.txres(15),{vl:0})
  write(ref.committed(15),1)
  write(mid_spec.solution.pending.tail,7)
  write(response.tx(loc:res),15)
  write(sec.rep.store("qh"),2491)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(15),1)
  write(cl_chans.spec.sent({tx:15,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:15,bd:{knd:write,ky:"qh",vl:2491}}})
{
  write(mid_spec.acked(15),1)
}
}
> cl.client_request(1,{knd:write,ky:"qh",vl:62482},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(17),{knd:write,ky:"qh",vl:62482})
  write(ref.next,18)
  write(mid_spec.req_dest(17),prim)
  write(request.tx(req_msg.req(loc:m)),17)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:62482})
}
> cl.client_request(0,{knd:read,ky:"qh",vl:22546},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(18),{knd:read,ky:"qh",vl:22546})
  write(ref.next,19)
  write(mid_spec.req_dest(18),sec)
  write(request.tx(req_msg.req(loc:m)),18)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:22546})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:18,bd:{knd:read,ky:"qh",vl:22546}}}),1)
}
> cl_chans.send(1,{tx:13,bd:{vl:50689}})
{
  write(service_spec.responded(13),1)
  write(cl_chans.spec.sent({tx:13,bd:{vl:50689}},1),1)
}
> sec.req_chan.recv({cid:0,req:{tx:18,bd:{knd:read,ky:"qh",vl:22546}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:18,bd:{knd:read,ky:"qh",vl:22546}}}),0)
  write(response_body.vl(fml:out),2491)
  write(ref.txres(18),{vl:2491})
  write(ref.committed(18),1)
  write(response.tx(loc:res),18)
  write(response_body.vl(fml:out),2491)
  write(response.bd(loc:res),{vl:2491})
  write(service_spec.responded(18),1)
  write(cl_chans.spec.sent({tx:18,bd:{vl:2491}},0),1)
}
> ser.serialize(17)
{
  write(ser.serialized(17),1)
  write(mid_spec.solution.pending.contents(7),17)
  write(mid_spec.solution.pending.head,8)
  write(mid_spec.queue.contents(7),17)
  write(mid_spec.queue.head,8)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:50629},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(19),{knd:write,ky:"qh",vl:50629})
  write(ref.next,20)
  write(mid_spec.req_dest(19),prim)
  write(request.tx(req_msg.req(loc:m)),19)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:50629})
}
> cl.client_request(1,{knd:write,ky:"d",vl:29936},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(20),{knd:write,ky:"d",vl:29936})
  write(ref.next,21)
  write(mid_spec.req_dest(20),sec)
  write(request.tx(req_msg.req(loc:m)),20)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:29936})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:29936}}}),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:17,bd:{knd:write,ky:"qh",vl:62482}}})
{
  write(mid_spec.queue.tail,8)
  write(ref.rep.store("qh"),62482)
  write(ref.txres(17),{vl:0})
  write(ref.committed(17),1)
  write(mid_spec.solution.pending.tail,8)
  write(response.tx(loc:res),17)
  write(sec.rep.store("qh"),62482)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(17),1)
  write(cl_chans.spec.sent({tx:17,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:17,bd:{knd:write,ky:"qh",vl:62482}}})
{
  write(mid_spec.acked(17),1)
}
}
> ser.serialize(20)
{
  write(ser.serialized(20),1)
  write(mid_spec.solution.pending.contents(8),20)
  write(mid_spec.solution.pending.head,9)
  write(mid_spec.queue.contents(8),20)
  write(mid_spec.queue.head,9)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:29936}}})
{
  write(mid_spec.queue.tail,9)
  write(ref.rep.store("d"),29936)
  write(ref.txres(20),{vl:0})
  write(ref.committed(20),1)
  write(mid_spec.solution.pending.tail,9)
  write(response.tx(loc:res),20)
  write(sec.rep.store("d"),29936)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(20),1)
  write(cl_chans.spec.sent({tx:20,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:29936}}})
{
  write(mid_spec.acked(20),1)
}
}
> cl.client_request(0,{knd:write,ky:"qh",vl:60905},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(21),{knd:write,ky:"qh",vl:60905})
  write(ref.next,22)
  write(mid_spec.req_dest(21),prim)
  write(request.tx(req_msg.req(loc:m)),21)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:60905})
}
> cl.client_request(1,{knd:read,ky:"d",vl:11639},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(22),{knd:read,ky:"d",vl:11639})
  write(ref.next,23)
  write(mid_spec.req_dest(22),prim)
  write(request.tx(req_msg.req(loc:m)),22)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:11639})
}
> ser.serialize(21)
{
  write(ser.serialized(21),1)
  write(mid_spec.solution.pending.contents(9),21)
  write(mid_spec.solution.pending.head,10)
  write(mid_spec.queue.contents(9),21)
  write(mid_spec.queue.head,10)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:42645},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(23),{knd:read,ky:"qh",vl:42645})
  write(ref.next,24)
  write(mid_spec.req_dest(23),prim)
  write(request.tx(req_msg.req(loc:m)),23)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:42645})
}
> cl_chans.recv(1,{tx:14,bd:{vl:39117}})
{
  write(cl_chans.spec.sent({tx:14,bd:{vl:39117}},1),0)
}
> cl.client_request(1,{knd:write,ky:"d",vl:21692},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(24),{knd:write,ky:"d",vl:21692})
  write(ref.next,25)
  write(mid_spec.req_dest(24),prim)
  write(request.tx(req_msg.req(loc:m)),24)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:21692})
}
> ser.serialize(24)
{
  write(ser.serialized(24),1)
  write(mid_spec.solution.pending.contents(10),24)
  write(mid_spec.solution.pending.head,11)
  write(mid_spec.queue.contents(10),24)
  write(mid_spec.queue.head,11)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:21,bd:{knd:write,ky:"qh",vl:60905}}})
{
  write(mid_spec.queue.tail,10)
  write(ref.rep.store("qh"),60905)
  write(ref.txres(21),{vl:0})
  write(ref.committed(21),1)
  write(mid_spec.solution.pending.tail,10)
  write(response.tx(loc:res),21)
  write(sec.rep.store("qh"),60905)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(21),1)
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:21,bd:{knd:write,ky:"qh",vl:60905}}})
{
  write(mid_spec.acked(21),1)
}
}
> cl.client_request(1,{knd:write,ky:"qh",vl:35856},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(25),{knd:write,ky:"qh",vl:35856})
  write(ref.next,26)
  write(mid_spec.req_dest(25),sec)
  write(request.tx(req_msg.req(loc:m)),25)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:35856})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:25,bd:{knd:write,ky:"qh",vl:35856}}}),1)
}
> cl_chans.recv(0,{tx:18,bd:{vl:2491}})
{
  write(cl_chans.spec.sent({tx:18,bd:{vl:2491}},0),0)
}
> ref.commit(22,prim)
{
  write(response_body.vl(fml:out),29936)
  write(ref.txres(22),{vl:29936})
  write(ref.committed(22),1)
}
> ser.serialize(25)
{
  write(ser.serialized(25),1)
  write(mid_spec.solution.pending.contents(11),25)
  write(mid_spec.solution.pending.head,12)
  write(mid_spec.queue.contents(11),25)
  write(mid_spec.queue.head,12)
}
> cl_chans.send(1,{tx:22,bd:{vl:29936}})
{
  write(service_spec.responded(22),1)
  write(cl_chans.spec.sent({tx:22,bd:{vl:29936}},1),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:17352},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(26),{knd:read,ky:"qh",vl:17352})
  write(ref.next,27)
  write(mid_spec.req_dest(26),sec)
  write(request.tx(req_msg.req(loc:m)),26)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:17352})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:26,bd:{knd:read,ky:"qh",vl:17352}}}),1)
}
> ref.commit(23,prim)
{
  write(response_body.vl(fml:out),60905)
  write(ref.txres(23),{vl:60905})
  write(ref.committed(23),1)
}
> cl_chans.recv(0,{tx:16,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},0),0)
}
> sec.req_chan.recv({cid:1,req:{tx:26,bd:{knd:read,ky:"qh",vl:17352}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:26,bd:{knd:read,ky:"qh",vl:17352}}}),0)
  write(response_body.vl(fml:out),60905)
  write(ref.txres(26),{vl:60905})
  write(ref.committed(26),1)
  write(response.tx(loc:res),26)
  write(response_body.vl(fml:out),60905)
  write(response.bd(loc:res),{vl:60905})
  write(service_spec.responded(26),1)
  write(cl_chans.spec.sent({tx:26,bd:{vl:60905}},1),1)
}
> cl_chans.send(1,{tx:23,bd:{vl:60905}})
{
  write(service_spec.responded(23),1)
  write(cl_chans.spec.sent({tx:23,bd:{vl:60905}},1),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:24,bd:{knd:write,ky:"d",vl:21692}}})
{
  write(mid_spec.queue.tail,11)
  write(ref.rep.store("d"),21692)
  write(ref.txres(24),{vl:0})
  write(ref.committed(24),1)
  write(mid_spec.solution.pending.tail,11)
  write(response.tx(loc:res),24)
  write(sec.rep.store("d"),21692)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(24),1)
  write(cl_chans.spec.sent({tx:24,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:24,bd:{knd:write,ky:"d",vl:21692}}})
{
  write(mid_spec.acked(24),1)
}
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:25,bd:{knd:write,ky:"qh",vl:35856}}})
{
  write(mid_spec.queue.tail,12)
  write(ref.rep.store("qh"),35856)
  write(ref.txres(25),{vl:0})
  write(ref.committed(25),1)
  write(mid_spec.solution.pending.tail,12)
  write(response.tx(loc:res),25)
  write(sec.rep.store("qh"),35856)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(25),1)
  write(cl_chans.spec.sent({tx:25,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:25,bd:{knd:write,ky:"qh",vl:35856}}})
{
  write(mid_spec.acked(25),1)
}
}
> cl_chans.recv(1,{tx:24,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:24,bd:{vl:0}},1),0)
}
> cl.client_request(1,{knd:read,ky:"d",vl:7518},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(27),{knd:read,ky:"d",vl:7518})
  write(ref.next,28)
  write(mid_spec.req_dest(27),sec)
  write(request.tx(req_msg.req(loc:m)),27)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:7518})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:27,bd:{knd:read,ky:"d",vl:7518}}}),1)
}
> ser.serialize(19)
{
  write(ser.serialized(19),1)
  write(mid_spec.solution.pending.contents(12),19)
  write(mid_spec.solution.pending.head,13)
  write(mid_spec.queue.contents(12),19)
  write(mid_spec.queue.head,13)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:19,bd:{knd:write,ky:"qh",vl:50629}}})
{
  write(mid_spec.queue.tail,13)
  write(ref.rep.store("qh"),50629)
  write(ref.txres(19),{vl:0})
  write(ref.committed(19),1)
  write(mid_spec.solution.pending.tail,13)
  write(response.tx(loc:res),19)
  write(sec.rep.store("qh"),50629)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(19),1)
  write(cl_chans.spec.sent({tx:19,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:19,bd:{knd:write,ky:"qh",vl:50629}}})
{
  write(mid_spec.acked(19),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:25,bd:{knd:write,ky:"qh",vl:35856}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:25,bd:{knd:write,ky:"qh",vl:35856}}}),0)
}
test_completed
  write(ref.next,0)
  write(sec.failed,0)
  write(mid_spec.queue.head,0)
  write(mid_spec.queue.tail,0)
  write(mid_spec.sec_failed,0)
  write(mid_spec.solution.pending.head,0)
  write(mid_spec.solution.pending.tail,0)
> cl.client_request(1,{knd:write,ky:"d",vl:15719},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(0),{knd:write,ky:"d",vl:15719})
  write(ref.next,1)
  write(mid_spec.req_dest(0),prim)
  write(request.tx(req_msg.req(loc:m)),0)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:15719})
}
> ser.serialize(0)
{
  write(ser.serialized(0),1)
  write(mid_spec.solution.pending.contents(0),0)
  write(mid_spec.solution.pending.head,1)
  write(mid_spec.queue.contents(0),0)
  write(mid_spec.queue.head,1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:0,bd:{knd:write,ky:"d",vl:15719}}})
{
  write(mid_spec.queue.tail,1)
  write(ref.rep.store("d"),15719)
  write(ref.txres(0),{vl:0})
  write(ref.committed(0),1)
  write(mid_spec.solution.pending.tail,1)
  write(response.tx(loc:res),0)
  write(sec.rep.store("d"),15719)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(0),1)
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:0,bd:{knd:write,ky:"d",vl:15719}}})
{
  write(mid_spec.acked(0),1)
}
}
> cl_chans.recv(1,{tx:0,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:53605},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(1),{knd:read,ky:"qh",vl:53605})
  write(ref.next,2)
  write(mid_spec.req_dest(1),sec)
  write(request.tx(req_msg.req(loc:m)),1)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:53605})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:1,bd:{knd:read,ky:"qh",vl:53605}}}),1)
}
> cl.client_request(0,{knd:write,ky:"d",vl:1333},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(2),{knd:write,ky:"d",vl:1333})
  write(ref.next,3)
  write(mid_spec.req_dest(2),prim)
  write(request.tx(req_msg.req(loc:m)),2)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:1333})
}
> sec.req_chan.recv({cid:0,req:{tx:1,bd:{knd:read,ky:"qh",vl:53605}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:1,bd:{knd:read,ky:"qh",vl:53605}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(1),{vl:0})
  write(ref.committed(1),1)
  write(response.tx(loc:res),1)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(1),1)
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),1)
}
> ser.serialize(2)
{
  write(ser.serialized(2),1)
  write(mid_spec.solution.pending.contents(1),2)
  write(mid_spec.solution.pending.head,2)
  write(mid_spec.queue.contents(1),2)
  write(mid_spec.queue.head,2)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:2,bd:{knd:write,ky:"d",vl:1333}}})
{
  write(mid_spec.queue.tail,2)
  write(ref.rep.store("d"),1333)
  write(ref.txres(2),{vl:0})
  write(ref.committed(2),1)
  write(mid_spec.solution.pending.tail,2)
  write(response.tx(loc:res),2)
  write(sec.rep.store("d"),1333)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(2),1)
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:2,bd:{knd:write,ky:"d",vl:1333}}})
{
  write(mid_spec.acked(2),1)
}
}
> cl_chans.recv(0,{tx:2,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:39597},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(3),{knd:read,ky:"d",vl:39597})
  write(ref.next,4)
  write(mid_spec.req_dest(3),prim)
  write(request.tx(req_msg.req(loc:m)),3)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:39597})
}
> cl_chans.recv(0,{tx:1,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:27850},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(4),{knd:write,ky:"d",vl:27850})
  write(ref.next,5)
  write(mid_spec.req_dest(4),prim)
  write(request.tx(req_msg.req(loc:m)),4)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:27850})
}
> ser.serialize(4)
{
  write(ser.serialized(4),1)
  write(mid_spec.solution.pending.contents(2),4)
  write(mid_spec.solution.pending.head,3)
  write(mid_spec.queue.contents(2),4)
  write(mid_spec.queue.head,3)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:6784},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(5),{knd:read,ky:"qh",vl:6784})
  write(ref.next,6)
  write(mid_spec.req_dest(5),prim)
  write(request.tx(req_msg.req(loc:m)),5)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:6784})
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:4,bd:{knd:write,ky:"d",vl:27850}}})
{
  write(mid_spec.queue.tail,3)
  write(ref.rep.store("d"),27850)
  write(ref.txres(4),{vl:0})
  write(ref.committed(4),1)
  write(mid_spec.solution.pending.tail,3)
  write(response.tx(loc:res),4)
  write(sec.rep.store("d"),27850)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(4),1)
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:4,bd:{knd:write,ky:"d",vl:27850}}})
{
  write(mid_spec.acked(4),1)
}
}
> ref.commit(5,prim)
{
  write(response_body.vl(fml:out),0)
  write(ref.txres(5),{vl:0})
  write(ref.committed(5),1)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:61116},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(6),{knd:read,ky:"qh",vl:61116})
  write(ref.next,7)
  write(mid_spec.req_dest(6),prim)
  write(request.tx(req_msg.req(loc:m)),6)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:61116})
}
> ref.commit(3,prim)
{
  write(response_body.vl(fml:out),27850)
  write(ref.txres(3),{vl:27850})
  write(ref.committed(3),1)
}
> ref.commit(6,prim)
{
  write(response_body.vl(fml:out),0)
  write(ref.txres(6),{vl:0})
  write(ref.committed(6),1)
}
> cl_chans.send(1,{tx:3,bd:{vl:27850}})
{
  write(service_spec.responded(3),1)
  write(cl_chans.spec.sent({tx:3,bd:{vl:27850}},1),1)
}
> cl_chans.send(0,{tx:5,bd:{vl:0}})
{
  write(service_spec.responded(5),1)
  write(cl_chans.spec.sent({tx:5,bd:{vl:0}},0),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:36660},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(7),{knd:write,ky:"d",vl:36660})
  write(ref.next,8)
  write(mid_spec.req_dest(7),prim)
  write(request.tx(req_msg.req(loc:m)),7)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:36660})
}
> ser.serialize(7)
{
  write(ser.serialized(7),1)
  write(mid_spec.solution.pending.contents(3),7)
  write(mid_spec.solution.pending.head,4)
  write(mid_spec.queue.contents(3),7)
  write(mid_spec.queue.head,4)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:7,bd:{knd:write,ky:"d",vl:36660}}})
{
  write(mid_spec.queue.tail,4)
  write(ref.rep.store("d"),36660)
  write(ref.txres(7),{vl:0})
  write(ref.committed(7),1)
  write(mid_spec.solution.pending.tail,4)
  write(response.tx(loc:res),7)
  write(sec.rep.store("d"),36660)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(7),1)
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:7,bd:{knd:write,ky:"d",vl:36660}}})
{
  write(mid_spec.acked(7),1)
}
}
> cl.client_request(0,{knd:read,ky:"qh",vl:38304},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(8),{knd:read,ky:"qh",vl:38304})
  write(ref.next,9)
  write(mid_spec.req_dest(8),prim)
  write(request.tx(req_msg.req(loc:m)),8)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:38304})
}
> cl.client_request(1,{knd:write,ky:"d",vl:11279},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(9),{knd:write,ky:"d",vl:11279})
  write(ref.next,10)
  write(mid_spec.req_dest(9),sec)
  write(request.tx(req_msg.req(loc:m)),9)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:11279})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:9,bd:{knd:write,ky:"d",vl:11279}}}),1)
}
> cl_chans.send(1,{tx:6,bd:{vl:0}})
{
  write(service_spec.responded(6),1)
  write(cl_chans.spec.sent({tx:6,bd:{vl:0}},1),1)
}
> ref.commit(8,prim)
{
  write(response_body.vl(fml:out),0)
  write(ref.txres(8),{vl:0})
  write(ref.committed(8),1)
}
> cl_chans.recv(1,{tx:3,bd:{vl:27850}})
{
  write(cl_chans.spec.sent({tx:3,bd:{vl:27850}},1),0)
}
> cl_chans.recv(1,{tx:6,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:6,bd:{vl:0}},1),0)
}
> sec.req_chan.recv({cid:1,req:{tx:9,bd:{knd:write,ky:"d",vl:11279}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:9,bd:{knd:write,ky:"d",vl:11279}}}),0)
}
> ser.serialize(9)
{
  write(ser.serialized(9),1)
  write(mid_spec.solution.pending.contents(4),9)
  write(mid_spec.solution.pending.head,5)
  write(mid_spec.queue.contents(4),9)
  write(mid_spec.queue.head,5)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:9,bd:{knd:write,ky:"d",vl:11279}}})
{
  write(mid_spec.queue.tail,5)
  write(ref.rep.store("d"),11279)
  write(ref.txres(9),{vl:0})
  write(ref.committed(9),1)
  write(mid_spec.solution.pending.tail,5)
  write(response.tx(loc:res),9)
  write(sec.rep.store("d"),11279)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(9),1)
  write(cl_chans.spec.sent({tx:9,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:9,bd:{knd:write,ky:"d",vl:11279}}})
{
  write(mid_spec.acked(9),1)
}
}
> cl.client_request(0,{knd:read,ky:"d",vl:62931},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(10),{knd:read,ky:"d",vl:62931})
  write(ref.next,11)
  write(mid_spec.req_dest(10),prim)
  write(request.tx(req_msg.req(loc:m)),10)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:62931})
}
> ref.commit(10,prim)
{
  write(response_body.vl(fml:out),11279)
  write(ref.txres(10),{vl:11279})
  write(ref.committed(10),1)
}
> cl_chans.recv(0,{tx:9,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:9,bd:{vl:0}},0),0)
}
> cl_chans.send(0,{tx:8,bd:{vl:0}})
{
  write(service_spec.responded(8),1)
  write(cl_chans.spec.sent({tx:8,bd:{vl:0}},0),1)
}
> cl_chans.send(0,{tx:10,bd:{vl:11279}})
{
  write(service_spec.responded(10),1)
  write(cl_chans.spec.sent({tx:10,bd:{vl:11279}},0),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:1429},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(11),{knd:read,ky:"d",vl:1429})
  write(ref.next,12)
  write(mid_spec.req_dest(11),sec)
  write(request.tx(req_msg.req(loc:m)),11)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:1429})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:11,bd:{knd:read,ky:"d",vl:1429}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:11,bd:{knd:read,ky:"d",vl:1429}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:11,bd:{knd:read,ky:"d",vl:1429}}}),0)
  write(response_body.vl(fml:out),11279)
  write(ref.txres(11),{vl:11279})
  write(ref.committed(11),1)
  write(response.tx(loc:res),11)
  write(response_body.vl(fml:out),11279)
  write(response.bd(loc:res),{vl:11279})
  write(service_spec.responded(11),1)
  write(cl_chans.spec.sent({tx:11,bd:{vl:11279}},0),1)
}
> cl_chans.recv(0,{tx:10,bd:{vl:11279}})
{
  write(cl_chans.spec.sent({tx:10,bd:{vl:11279}},0),0)
}
> cl_chans.recv(0,{tx:11,bd:{vl:11279}})
{
  write(cl_chans.spec.sent({tx:11,bd:{vl:11279}},0),0)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:9987},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(12),{knd:write,ky:"qh",vl:9987})
  write(ref.next,13)
  write(mid_spec.req_dest(12),sec)
  write(request.tx(req_msg.req(loc:m)),12)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:9987})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:12,bd:{knd:write,ky:"qh",vl:9987}}}),1)
}
> ser.serialize(12)
{
  write(ser.serialized(12),1)
  write(mid_spec.solution.pending.contents(5),12)
  write(mid_spec.solution.pending.head,6)
  write(mid_spec.queue.contents(5),12)
  write(mid_spec.queue.head,6)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:12,bd:{knd:write,ky:"qh",vl:9987}}})
{
  write(mid_spec.queue.tail,6)
  write(ref.rep.store("qh"),9987)
  write(ref.txres(12),{vl:0})
  write(ref.committed(12),1)
  write(mid_spec.solution.pending.tail,6)
  write(response.tx(loc:res),12)
  write(sec.rep.store("qh"),9987)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(12),1)
  write(cl_chans.spec.sent({tx:12,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:12,bd:{knd:write,ky:"qh",vl:9987}}})
{
  write(mid_spec.acked(12),1)
}
}
> cl.client_request(0,{knd:write,ky:"qh",vl:54610},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(13),{knd:write,ky:"qh",vl:54610})
  write(ref.next,14)
  write(mid_spec.req_dest(13),sec)
  write(request.tx(req_msg.req(loc:m)),13)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:54610})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:13,bd:{knd:write,ky:"qh",vl:54610}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:13,bd:{knd:write,ky:"qh",vl:54610}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:13,bd:{knd:write,ky:"qh",vl:54610}}}),0)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:16464},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(14),{knd:read,ky:"qh",vl:16464})
  write(ref.next,15)
  write(mid_spec.req_dest(14),prim)
  write(request.tx(req_msg.req(loc:m)),14)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:16464})
}
> cl.client_request(0,{knd:read,ky:"d",vl:43165},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(15),{knd:read,ky:"d",vl:43165})
  write(ref.next,16)
  write(mid_spec.req_dest(15),sec)
  write(request.tx(req_msg.req(loc:m)),15)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:43165})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:15,bd:{knd:read,ky:"d",vl:43165}}}),1)
}
> ref.commit(14,prim)
{
  write(response_body.vl(fml:out),9987)
  write(ref.txres(14),{vl:9987})
  write(ref.committed(14),1)
}
> ser.serialize(13)
{
  write(ser.serialized(13),1)
  write(mid_spec.solution.pending.contents(6),13)
  write(mid_spec.solution.pending.head,7)
  write(mid_spec.queue.contents(6),13)
  write(mid_spec.queue.head,7)
}
> sec.req_chan.recv({cid:0,req:{tx:15,bd:{knd:read,ky:"d",vl:43165}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:15,bd:{knd:read,ky:"d",vl:43165}}}),0)
  write(response_body.vl(fml:out),11279)
  write(ref.txres(15),{vl:11279})
  write(ref.committed(15),1)
  write(response.tx(loc:res),15)
  write(response_body.vl(fml:out),11279)
  write(response.bd(loc:res),{vl:11279})
  write(service_spec.responded(15),1)
  write(cl_chans.spec.sent({tx:15,bd:{vl:11279}},0),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:13,bd:{knd:write,ky:"qh",vl:54610}}})
{
  write(mid_spec.queue.tail,7)
  write(ref.rep.store("qh"),54610)
  write(ref.txres(13),{vl:0})
  write(ref.committed(13),1)
  write(mid_spec.solution.pending.tail,7)
  write(response.tx(loc:res),13)
  write(sec.rep.store("qh"),54610)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(13),1)
  write(cl_chans.spec.sent({tx:13,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:13,bd:{knd:write,ky:"qh",vl:54610}}})
{
  write(mid_spec.acked(13),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:12,bd:{knd:write,ky:"qh",vl:9987}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:12,bd:{knd:write,ky:"qh",vl:9987}}}),0)
}
> cl_chans.send(1,{tx:14,bd:{vl:9987}})
{
  write(service_spec.responded(14),1)
  write(cl_chans.spec.sent({tx:14,bd:{vl:9987}},1),1)
}
> cl_chans.recv(1,{tx:14,bd:{vl:9987}})
{
  write(cl_chans.spec.sent({tx:14,bd:{vl:9987}},1),0)
}
> cl.client_request(1,{knd:read,ky:"d",vl:8468},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(16),{knd:read,ky:"d",vl:8468})
  write(ref.next,17)
  write(mid_spec.req_dest(16),sec)
  write(request.tx(req_msg.req(loc:m)),16)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:8468})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:16,bd:{knd:read,ky:"d",vl:8468}}}),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:65497},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(17),{knd:read,ky:"qh",vl:65497})
  write(ref.next,18)
  write(mid_spec.req_dest(17),prim)
  write(request.tx(req_msg.req(loc:m)),17)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:65497})
}
> cl_chans.recv(0,{tx:15,bd:{vl:11279}})
{
  write(cl_chans.spec.sent({tx:15,bd:{vl:11279}},0),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:21407},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(18),{knd:write,ky:"d",vl:21407})
  write(ref.next,19)
  write(mid_spec.req_dest(18),prim)
  write(request.tx(req_msg.req(loc:m)),18)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:21407})
}
> cl.client_request(0,{knd:read,ky:"qh",vl:62307},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(19),{knd:read,ky:"qh",vl:62307})
  write(ref.next,20)
  write(mid_spec.req_dest(19),sec)
  write(request.tx(req_msg.req(loc:m)),19)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:62307})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:62307}}}),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:23925},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(20),{knd:write,ky:"d",vl:23925})
  write(ref.next,21)
  write(mid_spec.req_dest(20),prim)
  write(request.tx(req_msg.req(loc:m)),20)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:23925})
}
> ser.serialize(18)
{
  write(ser.serialized(18),1)
  write(mid_spec.solution.pending.contents(7),18)
  write(mid_spec.solution.pending.head,8)
  write(mid_spec.queue.contents(7),18)
  write(mid_spec.queue.head,8)
}
> sec.req_chan.recv({cid:1,req:{tx:16,bd:{knd:read,ky:"d",vl:8468}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:16,bd:{knd:read,ky:"d",vl:8468}}}),0)
  write(response_body.vl(fml:out),11279)
  write(ref.txres(16),{vl:11279})
  write(ref.committed(16),1)
  write(response.tx(loc:res),16)
  write(response_body.vl(fml:out),11279)
  write(response.bd(loc:res),{vl:11279})
  write(service_spec.responded(16),1)
  write(cl_chans.spec.sent({tx:16,bd:{vl:11279}},1),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:18,bd:{knd:write,ky:"d",vl:21407}}})
{
  write(mid_spec.queue.tail,8)
  write(ref.rep.store("d"),21407)
  write(ref.txres(18),{vl:0})
  write(ref.committed(18),1)
  write(mid_spec.solution.pending.tail,8)
  write(response.tx(loc:res),18)
  write(sec.rep.store("d"),21407)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(18),1)
  write(cl_chans.spec.sent({tx:18,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:18,bd:{knd:write,ky:"d",vl:21407}}})
{
  write(mid_spec.acked(18),1)
}
}
> sec.req_chan.recv({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:62307}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:62307}}}),0)
  write(response_body.vl(fml:out),54610)
  write(ref.txres(19),{vl:54610})
  write(ref.committed(19),1)
  write(response.tx(loc:res),19)
  write(response_body.vl(fml:out),54610)
  write(response.bd(loc:res),{vl:54610})
  write(service_spec.responded(19),1)
  write(cl_chans.spec.sent({tx:19,bd:{vl:54610}},0),1)
}
> ser.serialize(20)
{
  write(ser.serialized(20),1)
  write(mid_spec.solution.pending.contents(8),20)
  write(mid_spec.solution.pending.head,9)
  write(mid_spec.queue.contents(8),20)
  write(mid_spec.queue.head,9)
}
> cl_chans.recv(1,{tx:7,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},1),0)
}
> cl.client_request(1,{knd:read,ky:"d",vl:26568},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(21),{knd:read,ky:"d",vl:26568})
  write(ref.next,22)
  write(mid_spec.req_dest(21),prim)
  write(request.tx(req_msg.req(loc:m)),21)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:26568})
}
> ref.commit(21,prim)
{
  write(response_body.vl(fml:out),21407)
  write(ref.txres(21),{vl:21407})
  write(ref.committed(21),1)
}
> cl_chans.recv(1,{tx:13,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:13,bd:{vl:0}},1),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:17908},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(22),{knd:read,ky:"d",vl:17908})
  write(ref.next,23)
  write(mid_spec.req_dest(22),sec)
  write(request.tx(req_msg.req(loc:m)),22)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:17908})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:22,bd:{knd:read,ky:"d",vl:17908}}}),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:23925}}})
{
  write(mid_spec.queue.tail,9)
  write(ref.rep.store("d"),23925)
  write(ref.txres(20),{vl:0})
  write(ref.committed(20),1)
  write(mid_spec.solution.pending.tail,9)
  write(response.tx(loc:res),20)
  write(sec.rep.store("d"),23925)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(20),1)
  write(cl_chans.spec.sent({tx:20,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:23925}}})
{
  write(mid_spec.acked(20),1)
}
}
> ref.commit(17,prim)
{
  write(response_body.vl(fml:out),54610)
  write(ref.txres(17),{vl:54610})
  write(ref.committed(17),1)
}
> sec.req_chan.recv({cid:0,req:{tx:22,bd:{knd:read,ky:"d",vl:17908}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:22,bd:{knd:read,ky:"d",vl:17908}}}),0)
  write(response_body.vl(fml:out),23925)
  write(ref.txres(22),{vl:23925})
  write(ref.committed(22),1)
  write(response.tx(loc:res),22)
  write(response_body.vl(fml:out),23925)
  write(response.bd(loc:res),{vl:23925})
  write(service_spec.responded(22),1)
  write(cl_chans.spec.sent({tx:22,bd:{vl:23925}},0),1)
}
> cl_chans.recv(0,{tx:22,bd:{vl:23925}})
{
  write(cl_chans.spec.sent({tx:22,bd:{vl:23925}},0),0)
}
> cl_chans.recv(1,{tx:16,bd:{vl:11279}})
{
  write(cl_chans.spec.sent({tx:16,bd:{vl:11279}},1),0)
}
> cl_chans.send(0,{tx:17,bd:{vl:54610}})
{
  write(service_spec.responded(17),1)
  write(cl_chans.spec.sent({tx:17,bd:{vl:54610}},0),1)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:2921},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(23),{knd:read,ky:"qh",vl:2921})
  write(ref.next,24)
  write(mid_spec.req_dest(23),prim)
  write(request.tx(req_msg.req(loc:m)),23)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:2921})
}
> cl.client_request(0,{knd:write,ky:"qh",vl:8822},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(24),{knd:write,ky:"qh",vl:8822})
  write(ref.next,25)
  write(mid_spec.req_dest(24),prim)
  write(request.tx(req_msg.req(loc:m)),24)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:8822})
}
> cl.client_request(1,{knd:write,ky:"qh",vl:45739},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(25),{knd:write,ky:"qh",vl:45739})
  write(ref.next,26)
  write(mid_spec.req_dest(25),sec)
  write(request.tx(req_msg.req(loc:m)),25)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:45739})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:25,bd:{knd:write,ky:"qh",vl:45739}}}),1)
}
> cl_chans.recv(1,{tx:20,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:20,bd:{vl:0}},1),0)
}
> cl_chans.recv(0,{tx:19,bd:{vl:54610}})
{
  write(cl_chans.spec.sent({tx:19,bd:{vl:54610}},0),0)
}
> cl_chans.send(1,{tx:21,bd:{vl:21407}})
{
  write(service_spec.responded(21),1)
  write(cl_chans.spec.sent({tx:21,bd:{vl:21407}},1),1)
}
> sec.req_chan.recv({cid:1,req:{tx:25,bd:{knd:write,ky:"qh",vl:45739}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:25,bd:{knd:write,ky:"qh",vl:45739}}}),0)
}
> ref.commit(23,prim)
{
  write(response_body.vl(fml:out),54610)
  write(ref.txres(23),{vl:54610})
  write(ref.committed(23),1)
}
> cl_chans.send(1,{tx:23,bd:{vl:54610}})
{
  write(service_spec.responded(23),1)
  write(cl_chans.spec.sent({tx:23,bd:{vl:54610}},1),1)
}
> cl_chans.recv(0,{tx:5,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:5,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:31484},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(26),{knd:write,ky:"qh",vl:31484})
  write(ref.next,27)
  write(mid_spec.req_dest(26),sec)
  write(request.tx(req_msg.req(loc:m)),26)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:31484})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:26,bd:{knd:write,ky:"qh",vl:31484}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:26,bd:{knd:write,ky:"qh",vl:31484}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:26,bd:{knd:write,ky:"qh",vl:31484}}}),0)
}
> ser.serialize(26)
{
  write(ser.serialized(26),1)
  write(mid_spec.solution.pending.contents(9),26)
  write(mid_spec.solution.pending.head,10)
  write(mid_spec.queue.contents(9),26)
  write(mid_spec.queue.head,10)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:26,bd:{knd:write,ky:"qh",vl:31484}}})
{
  write(mid_spec.queue.tail,10)
  write(ref.rep.store("qh"),31484)
  write(ref.txres(26),{vl:0})
  write(ref.committed(26),1)
  write(mid_spec.solution.pending.tail,10)
  write(response.tx(loc:res),26)
  write(sec.rep.store("qh"),31484)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(26),1)
  write(cl_chans.spec.sent({tx:26,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:26,bd:{knd:write,ky:"qh",vl:31484}}})
{
  write(mid_spec.acked(26),1)
}
}
> ser.serialize(25)
{
  write(ser.serialized(25),1)
  write(mid_spec.solution.pending.contents(10),25)
  write(mid_spec.solution.pending.head,11)
  write(mid_spec.queue.contents(10),25)
  write(mid_spec.queue.head,11)
}
> ser.serialize(24)
{
  write(ser.serialized(24),1)
  write(mid_spec.solution.pending.contents(11),24)
  write(mid_spec.solution.pending.head,12)
  write(mid_spec.queue.contents(11),24)
  write(mid_spec.queue.head,12)
}
> cl_chans.recv(1,{tx:23,bd:{vl:54610}})
{
  write(cl_chans.spec.sent({tx:23,bd:{vl:54610}},1),0)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:5022},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(27),{knd:write,ky:"qh",vl:5022})
  write(ref.next,28)
  write(mid_spec.req_dest(27),prim)
  write(request.tx(req_msg.req(loc:m)),27)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:5022})
}
> ser.serialize(27)
{
  write(ser.serialized(27),1)
  write(mid_spec.solution.pending.contents(12),27)
  write(mid_spec.solution.pending.head,13)
  write(mid_spec.queue.contents(12),27)
  write(mid_spec.queue.head,13)
}
> cl.client_request(0,{knd:write,ky:"d",vl:47733},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(28),{knd:write,ky:"d",vl:47733})
  write(ref.next,29)
  write(mid_spec.req_dest(28),prim)
  write(request.tx(req_msg.req(loc:m)),28)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:47733})
}
> cl.client_request(0,{knd:read,ky:"qh",vl:25667},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(29),{knd:read,ky:"qh",vl:25667})
  write(ref.next,30)
  write(mid_spec.req_dest(29),sec)
  write(request.tx(req_msg.req(loc:m)),29)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:25667})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:29,bd:{knd:read,ky:"qh",vl:25667}}}),1)
}
test_completed
  write(ref.next,0)
  write(sec.failed,0)
  write(mid_spec.queue.head,0)
  write(mid_spec.queue.tail,0)
  write(mid_spec.sec_failed,0)
  write(mid_spec.solution.pending.head,0)
  write(mid_spec.solution.pending.tail,0)
> cl.client_request(1,{knd:read,ky:"qh",vl:57339},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(0),{knd:read,ky:"qh",vl:57339})
  write(ref.next,1)
  write(mid_spec.req_dest(0),prim)
  write(request.tx(req_msg.req(loc:m)),0)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:57339})
}
> cl.client_request(1,{knd:read,ky:"qh",vl:39694},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(1),{knd:read,ky:"qh",vl:39694})
  write(ref.next,2)
  write(mid_spec.req_dest(1),sec)
  write(request.tx(req_msg.req(loc:m)),1)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:39694})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:1,bd:{knd:read,ky:"qh",vl:39694}}}),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:2534},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(2),{knd:write,ky:"qh",vl:2534})
  write(ref.next,3)
  write(mid_spec.req_dest(2),sec)
  write(request.tx(req_msg.req(loc:m)),2)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:2534})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:2,bd:{knd:write,ky:"qh",vl:2534}}}),1)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:34509},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(3),{knd:write,ky:"qh",vl:34509})
  write(ref.next,4)
  write(mid_spec.req_dest(3),sec)
  write(request.tx(req_msg.req(loc:m)),3)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:34509})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:3,bd:{knd:write,ky:"qh",vl:34509}}}),1)
}
> ref.commit(0,prim)
{
  write(response_body.vl(fml:out),0)
  write(ref.txres(0),{vl:0})
  write(ref.committed(0),1)
}
> sec.req_chan.recv({cid:1,req:{tx:1,bd:{knd:read,ky:"qh",vl:39694}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:1,bd:{knd:read,ky:"qh",vl:39694}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(1),{vl:0})
  write(ref.committed(1),1)
  write(response.tx(loc:res),1)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(1),1)
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},1),1)
}
> sec.req_chan.recv({cid:0,req:{tx:3,bd:{knd:write,ky:"qh",vl:34509}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:3,bd:{knd:write,ky:"qh",vl:34509}}}),0)
}
> cl_chans.recv(1,{tx:1,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},1),0)
}
> cl_chans.send(0,{tx:0,bd:{vl:0}})
{
  write(service_spec.responded(0),1)
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},0),1)
}
> sec.req_chan.recv({cid:0,req:{tx:2,bd:{knd:write,ky:"qh",vl:2534}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:2,bd:{knd:write,ky:"qh",vl:2534}}}),0)
}
> cl_chans.recv(0,{tx:0,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},0),0)
}
> ser.serialize(3)
{
  write(ser.serialized(3),1)
  write(mid_spec.solution.pending.contents(0),3)
  write(mid_spec.solution.pending.head,1)
  write(mid_spec.queue.contents(0),3)
  write(mid_spec.queue.head,1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:3440},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(4),{knd:write,ky:"d",vl:3440})
  write(ref.next,5)
  write(mid_spec.req_dest(4),prim)
  write(request.tx(req_msg.req(loc:m)),4)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:3440})
}
> cl.client_request(1,{knd:write,ky:"qh",vl:4591},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(5),{knd:write,ky:"qh",vl:4591})
  write(ref.next,6)
  write(mid_spec.req_dest(5),prim)
  write(request.tx(req_msg.req(loc:m)),5)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:4591})
}
> cl.client_request(0,{knd:write,ky:"d",vl:11109},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(6),{knd:write,ky:"d",vl:11109})
  write(ref.next,7)
  write(mid_spec.req_dest(6),prim)
  write(request.tx(req_msg.req(loc:m)),6)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:11109})
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:3,bd:{knd:write,ky:"qh",vl:34509}}})
{
  write(mid_spec.queue.tail,1)
  write(ref.rep.store("qh"),34509)
  write(ref.txres(3),{vl:0})
  write(ref.committed(3),1)
  write(mid_spec.solution.pending.tail,1)
  write(response.tx(loc:res),3)
  write(sec.rep.store("qh"),34509)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(3),1)
  write(cl_chans.spec.sent({tx:3,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:3,bd:{knd:write,ky:"qh",vl:34509}}})
{
  write(mid_spec.acked(3),1)
}
}
> cl_chans.recv(0,{tx:3,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:3,bd:{vl:0}},0),0)
}
> ser.serialize(6)
{
  write(ser.serialized(6),1)
  write(mid_spec.solution.pending.contents(1),6)
  write(mid_spec.solution.pending.head,2)
  write(mid_spec.queue.contents(1),6)
  write(mid_spec.queue.head,2)
}
> cl.client_request(0,{knd:write,ky:"d",vl:29034},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(7),{knd:write,ky:"d",vl:29034})
  write(ref.next,8)
  write(mid_spec.req_dest(7),prim)
  write(request.tx(req_msg.req(loc:m)),7)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:29034})
}
> cl.client_request(1,{knd:read,ky:"qh",vl:22117},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(8),{knd:read,ky:"qh",vl:22117})
  write(ref.next,9)
  write(mid_spec.req_dest(8),sec)
  write(request.tx(req_msg.req(loc:m)),8)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:22117})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:8,bd:{knd:read,ky:"qh",vl:22117}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:8,bd:{knd:read,ky:"qh",vl:22117}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:8,bd:{knd:read,ky:"qh",vl:22117}}}),0)
  write(response_body.vl(fml:out),34509)
  write(ref.txres(8),{vl:34509})
  write(ref.committed(8),1)
  write(response.tx(loc:res),8)
  write(response_body.vl(fml:out),34509)
  write(response.bd(loc:res),{vl:34509})
  write(service_spec.responded(8),1)
  write(cl_chans.spec.sent({tx:8,bd:{vl:34509}},1),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:6,bd:{knd:write,ky:"d",vl:11109}}})
{
  write(mid_spec.queue.tail,2)
  write(ref.rep.store("d"),11109)
  write(ref.txres(6),{vl:0})
  write(ref.committed(6),1)
  write(mid_spec.solution.pending.tail,2)
  write(response.tx(loc:res),6)
  write(sec.rep.store("d"),11109)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(6),1)
  write(cl_chans.spec.sent({tx:6,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:6,bd:{knd:write,ky:"d",vl:11109}}})
{
  write(mid_spec.acked(6),1)
}
}
> cl.client_request(1,{knd:read,ky:"qh",vl:44912},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(9),{knd:read,ky:"qh",vl:44912})
  write(ref.next,10)
  write(mid_spec.req_dest(9),prim)
  write(request.tx(req_msg.req(loc:m)),9)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:44912})
}
> ser.serialize(7)
{
  write(ser.serialized(7),1)
  write(mid_spec.solution.pending.contents(2),7)
  write(mid_spec.solution.pending.head,3)
  write(mid_spec.queue.contents(2),7)
  write(mid_spec.queue.head,3)
}
> ser.serialize(5)
{
  write(ser.serialized(5),1)
  write(mid_spec.solution.pending.contents(3),5)
  write(mid_spec.solution.pending.head,4)
  write(mid_spec.queue.contents(3),5)
  write(mid_spec.queue.head,4)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:7,bd:{knd:write,ky:"d",vl:29034}}})
{
  write(mid_spec.queue.tail,3)
  write(ref.rep.store("d"),29034)
  write(ref.txres(7),{vl:0})
  write(ref.committed(7),1)
  write(mid_spec.solution.pending.tail,3)
  write(response.tx(loc:res),7)
  write(sec.rep.store("d"),29034)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(7),1)
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:7,bd:{knd:write,ky:"d",vl:29034}}})
{
  write(mid_spec.acked(7),1)
}
}
> cl.client_request(0,{knd:read,ky:"d",vl:35666},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(10),{knd:read,ky:"d",vl:35666})
  write(ref.next,11)
  write(mid_spec.req_dest(10),sec)
  write(request.tx(req_msg.req(loc:m)),10)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:35666})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:10,bd:{knd:read,ky:"d",vl:35666}}}),1)
}
> cl_chans.recv(1,{tx:8,bd:{vl:34509}})
{
  write(cl_chans.spec.sent({tx:8,bd:{vl:34509}},1),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:5,bd:{knd:write,ky:"qh",vl:4591}}})
{
  write(mid_spec.queue.tail,4)
  write(ref.rep.store("qh"),4591)
  write(ref.txres(5),{vl:0})
  write(ref.committed(5),1)
  write(mid_spec.solution.pending.tail,4)
  write(response.tx(loc:res),5)
  write(sec.rep.store("qh"),4591)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(5),1)
  write(cl_chans.spec.sent({tx:5,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:5,bd:{knd:write,ky:"qh",vl:4591}}})
{
  write(mid_spec.acked(5),1)
}
}
> ref.commit(9,prim)
{
  write(response_body.vl(fml:out),4591)
  write(ref.txres(9),{vl:4591})
  write(ref.committed(9),1)
}
> ser.serialize(4)
{
  write(ser.serialized(4),1)
  write(mid_spec.solution.pending.contents(4),4)
  write(mid_spec.solution.pending.head,5)
  write(mid_spec.queue.contents(4),4)
  write(mid_spec.queue.head,5)
}
> sec.req_chan.recv({cid:0,req:{tx:10,bd:{knd:read,ky:"d",vl:35666}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:10,bd:{knd:read,ky:"d",vl:35666}}}),0)
  write(response_body.vl(fml:out),29034)
  write(ref.txres(10),{vl:29034})
  write(ref.committed(10),1)
  write(response.tx(loc:res),10)
  write(response_body.vl(fml:out),29034)
  write(response.bd(loc:res),{vl:29034})
  write(service_spec.responded(10),1)
  write(cl_chans.spec.sent({tx:10,bd:{vl:29034}},0),1)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:11640},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(11),{knd:read,ky:"qh",vl:11640})
  write(ref.next,12)
  write(mid_spec.req_dest(11),sec)
  write(request.tx(req_msg.req(loc:m)),11)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:11640})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:11,bd:{knd:read,ky:"qh",vl:11640}}}),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:39703},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(12),{knd:read,ky:"d",vl:39703})
  write(ref.next,13)
  write(mid_spec.req_dest(12),sec)
  write(request.tx(req_msg.req(loc:m)),12)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:39703})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:12,bd:{knd:read,ky:"d",vl:39703}}}),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:38333},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(13),{knd:read,ky:"d",vl:38333})
  write(ref.next,14)
  write(mid_spec.req_dest(13),prim)
  write(request.tx(req_msg.req(loc:m)),13)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:38333})
}
> cl.client_request(1,{knd:write,ky:"qh",vl:61380},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(14),{knd:write,ky:"qh",vl:61380})
  write(ref.next,15)
  write(mid_spec.req_dest(14),prim)
  write(request.tx(req_msg.req(loc:m)),14)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:61380})
}
> sec.req_chan.recv({cid:0,req:{tx:12,bd:{knd:read,ky:"d",vl:39703}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:12,bd:{knd:read,ky:"d",vl:39703}}}),0)
  write(response_body.vl(fml:out),29034)
  write(ref.txres(12),{vl:29034})
  write(ref.committed(12),1)
  write(response.tx(loc:res),12)
  write(response_body.vl(fml:out),29034)
  write(response.bd(loc:res),{vl:29034})
  write(service_spec.responded(12),1)
  write(cl_chans.spec.sent({tx:12,bd:{vl:29034}},0),1)
}
> ref.commit(13,prim)
{
  write(response_body.vl(fml:out),29034)
  write(ref.txres(13),{vl:29034})
  write(ref.committed(13),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:4,bd:{knd:write,ky:"d",vl:3440}}})
{
  write(mid_spec.queue.tail,5)
  write(ref.rep.store("d"),3440)
  write(ref.txres(4),{vl:0})
  write(ref.committed(4),1)
  write(mid_spec.solution.pending.tail,5)
  write(response.tx(loc:res),4)
  write(sec.rep.store("d"),3440)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(4),1)
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:4,bd:{knd:write,ky:"d",vl:3440}}})
{
  write(mid_spec.acked(4),1)
}
}
> cl_chans.send(0,{tx:13,bd:{vl:29034}})
{
  write(service_spec.responded(13),1)
  write(cl_chans.spec.sent({tx:13,bd:{vl:29034}},0),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:15904},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(15),{knd:write,ky:"d",vl:15904})
  write(ref.next,16)
  write(mid_spec.req_dest(15),prim)
  write(request.tx(req_msg.req(loc:m)),15)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:15904})
}
> cl_chans.send(1,{tx:9,bd:{vl:4591}})
{
  write(service_spec.responded(9),1)
  write(cl_chans.spec.sent({tx:9,bd:{vl:4591}},1),1)
}
> ser.serialize(15)
{
  write(ser.serialized(15),1)
  write(mid_spec.solution.pending.contents(5),15)
  write(mid_spec.solution.pending.head,6)
  write(mid_spec.queue.contents(5),15)
  write(mid_spec.queue.head,6)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:60542},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(16),{knd:write,ky:"qh",vl:60542})
  write(ref.next,17)
  write(mid_spec.req_dest(16),prim)
  write(request.tx(req_msg.req(loc:m)),16)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:60542})
}
> cl_chans.recv(0,{tx:12,bd:{vl:29034}})
{
  write(cl_chans.spec.sent({tx:12,bd:{vl:29034}},0),0)
}
> sec.req_chan.recv({cid:1,req:{tx:11,bd:{knd:read,ky:"qh",vl:11640}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:11,bd:{knd:read,ky:"qh",vl:11640}}}),0)
  write(response_body.vl(fml:out),4591)
  write(ref.txres(11),{vl:4591})
  write(ref.committed(11),1)
  write(response.tx(loc:res),11)
  write(response_body.vl(fml:out),4591)
  write(response.bd(loc:res),{vl:4591})
  write(service_spec.responded(11),1)
  write(cl_chans.spec.sent({tx:11,bd:{vl:4591}},1),1)
}
> cl_chans.recv(1,{tx:9,bd:{vl:4591}})
{
  write(cl_chans.spec.sent({tx:9,bd:{vl:4591}},1),0)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:15,bd:{knd:write,ky:"d",vl:15904}}})
{
  write(mid_spec.queue.tail,6)
  write(ref.rep.store("d"),15904)
  write(ref.txres(15),{vl:0})
  write(ref.committed(15),1)
  write(mid_spec.solution.pending.tail,6)
  write(response.tx(loc:res),15)
  write(sec.rep.store("d"),15904)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(15),1)
  write(cl_chans.spec.sent({tx:15,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:15,bd:{knd:write,ky:"d",vl:15904}}})
{
  write(mid_spec.acked(15),1)
}
}
> cl.client_request(1,{knd:write,ky:"qh",vl:38406},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(17),{knd:write,ky:"qh",vl:38406})
  write(ref.next,18)
  write(mid_spec.req_dest(17),prim)
  write(request.tx(req_msg.req(loc:m)),17)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:38406})
}
> cl_chans.recv(0,{tx:10,bd:{vl:29034}})
{
  write(cl_chans.spec.sent({tx:10,bd:{vl:29034}},0),0)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:30949},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(18),{knd:write,ky:"qh",vl:30949})
  write(ref.next,19)
  write(mid_spec.req_dest(18),sec)
  write(request.tx(req_msg.req(loc:m)),18)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:30949})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:18,bd:{knd:write,ky:"qh",vl:30949}}}),1)
}
> ser.serialize(18)
{
  write(ser.serialized(18),1)
  write(mid_spec.solution.pending.contents(6),18)
  write(mid_spec.solution.pending.head,7)
  write(mid_spec.queue.contents(6),18)
  write(mid_spec.queue.head,7)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:18,bd:{knd:write,ky:"qh",vl:30949}}})
{
  write(mid_spec.queue.tail,7)
  write(ref.rep.store("qh"),30949)
  write(ref.txres(18),{vl:0})
  write(ref.committed(18),1)
  write(mid_spec.solution.pending.tail,7)
  write(response.tx(loc:res),18)
  write(sec.rep.store("qh"),30949)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(18),1)
  write(cl_chans.spec.sent({tx:18,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:18,bd:{knd:write,ky:"qh",vl:30949}}})
{
  write(mid_spec.acked(18),1)
}
}
> ser.serialize(17)
{
  write(ser.serialized(17),1)
  write(mid_spec.solution.pending.contents(7),17)
  write(mid_spec.solution.pending.head,8)
  write(mid_spec.queue.contents(7),17)
  write(mid_spec.queue.head,8)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:13813},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(19),{knd:write,ky:"qh",vl:13813})
  write(ref.next,20)
  write(mid_spec.req_dest(19),sec)
  write(request.tx(req_msg.req(loc:m)),19)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:13813})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:19,bd:{knd:write,ky:"qh",vl:13813}}}),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:23452},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(20),{knd:write,ky:"d",vl:23452})
  write(ref.next,21)
  write(mid_spec.req_dest(20),sec)
  write(request.tx(req_msg.req(loc:m)),20)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:23452})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:23452}}}),1)
}
> cl.client_request(0,{knd:read,ky:"d",vl:65228},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(21),{knd:read,ky:"d",vl:65228})
  write(ref.next,22)
  write(mid_spec.req_dest(21),sec)
  write(request.tx(req_msg.req(loc:m)),21)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:65228})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:read,ky:"d",vl:65228}}}),1)
}
> cl_chans.recv(1,{tx:11,bd:{vl:4591}})
{
  write(cl_chans.spec.sent({tx:11,bd:{vl:4591}},1),0)
}
> sec.req_chan.recv({cid:0,req:{tx:21,bd:{knd:read,ky:"d",vl:65228}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:read,ky:"d",vl:65228}}}),0)
  write(response_body.vl(fml:out),15904)
  write(ref.txres(21),{vl:15904})
  write(ref.committed(21),1)
  write(response.tx(loc:res),21)
  write(response_body.vl(fml:out),15904)
  write(response.bd(loc:res),{vl:15904})
  write(service_spec.responded(21),1)
  write(cl_chans.spec.sent({tx:21,bd:{vl:15904}},0),1)
}
> ser.serialize(20)
{
  write(ser.serialized(20),1)
  write(mid_spec.solution.pending.contents(8),20)
  write(mid_spec.solution.pending.head,9)
  write(mid_spec.queue.contents(8),20)
  write(mid_spec.queue.head,9)
}
> cl.client_request(0,{knd:write,ky:"qh",vl:3563},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(22),{knd:write,ky:"qh",vl:3563})
  write(ref.next,23)
  write(mid_spec.req_dest(22),prim)
  write(request.tx(req_msg.req(loc:m)),22)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:3563})
}
> cl.client_request(0,{knd:read,ky:"qh",vl:4622},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(23),{knd:read,ky:"qh",vl:4622})
  write(ref.next,24)
  write(mid_spec.req_dest(23),sec)
  write(request.tx(req_msg.req(loc:m)),23)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:4622})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:23,bd:{knd:read,ky:"qh",vl:4622}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:23452}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:23452}}}),0)
}
> ser.serialize(22)
{
  write(ser.serialized(22),1)
  write(mid_spec.solution.pending.contents(9),22)
  write(mid_spec.solution.pending.head,10)
  write(mid_spec.queue.contents(9),22)
  write(mid_spec.queue.head,10)
}
> ser.serialize(19)
{
  write(ser.serialized(19),1)
  write(mid_spec.solution.pending.contents(10),19)
  write(mid_spec.solution.pending.head,11)
  write(mid_spec.queue.contents(10),19)
  write(mid_spec.queue.head,11)
}
> sec.req_chan.recv({cid:1,req:{tx:19,bd:{knd:write,ky:"qh",vl:13813}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:19,bd:{knd:write,ky:"qh",vl:13813}}}),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:15857},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(24),{knd:write,ky:"d",vl:15857})
  write(ref.next,25)
  write(mid_spec.req_dest(24),sec)
  write(request.tx(req_msg.req(loc:m)),24)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:15857})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:24,bd:{knd:write,ky:"d",vl:15857}}}),1)
}
> cl_chans.recv(0,{tx:21,bd:{vl:15904}})
{
  write(cl_chans.spec.sent({tx:21,bd:{vl:15904}},0),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:17,bd:{knd:write,ky:"qh",vl:38406}}})
{
  write(mid_spec.queue.tail,8)
  write(ref.rep.store("qh"),38406)
  write(ref.txres(17),{vl:0})
  write(ref.committed(17),1)
  write(mid_spec.solution.pending.tail,8)
  write(response.tx(loc:res),17)
  write(sec.rep.store("qh"),38406)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(17),1)
  write(cl_chans.spec.sent({tx:17,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:17,bd:{knd:write,ky:"qh",vl:38406}}})
{
  write(mid_spec.acked(17),1)
}
}
> cl_chans.recv(0,{tx:4,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},0),0)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:20,bd:{knd:write,ky:"d",vl:23452}}})
{
  write(mid_spec.queue.tail,9)
  write(ref.rep.store("d"),23452)
  write(ref.txres(20),{vl:0})
  write(ref.committed(20),1)
  write(mid_spec.solution.pending.tail,9)
  write(response.tx(loc:res),20)
  write(sec.rep.store("d"),23452)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(20),1)
  write(cl_chans.spec.sent({tx:20,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:20,bd:{knd:write,ky:"d",vl:23452}}})
{
  write(mid_spec.acked(20),1)
}
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:22,bd:{knd:write,ky:"qh",vl:3563}}})
{
  write(mid_spec.queue.tail,10)
  write(ref.rep.store("qh"),3563)
  write(ref.txres(22),{vl:0})
  write(ref.committed(22),1)
  write(mid_spec.solution.pending.tail,10)
  write(response.tx(loc:res),22)
  write(sec.rep.store("qh"),3563)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(22),1)
  write(cl_chans.spec.sent({tx:22,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:22,bd:{knd:write,ky:"qh",vl:3563}}})
{
  write(mid_spec.acked(22),1)
}
}
> cl_chans.recv(0,{tx:13,bd:{vl:29034}})
{
  write(cl_chans.spec.sent({tx:13,bd:{vl:29034}},0),0)
}
> cl_chans.recv(1,{tx:7,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},1),0)
}
> sec.req_chan.recv({cid:0,req:{tx:18,bd:{knd:write,ky:"qh",vl:30949}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:18,bd:{knd:write,ky:"qh",vl:30949}}}),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:19,bd:{knd:write,ky:"qh",vl:13813}}})
{
  write(mid_spec.queue.tail,11)
  write(ref.rep.store("qh"),13813)
  write(ref.txres(19),{vl:0})
  write(ref.committed(19),1)
  write(mid_spec.solution.pending.tail,11)
  write(response.tx(loc:res),19)
  write(sec.rep.store("qh"),13813)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(19),1)
  write(cl_chans.spec.sent({tx:19,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:19,bd:{knd:write,ky:"qh",vl:13813}}})
{
  write(mid_spec.acked(19),1)
}
}
> cl.client_request(1,{knd:read,ky:"d",vl:29358},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(25),{knd:read,ky:"d",vl:29358})
  write(ref.next,26)
  write(mid_spec.req_dest(25),sec)
  write(request.tx(req_msg.req(loc:m)),25)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:29358})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:25,bd:{knd:read,ky:"d",vl:29358}}}),1)
}
> cl_chans.recv(0,{tx:15,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:15,bd:{vl:0}},0),0)
}
> cl.client_request(1,{knd:read,ky:"d",vl:39418},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(26),{knd:read,ky:"d",vl:39418})
  write(ref.next,27)
  write(mid_spec.req_dest(26),sec)
  write(request.tx(req_msg.req(loc:m)),26)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:39418})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:26,bd:{knd:read,ky:"d",vl:39418}}}),1)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:15399},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(27),{knd:read,ky:"qh",vl:15399})
  write(ref.next,28)
  write(mid_spec.req_dest(27),sec)
  write(request.tx(req_msg.req(loc:m)),27)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:15399})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:27,bd:{knd:read,ky:"qh",vl:15399}}}),1)
}
> cl_chans.recv(0,{tx:18,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:18,bd:{vl:0}},0),0)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:39815},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(28),{knd:write,ky:"qh",vl:39815})
  write(ref.next,29)
  write(mid_spec.req_dest(28),prim)
  write(request.tx(req_msg.req(loc:m)),28)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:39815})
}
> sec.req_chan.recv({cid:1,req:{tx:26,bd:{knd:read,ky:"d",vl:39418}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:26,bd:{knd:read,ky:"d",vl:39418}}}),0)
  write(response_body.vl(fml:out),23452)
  write(ref.txres(26),{vl:23452})
  write(ref.committed(26),1)
  write(response.tx(loc:res),26)
  write(response_body.vl(fml:out),23452)
  write(response.bd(loc:res),{vl:23452})
  write(service_spec.responded(26),1)
  write(cl_chans.spec.sent({tx:26,bd:{vl:23452}},1),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:22397},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(29),{knd:read,ky:"d",vl:22397})
  write(ref.next,30)
  write(mid_spec.req_dest(29),prim)
  write(request.tx(req_msg.req(loc:m)),29)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:22397})
}
> ref.commit(29,prim)
{
  write(response_body.vl(fml:out),23452)
  write(ref.txres(29),{vl:23452})
  write(ref.committed(29),1)
}
> ser.serialize(28)
{
  write(ser.serialized(28),1)
  write(mid_spec.solution.pending.contents(11),28)
  write(mid_spec.solution.pending.head,12)
  write(mid_spec.queue.contents(11),28)
  write(mid_spec.queue.head,12)
}
> cl_chans.recv(0,{tx:6,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:6,bd:{vl:0}},0),0)
}
> cl_chans.send(1,{tx:29,bd:{vl:23452}})
{
  write(service_spec.responded(29),1)
  write(cl_chans.spec.sent({tx:29,bd:{vl:23452}},1),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:28,bd:{knd:write,ky:"qh",vl:39815}}})
{
  write(mid_spec.queue.tail,12)
  write(ref.rep.store("qh"),39815)
  write(ref.txres(28),{vl:0})
  write(ref.committed(28),1)
  write(mid_spec.solution.pending.tail,12)
  write(response.tx(loc:res),28)
  write(sec.rep.store("qh"),39815)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(28),1)
  write(cl_chans.spec.sent({tx:28,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:28,bd:{knd:write,ky:"qh",vl:39815}}})
{
  write(mid_spec.acked(28),1)
}
}
> cl_chans.recv(0,{tx:20,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:20,bd:{vl:0}},0),0)
}
> cl_chans.recv(1,{tx:29,bd:{vl:23452}})
{
  write(cl_chans.spec.sent({tx:29,bd:{vl:23452}},1),0)
}
> ser.serialize(14)
{
  write(ser.serialized(14),1)
  write(mid_spec.solution.pending.contents(12),14)
  write(mid_spec.solution.pending.head,13)
  write(mid_spec.queue.contents(12),14)
  write(mid_spec.queue.head,13)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:14,bd:{knd:write,ky:"qh",vl:61380}}})
{
  write(mid_spec.queue.tail,13)
  write(ref.rep.store("qh"),61380)
  write(ref.txres(14),{vl:0})
  write(ref.committed(14),1)
  write(mid_spec.solution.pending.tail,13)
  write(response.tx(loc:res),14)
  write(sec.rep.store("qh"),61380)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(14),1)
  write(cl_chans.spec.sent({tx:14,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:14,bd:{knd:write,ky:"qh",vl:61380}}})
{
  write(mid_spec.acked(14),1)
}
}
> cl.client_request(0,{knd:read,ky:"d",vl:60878},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(30),{knd:read,ky:"d",vl:60878})
  write(ref.next,31)
  write(mid_spec.req_dest(30),prim)
  write(request.tx(req_msg.req(loc:m)),30)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:60878})
}
> sec.req_chan.recv({cid:0,req:{tx:24,bd:{knd:write,ky:"d",vl:15857}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:24,bd:{knd:write,ky:"d",vl:15857}}}),0)
}
> cl_chans.recv(1,{tx:26,bd:{vl:23452}})
{
  write(cl_chans.spec.sent({tx:26,bd:{vl:23452}},1),0)
}
> cl_chans.recv(1,{tx:19,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:19,bd:{vl:0}},1),0)
}
> ser.serialize(24)
{
  write(ser.serialized(24),1)
  write(mid_spec.solution.pending.contents(13),24)
  write(mid_spec.solution.pending.head,14)
  write(mid_spec.queue.contents(13),24)
  write(mid_spec.queue.head,14)
}
> ref.commit(30,prim)
{
  write(response_body.vl(fml:out),23452)
  write(ref.txres(30),{vl:23452})
  write(ref.committed(30),1)
}
> cl.client_request(0,{knd:write,ky:"d",vl:12705},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(31),{knd:write,ky:"d",vl:12705})
  write(ref.next,32)
  write(mid_spec.req_dest(31),prim)
  write(request.tx(req_msg.req(loc:m)),31)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:12705})
}
test_completed
  write(ref.next,0)
  write(sec.failed,0)
  write(mid_spec.queue.head,0)
  write(mid_spec.queue.tail,0)
  write(mid_spec.sec_failed,0)
  write(mid_spec.solution.pending.head,0)
  write(mid_spec.solution.pending.tail,0)
> cl.client_request(1,{knd:read,ky:"qh",vl:13099},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(0),{knd:read,ky:"qh",vl:13099})
  write(ref.next,1)
  write(mid_spec.req_dest(0),sec)
  write(request.tx(req_msg.req(loc:m)),0)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:13099})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:0,bd:{knd:read,ky:"qh",vl:13099}}}),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:8157},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(1),{knd:read,ky:"d",vl:8157})
  write(ref.next,2)
  write(mid_spec.req_dest(1),prim)
  write(request.tx(req_msg.req(loc:m)),1)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:8157})
}
> ref.commit(1,prim)
{
  write(response_body.vl(fml:out),0)
  write(ref.txres(1),{vl:0})
  write(ref.committed(1),1)
}
> sec.req_chan.recv({cid:1,req:{tx:0,bd:{knd:read,ky:"qh",vl:13099}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:0,bd:{knd:read,ky:"qh",vl:13099}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(0),{vl:0})
  write(ref.committed(0),1)
  write(response.tx(loc:res),0)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(0),1)
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:34686},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(2),{knd:read,ky:"d",vl:34686})
  write(ref.next,3)
  write(mid_spec.req_dest(2),sec)
  write(request.tx(req_msg.req(loc:m)),2)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:34686})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:2,bd:{knd:read,ky:"d",vl:34686}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:2,bd:{knd:read,ky:"d",vl:34686}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:2,bd:{knd:read,ky:"d",vl:34686}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(2),{vl:0})
  write(ref.committed(2),1)
  write(response.tx(loc:res),2)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(2),1)
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},1),1)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:57566},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(3),{knd:write,ky:"qh",vl:57566})
  write(ref.next,4)
  write(mid_spec.req_dest(3),prim)
  write(request.tx(req_msg.req(loc:m)),3)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:57566})
}
> cl.client_request(0,{knd:write,ky:"qh",vl:61433},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(4),{knd:write,ky:"qh",vl:61433})
  write(ref.next,5)
  write(mid_spec.req_dest(4),prim)
  write(request.tx(req_msg.req(loc:m)),4)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:61433})
}
> cl.client_request(0,{knd:read,ky:"d",vl:39522},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(5),{knd:read,ky:"d",vl:39522})
  write(ref.next,6)
  write(mid_spec.req_dest(5),prim)
  write(request.tx(req_msg.req(loc:m)),5)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:39522})
}
> ref.commit(5,prim)
{
  write(response_body.vl(fml:out),0)
  write(ref.txres(5),{vl:0})
  write(ref.committed(5),1)
}
> cl_chans.recv(1,{tx:0,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},1),0)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:22614},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(6),{knd:read,ky:"qh",vl:22614})
  write(ref.next,7)
  write(mid_spec.req_dest(6),prim)
  write(request.tx(req_msg.req(loc:m)),6)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:22614})
}
> cl_chans.send(0,{tx:1,bd:{vl:0}})
{
  write(service_spec.responded(1),1)
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),1)
}
> ser.serialize(4)
{
  write(ser.serialized(4),1)
  write(mid_spec.solution.pending.contents(0),4)
  write(mid_spec.solution.pending.head,1)
  write(mid_spec.queue.contents(0),4)
  write(mid_spec.queue.head,1)
}
> cl_chans.recv(0,{tx:1,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),0)
}
> cl_chans.send(0,{tx:5,bd:{vl:0}})
{
  write(service_spec.responded(5),1)
  write(cl_chans.spec.sent({tx:5,bd:{vl:0}},0),1)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:141},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(7),{knd:write,ky:"qh",vl:141})
  write(ref.next,8)
  write(mid_spec.req_dest(7),sec)
  write(request.tx(req_msg.req(loc:m)),7)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:141})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:7,bd:{knd:write,ky:"qh",vl:141}}}),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:4,bd:{knd:write,ky:"qh",vl:61433}}})
{
  write(mid_spec.queue.tail,1)
  write(ref.rep.store("qh"),61433)
  write(ref.txres(4),{vl:0})
  write(ref.committed(4),1)
  write(mid_spec.solution.pending.tail,1)
  write(response.tx(loc:res),4)
  write(sec.rep.store("qh"),61433)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(4),1)
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:4,bd:{knd:write,ky:"qh",vl:61433}}})
{
  write(mid_spec.acked(4),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:7,bd:{knd:write,ky:"qh",vl:141}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:7,bd:{knd:write,ky:"qh",vl:141}}}),0)
}
> cl_chans.recv(0,{tx:5,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:5,bd:{vl:0}},0),0)
}
> cl_chans.recv(1,{tx:2,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},1),0)
}
> ref.commit(6,prim)
{
  write(response_body.vl(fml:out),61433)
  write(ref.txres(6),{vl:61433})
  write(ref.committed(6),1)
}
> cl.client_request(0,{knd:write,ky:"d",vl:60866},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(8),{knd:write,ky:"d",vl:60866})
  write(ref.next,9)
  write(mid_spec.req_dest(8),prim)
  write(request.tx(req_msg.req(loc:m)),8)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:60866})
}
> ser.serialize(8)
{
  write(ser.serialized(8),1)
  write(mid_spec.solution.pending.contents(1),8)
  write(mid_spec.solution.pending.head,2)
  write(mid_spec.queue.contents(1),8)
  write(mid_spec.queue.head,2)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:8,bd:{knd:write,ky:"d",vl:60866}}})
{
  write(mid_spec.queue.tail,2)
  write(ref.rep.store("d"),60866)
  write(ref.txres(8),{vl:0})
  write(ref.committed(8),1)
  write(mid_spec.solution.pending.tail,2)
  write(response.tx(loc:res),8)
  write(sec.rep.store("d"),60866)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(8),1)
  write(cl_chans.spec.sent({tx:8,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:8,bd:{knd:write,ky:"d",vl:60866}}})
{
  write(mid_spec.acked(8),1)
}
}
> cl.client_request(1,{knd:write,ky:"qh",vl:55218},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(9),{knd:write,ky:"qh",vl:55218})
  write(ref.next,10)
  write(mid_spec.req_dest(9),prim)
  write(request.tx(req_msg.req(loc:m)),9)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:55218})
}
> cl.client_request(0,{knd:write,ky:"d",vl:55522},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(10),{knd:write,ky:"d",vl:55522})
  write(ref.next,11)
  write(mid_spec.req_dest(10),prim)
  write(request.tx(req_msg.req(loc:m)),10)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:55522})
}
> cl_chans.recv(0,{tx:4,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},0),0)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:18272},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(11),{knd:read,ky:"qh",vl:18272})
  write(ref.next,12)
  write(mid_spec.req_dest(11),prim)
  write(request.tx(req_msg.req(loc:m)),11)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:18272})
}
> cl_chans.send(0,{tx:6,bd:{vl:61433}})
{
  write(service_spec.responded(6),1)
  write(cl_chans.spec.sent({tx:6,bd:{vl:61433}},0),1)
}
> cl_chans.recv(1,{tx:8,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:8,bd:{vl:0}},1),0)
}
> ser.serialize(10)
{
  write(ser.serialized(10),1)
  write(mid_spec.solution.pending.contents(2),10)
  write(mid_spec.solution.pending.head,3)
  write(mid_spec.queue.contents(2),10)
  write(mid_spec.queue.head,3)
}
> ref.commit(11,prim)
{
  write(response_body.vl(fml:out),61433)
  write(ref.txres(11),{vl:61433})
  write(ref.committed(11),1)
}
> cl_chans.send(0,{tx:11,bd:{vl:61433}})
{
  write(service_spec.responded(11),1)
  write(cl_chans.spec.sent({tx:11,bd:{vl:61433}},0),1)
}
> cl_chans.recv(0,{tx:11,bd:{vl:61433}})
{
  write(cl_chans.spec.sent({tx:11,bd:{vl:61433}},0),0)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:10,bd:{knd:write,ky:"d",vl:55522}}})
{
  write(mid_spec.queue.tail,3)
  write(ref.rep.store("d"),55522)
  write(ref.txres(10),{vl:0})
  write(ref.committed(10),1)
  write(mid_spec.solution.pending.tail,3)
  write(response.tx(loc:res),10)
  write(sec.rep.store("d"),55522)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(10),1)
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:10,bd:{knd:write,ky:"d",vl:55522}}})
{
  write(mid_spec.acked(10),1)
}
}
> cl.client_request(1,{knd:write,ky:"d",vl:40993},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(12),{knd:write,ky:"d",vl:40993})
  write(ref.next,13)
  write(mid_spec.req_dest(12),prim)
  write(request.tx(req_msg.req(loc:m)),12)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:40993})
}
> cl.client_request(0,{knd:read,ky:"d",vl:54739},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(13),{knd:read,ky:"d",vl:54739})
  write(ref.next,14)
  write(mid_spec.req_dest(13),prim)
  write(request.tx(req_msg.req(loc:m)),13)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:54739})
}
> cl_chans.recv(0,{tx:10,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},0),0)
}
> cl_chans.recv(0,{tx:6,bd:{vl:61433}})
{
  write(cl_chans.spec.sent({tx:6,bd:{vl:61433}},0),0)
}
> cl.client_request(1,{knd:read,ky:"d",vl:28813},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(14),{knd:read,ky:"d",vl:28813})
  write(ref.next,15)
  write(mid_spec.req_dest(14),prim)
  write(request.tx(req_msg.req(loc:m)),14)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:28813})
}
> ser.serialize(12)
{
  write(ser.serialized(12),1)
  write(mid_spec.solution.pending.contents(3),12)
  write(mid_spec.solution.pending.head,4)
  write(mid_spec.queue.contents(3),12)
  write(mid_spec.queue.head,4)
}
> ref.commit(13,prim)
{
  write(response_body.vl(fml:out),55522)
  write(ref.txres(13),{vl:55522})
  write(ref.committed(13),1)
}
> ser.serialize(9)
{
  write(ser.serialized(9),1)
  write(mid_spec.solution.pending.contents(4),9)
  write(mid_spec.solution.pending.head,5)
  write(mid_spec.queue.contents(4),9)
  write(mid_spec.queue.head,5)
}
> ser.serialize(7)
{
  write(ser.serialized(7),1)
  write(mid_spec.solution.pending.contents(5),7)
  write(mid_spec.solution.pending.head,6)
  write(mid_spec.queue.contents(5),7)
  write(mid_spec.queue.head,6)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:12,bd:{knd:write,ky:"d",vl:40993}}})
{
  write(mid_spec.queue.tail,4)
  write(ref.rep.store("d"),40993)
  write(ref.txres(12),{vl:0})
  write(ref.committed(12),1)
  write(mid_spec.solution.pending.tail,4)
  write(response.tx(loc:res),12)
  write(sec.rep.store("d"),40993)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(12),1)
  write(cl_chans.spec.sent({tx:12,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:12,bd:{knd:write,ky:"d",vl:40993}}})
{
  write(mid_spec.acked(12),1)
}
}
> cl.client_request(0,{knd:read,ky:"d",vl:50593},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(15),{knd:read,ky:"d",vl:50593})
  write(ref.next,16)
  write(mid_spec.req_dest(15),sec)
  write(request.tx(req_msg.req(loc:m)),15)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:50593})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:15,bd:{knd:read,ky:"d",vl:50593}}}),1)
}
> cl.client_request(0,{knd:write,ky:"d",vl:8353},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(16),{knd:write,ky:"d",vl:8353})
  write(ref.next,17)
  write(mid_spec.req_dest(16),sec)
  write(request.tx(req_msg.req(loc:m)),16)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:8353})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:16,bd:{knd:write,ky:"d",vl:8353}}}),1)
}
> ser.serialize(16)
{
  write(ser.serialized(16),1)
  write(mid_spec.solution.pending.contents(6),16)
  write(mid_spec.solution.pending.head,7)
  write(mid_spec.queue.contents(6),16)
  write(mid_spec.queue.head,7)
}
> sec.req_chan.recv({cid:0,req:{tx:16,bd:{knd:write,ky:"d",vl:8353}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:16,bd:{knd:write,ky:"d",vl:8353}}}),0)
}
> cl_chans.recv(1,{tx:12,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:12,bd:{vl:0}},1),0)
}
> sec.req_chan.recv({cid:0,req:{tx:15,bd:{knd:read,ky:"d",vl:50593}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:15,bd:{knd:read,ky:"d",vl:50593}}}),0)
  write(response_body.vl(fml:out),40993)
  write(ref.txres(15),{vl:40993})
  write(ref.committed(15),1)
  write(response.tx(loc:res),15)
  write(response_body.vl(fml:out),40993)
  write(response.bd(loc:res),{vl:40993})
  write(service_spec.responded(15),1)
  write(cl_chans.spec.sent({tx:15,bd:{vl:40993}},0),1)
}
> ref.commit(14,prim)
{
  write(response_body.vl(fml:out),40993)
  write(ref.txres(14),{vl:40993})
  write(ref.committed(14),1)
}
> cl_chans.recv(0,{tx:15,bd:{vl:40993}})
{
  write(cl_chans.spec.sent({tx:15,bd:{vl:40993}},0),0)
}
> cl_chans.send(0,{tx:14,bd:{vl:40993}})
{
  write(service_spec.responded(14),1)
  write(cl_chans.spec.sent({tx:14,bd:{vl:40993}},0),1)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:9,bd:{knd:write,ky:"qh",vl:55218}}})
{
  write(mid_spec.queue.tail,5)
  write(ref.rep.store("qh"),55218)
  write(ref.txres(9),{vl:0})
  write(ref.committed(9),1)
  write(mid_spec.solution.pending.tail,5)
  write(response.tx(loc:res),9)
  write(sec.rep.store("qh"),55218)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(9),1)
  write(cl_chans.spec.sent({tx:9,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:9,bd:{knd:write,ky:"qh",vl:55218}}})
{
  write(mid_spec.acked(9),1)
}
}
> cl.client_request(0,{knd:write,ky:"qh",vl:32710},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(17),{knd:write,ky:"qh",vl:32710})
  write(ref.next,18)
  write(mid_spec.req_dest(17),prim)
  write(request.tx(req_msg.req(loc:m)),17)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:32710})
}
> cl.client_request(1,{knd:read,ky:"d",vl:50660},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(18),{knd:read,ky:"d",vl:50660})
  write(ref.next,19)
  write(mid_spec.req_dest(18),sec)
  write(request.tx(req_msg.req(loc:m)),18)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:50660})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:18,bd:{knd:read,ky:"d",vl:50660}}}),1)
}
> cl_chans.recv(1,{tx:9,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:9,bd:{vl:0}},1),0)
}
> sec.req_chan.recv({cid:1,req:{tx:18,bd:{knd:read,ky:"d",vl:50660}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:18,bd:{knd:read,ky:"d",vl:50660}}}),0)
  write(response_body.vl(fml:out),40993)
  write(ref.txres(18),{vl:40993})
  write(ref.committed(18),1)
  write(response.tx(loc:res),18)
  write(response_body.vl(fml:out),40993)
  write(response.bd(loc:res),{vl:40993})
  write(service_spec.responded(18),1)
  write(cl_chans.spec.sent({tx:18,bd:{vl:40993}},1),1)
}
> ser.serialize(17)
{
  write(ser.serialized(17),1)
  write(mid_spec.solution.pending.contents(7),17)
  write(mid_spec.solution.pending.head,8)
  write(mid_spec.queue.contents(7),17)
  write(mid_spec.queue.head,8)
}
> ser.serialize(3)
{
  write(ser.serialized(3),1)
  write(mid_spec.solution.pending.contents(8),3)
  write(mid_spec.solution.pending.head,9)
  write(mid_spec.queue.contents(8),3)
  write(mid_spec.queue.head,9)
}
> cl.client_request(1,{knd:read,ky:"d",vl:18744},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(19),{knd:read,ky:"d",vl:18744})
  write(ref.next,20)
  write(mid_spec.req_dest(19),sec)
  write(request.tx(req_msg.req(loc:m)),19)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:18744})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:19,bd:{knd:read,ky:"d",vl:18744}}}),1)
}
> cl_chans.send(1,{tx:13,bd:{vl:55522}})
{
  write(service_spec.responded(13),1)
  write(cl_chans.spec.sent({tx:13,bd:{vl:55522}},1),1)
}
> cl_chans.recv(1,{tx:13,bd:{vl:55522}})
{
  write(cl_chans.spec.sent({tx:13,bd:{vl:55522}},1),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:7,bd:{knd:write,ky:"qh",vl:141}}})
{
  write(mid_spec.queue.tail,6)
  write(ref.rep.store("qh"),141)
  write(ref.txres(7),{vl:0})
  write(ref.committed(7),1)
  write(mid_spec.solution.pending.tail,6)
  write(response.tx(loc:res),7)
  write(sec.rep.store("qh"),141)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(7),1)
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:7,bd:{knd:write,ky:"qh",vl:141}}})
{
  write(mid_spec.acked(7),1)
}
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:16,bd:{knd:write,ky:"d",vl:8353}}})
{
  write(mid_spec.queue.tail,7)
  write(ref.rep.store("d"),8353)
  write(ref.txres(16),{vl:0})
  write(ref.committed(16),1)
  write(mid_spec.solution.pending.tail,7)
  write(response.tx(loc:res),16)
  write(sec.rep.store("d"),8353)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(16),1)
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:16,bd:{knd:write,ky:"d",vl:8353}}})
{
  write(mid_spec.acked(16),1)
}
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:17,bd:{knd:write,ky:"qh",vl:32710}}})
{
  write(mid_spec.queue.tail,8)
  write(ref.rep.store("qh"),32710)
  write(ref.txres(17),{vl:0})
  write(ref.committed(17),1)
  write(mid_spec.solution.pending.tail,8)
  write(response.tx(loc:res),17)
  write(sec.rep.store("qh"),32710)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(17),1)
  write(cl_chans.spec.sent({tx:17,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:17,bd:{knd:write,ky:"qh",vl:32710}}})
{
  write(mid_spec.acked(17),1)
}
}
> cl.client_request(1,{knd:write,ky:"d",vl:43958},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(20),{knd:write,ky:"d",vl:43958})
  write(ref.next,21)
  write(mid_spec.req_dest(20),sec)
  write(request.tx(req_msg.req(loc:m)),20)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:43958})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:43958}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:43958}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:43958}}}),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:3,bd:{knd:write,ky:"qh",vl:57566}}})
{
  write(mid_spec.queue.tail,9)
  write(ref.rep.store("qh"),57566)
  write(ref.txres(3),{vl:0})
  write(ref.committed(3),1)
  write(mid_spec.solution.pending.tail,9)
  write(response.tx(loc:res),3)
  write(sec.rep.store("qh"),57566)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(3),1)
  write(cl_chans.spec.sent({tx:3,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:3,bd:{knd:write,ky:"qh",vl:57566}}})
{
  write(mid_spec.acked(3),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:19,bd:{knd:read,ky:"d",vl:18744}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:19,bd:{knd:read,ky:"d",vl:18744}}}),0)
  write(response_body.vl(fml:out),8353)
  write(ref.txres(19),{vl:8353})
  write(ref.committed(19),1)
  write(response.tx(loc:res),19)
  write(response_body.vl(fml:out),8353)
  write(response.bd(loc:res),{vl:8353})
  write(service_spec.responded(19),1)
  write(cl_chans.spec.sent({tx:19,bd:{vl:8353}},1),1)
}
> cl_chans.recv(1,{tx:19,bd:{vl:8353}})
{
  write(cl_chans.spec.sent({tx:19,bd:{vl:8353}},1),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:1094},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(21),{knd:write,ky:"d",vl:1094})
  write(ref.next,22)
  write(mid_spec.req_dest(21),sec)
  write(request.tx(req_msg.req(loc:m)),21)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:1094})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:write,ky:"d",vl:1094}}}),1)
}
> cl_chans.recv(1,{tx:18,bd:{vl:40993}})
{
  write(cl_chans.spec.sent({tx:18,bd:{vl:40993}},1),0)
}
> sec.req_chan.recv({cid:0,req:{tx:21,bd:{knd:write,ky:"d",vl:1094}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:write,ky:"d",vl:1094}}}),0)
}
> ser.serialize(21)
{
  write(ser.serialized(21),1)
  write(mid_spec.solution.pending.contents(9),21)
  write(mid_spec.solution.pending.head,10)
  write(mid_spec.queue.contents(9),21)
  write(mid_spec.queue.head,10)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:21,bd:{knd:write,ky:"d",vl:1094}}})
{
  write(mid_spec.queue.tail,10)
  write(ref.rep.store("d"),1094)
  write(ref.txres(21),{vl:0})
  write(ref.committed(21),1)
  write(mid_spec.solution.pending.tail,10)
  write(response.tx(loc:res),21)
  write(sec.rep.store("d"),1094)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(21),1)
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:21,bd:{knd:write,ky:"d",vl:1094}}})
{
  write(mid_spec.acked(21),1)
}
}
> cl_chans.recv(1,{tx:7,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},1),0)
}
> cl.client_request(1,{knd:write,ky:"d",vl:29986},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(22),{knd:write,ky:"d",vl:29986})
  write(ref.next,23)
  write(mid_spec.req_dest(22),prim)
  write(request.tx(req_msg.req(loc:m)),22)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:29986})
}
> cl.client_request(0,{knd:write,ky:"d",vl:22595},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(23),{knd:write,ky:"d",vl:22595})
  write(ref.next,24)
  write(mid_spec.req_dest(23),sec)
  write(request.tx(req_msg.req(loc:m)),23)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:22595})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:23,bd:{knd:write,ky:"d",vl:22595}}}),1)
}
> ser.serialize(23)
{
  write(ser.serialized(23),1)
  write(mid_spec.solution.pending.contents(10),23)
  write(mid_spec.solution.pending.head,11)
  write(mid_spec.queue.contents(10),23)
  write(mid_spec.queue.head,11)
}
> sec.req_chan.recv({cid:0,req:{tx:23,bd:{knd:write,ky:"d",vl:22595}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:23,bd:{knd:write,ky:"d",vl:22595}}}),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:37897},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(24),{knd:read,ky:"d",vl:37897})
  write(ref.next,25)
  write(mid_spec.req_dest(24),sec)
  write(request.tx(req_msg.req(loc:m)),24)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:37897})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:24,bd:{knd:read,ky:"d",vl:37897}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:24,bd:{knd:read,ky:"d",vl:37897}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:24,bd:{knd:read,ky:"d",vl:37897}}}),0)
  write(response_body.vl(fml:out),1094)
  write(ref.txres(24),{vl:1094})
  write(ref.committed(24),1)
  write(response.tx(loc:res),24)
  write(response_body.vl(fml:out),1094)
  write(response.bd(loc:res),{vl:1094})
  write(service_spec.responded(24),1)
  write(cl_chans.spec.sent({tx:24,bd:{vl:1094}},0),1)
}
> ser.serialize(22)
{
  write(ser.serialized(22),1)
  write(mid_spec.solution.pending.contents(11),22)
  write(mid_spec.solution.pending.head,12)
  write(mid_spec.queue.contents(11),22)
  write(mid_spec.queue.head,12)
}
> cl_chans.recv(1,{tx:16,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},1),0)
}
> cl_chans.recv(1,{tx:21,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:21,bd:{vl:0}},1),0)
}
> ser.serialize(20)
{
  write(ser.serialized(20),1)
  write(mid_spec.solution.pending.contents(12),20)
  write(mid_spec.solution.pending.head,13)
  write(mid_spec.queue.contents(12),20)
  write(mid_spec.queue.head,13)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:23,bd:{knd:write,ky:"d",vl:22595}}})
{
  write(mid_spec.queue.tail,11)
  write(ref.rep.store("d"),22595)
  write(ref.txres(23),{vl:0})
  write(ref.committed(23),1)
  write(mid_spec.solution.pending.tail,11)
  write(response.tx(loc:res),23)
  write(sec.rep.store("d"),22595)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(23),1)
  write(cl_chans.spec.sent({tx:23,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:23,bd:{knd:write,ky:"d",vl:22595}}})
{
  write(mid_spec.acked(23),1)
}
}
> cl_chans.recv(0,{tx:14,bd:{vl:40993}})
{
  write(cl_chans.spec.sent({tx:14,bd:{vl:40993}},0),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:22,bd:{knd:write,ky:"d",vl:29986}}})
{
  write(mid_spec.queue.tail,12)
  write(ref.rep.store("d"),29986)
  write(ref.txres(22),{vl:0})
  write(ref.committed(22),1)
  write(mid_spec.solution.pending.tail,12)
  write(response.tx(loc:res),22)
  write(sec.rep.store("d"),29986)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(22),1)
  write(cl_chans.spec.sent({tx:22,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:22,bd:{knd:write,ky:"d",vl:29986}}})
{
  write(mid_spec.acked(22),1)
}
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:20,bd:{knd:write,ky:"d",vl:43958}}})
{
  write(mid_spec.queue.tail,13)
  write(ref.rep.store("d"),43958)
  write(ref.txres(20),{vl:0})
  write(ref.committed(20),1)
  write(mid_spec.solution.pending.tail,13)
  write(response.tx(loc:res),20)
  write(sec.rep.store("d"),43958)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(20),1)
  write(cl_chans.spec.sent({tx:20,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:20,bd:{knd:write,ky:"d",vl:43958}}})
{
  write(mid_spec.acked(20),1)
}
}
> cl.client_request(0,{knd:read,ky:"d",vl:15403},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(25),{knd:read,ky:"d",vl:15403})
  write(ref.next,26)
  write(mid_spec.req_dest(25),sec)
  write(request.tx(req_msg.req(loc:m)),25)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:15403})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:25,bd:{knd:read,ky:"d",vl:15403}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:25,bd:{knd:read,ky:"d",vl:15403}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:25,bd:{knd:read,ky:"d",vl:15403}}}),0)
  write(response_body.vl(fml:out),43958)
  write(ref.txres(25),{vl:43958})
  write(ref.committed(25),1)
  write(response.tx(loc:res),25)
  write(response_body.vl(fml:out),43958)
  write(response.bd(loc:res),{vl:43958})
  write(service_spec.responded(25),1)
  write(cl_chans.spec.sent({tx:25,bd:{vl:43958}},0),1)
}
> cl.client_request(1,{knd:read,ky:"d",vl:46152},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(26),{knd:read,ky:"d",vl:46152})
  write(ref.next,27)
  write(mid_spec.req_dest(26),prim)
  write(request.tx(req_msg.req(loc:m)),26)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:46152})
}
> cl.client_request(0,{knd:write,ky:"qh",vl:33580},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(27),{knd:write,ky:"qh",vl:33580})
  write(ref.next,28)
  write(mid_spec.req_dest(27),prim)
  write(request.tx(req_msg.req(loc:m)),27)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:33580})
}
> cl.client_request(1,{knd:write,ky:"d",vl:19510},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(28),{knd:write,ky:"d",vl:19510})
  write(ref.next,29)
  write(mid_spec.req_dest(28),prim)
  write(request.tx(req_msg.req(loc:m)),28)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:19510})
}
> ref.commit(26,prim)
{
  write(response_body.vl(fml:out),43958)
  write(ref.txres(26),{vl:43958})
  write(ref.committed(26),1)
}
> ser.serialize(28)
{
  write(ser.serialized(28),1)
  write(mid_spec.solution.pending.contents(13),28)
  write(mid_spec.solution.pending.head,14)
  write(mid_spec.queue.contents(13),28)
  write(mid_spec.queue.head,14)
}
test_completed
  write(ref.next,0)
  write(sec.failed,0)
  write(mid_spec.queue.head,0)
  write(mid_spec.queue.tail,0)
  write(mid_spec.sec_failed,0)
  write(mid_spec.solution.pending.head,0)
  write(mid_spec.solution.pending.tail,0)
> cl.client_request(1,{knd:write,ky:"d",vl:4983},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(0),{knd:write,ky:"d",vl:4983})
  write(ref.next,1)
  write(mid_spec.req_dest(0),prim)
  write(request.tx(req_msg.req(loc:m)),0)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:4983})
}
> cl.client_request(0,{knd:read,ky:"qh",vl:62711},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(1),{knd:read,ky:"qh",vl:62711})
  write(ref.next,2)
  write(mid_spec.req_dest(1),sec)
  write(request.tx(req_msg.req(loc:m)),1)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:62711})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:1,bd:{knd:read,ky:"qh",vl:62711}}}),1)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:20536},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(2),{knd:write,ky:"qh",vl:20536})
  write(ref.next,3)
  write(mid_spec.req_dest(2),sec)
  write(request.tx(req_msg.req(loc:m)),2)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:20536})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:2,bd:{knd:write,ky:"qh",vl:20536}}}),1)
}
> ser.serialize(0)
{
  write(ser.serialized(0),1)
  write(mid_spec.solution.pending.contents(0),0)
  write(mid_spec.solution.pending.head,1)
  write(mid_spec.queue.contents(0),0)
  write(mid_spec.queue.head,1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:0,bd:{knd:write,ky:"d",vl:4983}}})
{
  write(mid_spec.queue.tail,1)
  write(ref.rep.store("d"),4983)
  write(ref.txres(0),{vl:0})
  write(ref.committed(0),1)
  write(mid_spec.solution.pending.tail,1)
  write(response.tx(loc:res),0)
  write(sec.rep.store("d"),4983)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(0),1)
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:0,bd:{knd:write,ky:"d",vl:4983}}})
{
  write(mid_spec.acked(0),1)
}
}
> cl.client_request(0,{knd:write,ky:"d",vl:27445},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(3),{knd:write,ky:"d",vl:27445})
  write(ref.next,4)
  write(mid_spec.req_dest(3),sec)
  write(request.tx(req_msg.req(loc:m)),3)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:27445})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:3,bd:{knd:write,ky:"d",vl:27445}}}),1)
}
> cl_chans.recv(0,{tx:0,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:0,bd:{vl:0}},0),0)
}
> sec.req_chan.recv({cid:0,req:{tx:3,bd:{knd:write,ky:"d",vl:27445}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:3,bd:{knd:write,ky:"d",vl:27445}}}),0)
}
> cl.client_request(1,{knd:write,ky:"d",vl:46596},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(4),{knd:write,ky:"d",vl:46596})
  write(ref.next,5)
  write(mid_spec.req_dest(4),sec)
  write(request.tx(req_msg.req(loc:m)),4)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:46596})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:4,bd:{knd:write,ky:"d",vl:46596}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:2,bd:{knd:write,ky:"qh",vl:20536}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:2,bd:{knd:write,ky:"qh",vl:20536}}}),0)
}
> ser.serialize(4)
{
  write(ser.serialized(4),1)
  write(mid_spec.solution.pending.contents(1),4)
  write(mid_spec.solution.pending.head,2)
  write(mid_spec.queue.contents(1),4)
  write(mid_spec.queue.head,2)
}
> sec.req_chan.recv({cid:1,req:{tx:4,bd:{knd:write,ky:"d",vl:46596}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:4,bd:{knd:write,ky:"d",vl:46596}}}),0)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:4,bd:{knd:write,ky:"d",vl:46596}}})
{
  write(mid_spec.queue.tail,2)
  write(ref.rep.store("d"),46596)
  write(ref.txres(4),{vl:0})
  write(ref.committed(4),1)
  write(mid_spec.solution.pending.tail,2)
  write(response.tx(loc:res),4)
  write(sec.rep.store("d"),46596)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(4),1)
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:4,bd:{knd:write,ky:"d",vl:46596}}})
{
  write(mid_spec.acked(4),1)
}
}
> cl_chans.recv(1,{tx:4,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:4,bd:{vl:0}},1),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:24529},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(5),{knd:write,ky:"d",vl:24529})
  write(ref.next,6)
  write(mid_spec.req_dest(5),prim)
  write(request.tx(req_msg.req(loc:m)),5)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:24529})
}
> ser.serialize(5)
{
  write(ser.serialized(5),1)
  write(mid_spec.solution.pending.contents(2),5)
  write(mid_spec.solution.pending.head,3)
  write(mid_spec.queue.contents(2),5)
  write(mid_spec.queue.head,3)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:5,bd:{knd:write,ky:"d",vl:24529}}})
{
  write(mid_spec.queue.tail,3)
  write(ref.rep.store("d"),24529)
  write(ref.txres(5),{vl:0})
  write(ref.committed(5),1)
  write(mid_spec.solution.pending.tail,3)
  write(response.tx(loc:res),5)
  write(sec.rep.store("d"),24529)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(5),1)
  write(cl_chans.spec.sent({tx:5,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:5,bd:{knd:write,ky:"d",vl:24529}}})
{
  write(mid_spec.acked(5),1)
}
}
> ser.serialize(3)
{
  write(ser.serialized(3),1)
  write(mid_spec.solution.pending.contents(3),3)
  write(mid_spec.solution.pending.head,4)
  write(mid_spec.queue.contents(3),3)
  write(mid_spec.queue.head,4)
}
> cl_chans.recv(1,{tx:5,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:5,bd:{vl:0}},1),0)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:58785},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(6),{knd:read,ky:"qh",vl:58785})
  write(ref.next,7)
  write(mid_spec.req_dest(6),sec)
  write(request.tx(req_msg.req(loc:m)),6)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:58785})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:6,bd:{knd:read,ky:"qh",vl:58785}}}),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:41432},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(7),{knd:write,ky:"d",vl:41432})
  write(ref.next,8)
  write(mid_spec.req_dest(7),sec)
  write(request.tx(req_msg.req(loc:m)),7)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:41432})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:7,bd:{knd:write,ky:"d",vl:41432}}}),1)
}
> sec.req_chan.recv({cid:1,req:{tx:7,bd:{knd:write,ky:"d",vl:41432}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:7,bd:{knd:write,ky:"d",vl:41432}}}),0)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:3,bd:{knd:write,ky:"d",vl:27445}}})
{
  write(mid_spec.queue.tail,4)
  write(ref.rep.store("d"),27445)
  write(ref.txres(3),{vl:0})
  write(ref.committed(3),1)
  write(mid_spec.solution.pending.tail,4)
  write(response.tx(loc:res),3)
  write(sec.rep.store("d"),27445)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(3),1)
  write(cl_chans.spec.sent({tx:3,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:3,bd:{knd:write,ky:"d",vl:27445}}})
{
  write(mid_spec.acked(3),1)
}
}
> ser.serialize(7)
{
  write(ser.serialized(7),1)
  write(mid_spec.solution.pending.contents(4),7)
  write(mid_spec.solution.pending.head,5)
  write(mid_spec.queue.contents(4),7)
  write(mid_spec.queue.head,5)
}
> ser.serialize(2)
{
  write(ser.serialized(2),1)
  write(mid_spec.solution.pending.contents(5),2)
  write(mid_spec.solution.pending.head,6)
  write(mid_spec.queue.contents(5),2)
  write(mid_spec.queue.head,6)
}
> sec.req_chan.recv({cid:0,req:{tx:1,bd:{knd:read,ky:"qh",vl:62711}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:1,bd:{knd:read,ky:"qh",vl:62711}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(1),{vl:0})
  write(ref.committed(1),1)
  write(response.tx(loc:res),1)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(1),1)
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),1)
}
> cl_chans.recv(0,{tx:3,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:3,bd:{vl:0}},0),0)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:7,bd:{knd:write,ky:"d",vl:41432}}})
{
  write(mid_spec.queue.tail,5)
  write(ref.rep.store("d"),41432)
  write(ref.txres(7),{vl:0})
  write(ref.committed(7),1)
  write(mid_spec.solution.pending.tail,5)
  write(response.tx(loc:res),7)
  write(sec.rep.store("d"),41432)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(7),1)
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:7,bd:{knd:write,ky:"d",vl:41432}}})
{
  write(mid_spec.acked(7),1)
}
}
> cl_chans.recv(0,{tx:7,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:7,bd:{vl:0}},0),0)
}
> cl.client_request(1,{knd:read,ky:"d",vl:63637},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(8),{knd:read,ky:"d",vl:63637})
  write(ref.next,9)
  write(mid_spec.req_dest(8),prim)
  write(request.tx(req_msg.req(loc:m)),8)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:63637})
}
> cl_chans.recv(0,{tx:1,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:1,bd:{vl:0}},0),0)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:50966},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(9),{knd:write,ky:"qh",vl:50966})
  write(ref.next,10)
  write(mid_spec.req_dest(9),sec)
  write(request.tx(req_msg.req(loc:m)),9)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:50966})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:9,bd:{knd:write,ky:"qh",vl:50966}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:6,bd:{knd:read,ky:"qh",vl:58785}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:6,bd:{knd:read,ky:"qh",vl:58785}}}),0)
  write(response_body.vl(fml:out),0)
  write(ref.txres(6),{vl:0})
  write(ref.committed(6),1)
  write(response.tx(loc:res),6)
  write(response_body.vl(fml:out),0)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(6),1)
  write(cl_chans.spec.sent({tx:6,bd:{vl:0}},0),1)
}
> sec.req_chan.recv({cid:1,req:{tx:9,bd:{knd:write,ky:"qh",vl:50966}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:9,bd:{knd:write,ky:"qh",vl:50966}}}),0)
}
> ref.commit(8,prim)
{
  write(response_body.vl(fml:out),41432)
  write(ref.txres(8),{vl:41432})
  write(ref.committed(8),1)
}
> cl_chans.send(0,{tx:8,bd:{vl:41432}})
{
  write(service_spec.responded(8),1)
  write(cl_chans.spec.sent({tx:8,bd:{vl:41432}},0),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:22109},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(10),{knd:write,ky:"d",vl:22109})
  write(ref.next,11)
  write(mid_spec.req_dest(10),sec)
  write(request.tx(req_msg.req(loc:m)),10)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:22109})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:10,bd:{knd:write,ky:"d",vl:22109}}}),1)
}
> cl_chans.recv(0,{tx:8,bd:{vl:41432}})
{
  write(cl_chans.spec.sent({tx:8,bd:{vl:41432}},0),0)
}
> ser.serialize(10)
{
  write(ser.serialized(10),1)
  write(mid_spec.solution.pending.contents(6),10)
  write(mid_spec.solution.pending.head,7)
  write(mid_spec.queue.contents(6),10)
  write(mid_spec.queue.head,7)
}
> cl.client_request(1,{knd:write,ky:"d",vl:52373},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(11),{knd:write,ky:"d",vl:52373})
  write(ref.next,12)
  write(mid_spec.req_dest(11),prim)
  write(request.tx(req_msg.req(loc:m)),11)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:52373})
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:2,bd:{knd:write,ky:"qh",vl:20536}}})
{
  write(mid_spec.queue.tail,6)
  write(ref.rep.store("qh"),20536)
  write(ref.txres(2),{vl:0})
  write(ref.committed(2),1)
  write(mid_spec.solution.pending.tail,6)
  write(response.tx(loc:res),2)
  write(sec.rep.store("qh"),20536)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(2),1)
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:2,bd:{knd:write,ky:"qh",vl:20536}}})
{
  write(mid_spec.acked(2),1)
}
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:10,bd:{knd:write,ky:"d",vl:22109}}})
{
  write(mid_spec.queue.tail,7)
  write(ref.rep.store("d"),22109)
  write(ref.txres(10),{vl:0})
  write(ref.committed(10),1)
  write(mid_spec.solution.pending.tail,7)
  write(response.tx(loc:res),10)
  write(sec.rep.store("d"),22109)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(10),1)
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:10,bd:{knd:write,ky:"d",vl:22109}}})
{
  write(mid_spec.acked(10),1)
}
}
> sec.req_chan.recv({cid:1,req:{tx:10,bd:{knd:write,ky:"d",vl:22109}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:10,bd:{knd:write,ky:"d",vl:22109}}}),0)
}
> ser.serialize(11)
{
  write(ser.serialized(11),1)
  write(mid_spec.solution.pending.contents(7),11)
  write(mid_spec.solution.pending.head,8)
  write(mid_spec.queue.contents(7),11)
  write(mid_spec.queue.head,8)
}
> ser.serialize(9)
{
  write(ser.serialized(9),1)
  write(mid_spec.solution.pending.contents(8),9)
  write(mid_spec.solution.pending.head,9)
  write(mid_spec.queue.contents(8),9)
  write(mid_spec.queue.head,9)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:11,bd:{knd:write,ky:"d",vl:52373}}})
{
  write(mid_spec.queue.tail,8)
  write(ref.rep.store("d"),52373)
  write(ref.txres(11),{vl:0})
  write(ref.committed(11),1)
  write(mid_spec.solution.pending.tail,8)
  write(response.tx(loc:res),11)
  write(sec.rep.store("d"),52373)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(11),1)
  write(cl_chans.spec.sent({tx:11,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:11,bd:{knd:write,ky:"d",vl:52373}}})
{
  write(mid_spec.acked(11),1)
}
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:9,bd:{knd:write,ky:"qh",vl:50966}}})
{
  write(mid_spec.queue.tail,9)
  write(ref.rep.store("qh"),50966)
  write(ref.txres(9),{vl:0})
  write(ref.committed(9),1)
  write(mid_spec.solution.pending.tail,9)
  write(response.tx(loc:res),9)
  write(sec.rep.store("qh"),50966)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(9),1)
  write(cl_chans.spec.sent({tx:9,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:9,bd:{knd:write,ky:"qh",vl:50966}}})
{
  write(mid_spec.acked(9),1)
}
}
> cl_chans.recv(1,{tx:2,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:2,bd:{vl:0}},1),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:31786},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(12),{knd:write,ky:"d",vl:31786})
  write(ref.next,13)
  write(mid_spec.req_dest(12),sec)
  write(request.tx(req_msg.req(loc:m)),12)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:31786})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:12,bd:{knd:write,ky:"d",vl:31786}}}),1)
}
> cl_chans.recv(1,{tx:11,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:11,bd:{vl:0}},1),0)
}
> sec.req_chan.recv({cid:0,req:{tx:12,bd:{knd:write,ky:"d",vl:31786}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:12,bd:{knd:write,ky:"d",vl:31786}}}),0)
}
> ser.serialize(12)
{
  write(ser.serialized(12),1)
  write(mid_spec.solution.pending.contents(9),12)
  write(mid_spec.solution.pending.head,10)
  write(mid_spec.queue.contents(9),12)
  write(mid_spec.queue.head,10)
}
> cl_chans.recv(0,{tx:9,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:9,bd:{vl:0}},0),0)
}
> cl_chans.recv(0,{tx:10,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:10,bd:{vl:0}},0),0)
}
> cl_chans.recv(0,{tx:6,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:6,bd:{vl:0}},0),0)
}
> cl.client_request(0,{knd:write,ky:"d",vl:64056},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(13),{knd:write,ky:"d",vl:64056})
  write(ref.next,14)
  write(mid_spec.req_dest(13),sec)
  write(request.tx(req_msg.req(loc:m)),13)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:64056})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:13,bd:{knd:write,ky:"d",vl:64056}}}),1)
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:12,bd:{knd:write,ky:"d",vl:31786}}})
{
  write(mid_spec.queue.tail,10)
  write(ref.rep.store("d"),31786)
  write(ref.txres(12),{vl:0})
  write(ref.committed(12),1)
  write(mid_spec.solution.pending.tail,10)
  write(response.tx(loc:res),12)
  write(sec.rep.store("d"),31786)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(12),1)
  write(cl_chans.spec.sent({tx:12,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:12,bd:{knd:write,ky:"d",vl:31786}}})
{
  write(mid_spec.acked(12),1)
}
}
> ser.serialize(13)
{
  write(ser.serialized(13),1)
  write(mid_spec.solution.pending.contents(10),13)
  write(mid_spec.solution.pending.head,11)
  write(mid_spec.queue.contents(10),13)
  write(mid_spec.queue.head,11)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:26041},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(14),{knd:write,ky:"qh",vl:26041})
  write(ref.next,15)
  write(mid_spec.req_dest(14),prim)
  write(request.tx(req_msg.req(loc:m)),14)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:26041})
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:13,bd:{knd:write,ky:"d",vl:64056}}})
{
  write(mid_spec.queue.tail,11)
  write(ref.rep.store("d"),64056)
  write(ref.txres(13),{vl:0})
  write(ref.committed(13),1)
  write(mid_spec.solution.pending.tail,11)
  write(response.tx(loc:res),13)
  write(sec.rep.store("d"),64056)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(13),1)
  write(cl_chans.spec.sent({tx:13,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:13,bd:{knd:write,ky:"d",vl:64056}}})
{
  write(mid_spec.acked(13),1)
}
}
> cl_chans.recv(1,{tx:13,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:13,bd:{vl:0}},1),0)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:16481},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(15),{knd:write,ky:"qh",vl:16481})
  write(ref.next,16)
  write(mid_spec.req_dest(15),prim)
  write(request.tx(req_msg.req(loc:m)),15)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:16481})
}
> sec.req_chan.recv({cid:0,req:{tx:13,bd:{knd:write,ky:"d",vl:64056}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:13,bd:{knd:write,ky:"d",vl:64056}}}),0)
}
> cl_chans.recv(0,{tx:12,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:12,bd:{vl:0}},0),0)
}
> ser.serialize(15)
{
  write(ser.serialized(15),1)
  write(mid_spec.solution.pending.contents(11),15)
  write(mid_spec.solution.pending.head,12)
  write(mid_spec.queue.contents(11),15)
  write(mid_spec.queue.head,12)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:15,bd:{knd:write,ky:"qh",vl:16481}}})
{
  write(mid_spec.queue.tail,12)
  write(ref.rep.store("qh"),16481)
  write(ref.txres(15),{vl:0})
  write(ref.committed(15),1)
  write(mid_spec.solution.pending.tail,12)
  write(response.tx(loc:res),15)
  write(sec.rep.store("qh"),16481)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(15),1)
  write(cl_chans.spec.sent({tx:15,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:15,bd:{knd:write,ky:"qh",vl:16481}}})
{
  write(mid_spec.acked(15),1)
}
}
> cl.client_request(1,{knd:write,ky:"qh",vl:19384},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(16),{knd:write,ky:"qh",vl:19384})
  write(ref.next,17)
  write(mid_spec.req_dest(16),prim)
  write(request.tx(req_msg.req(loc:m)),16)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:19384})
}
> ser.serialize(16)
{
  write(ser.serialized(16),1)
  write(mid_spec.solution.pending.contents(12),16)
  write(mid_spec.solution.pending.head,13)
  write(mid_spec.queue.contents(12),16)
  write(mid_spec.queue.head,13)
}
> cl_chans.recv(1,{tx:15,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:15,bd:{vl:0}},1),0)
}
> ser.serialize(14)
{
  write(ser.serialized(14),1)
  write(mid_spec.solution.pending.contents(13),14)
  write(mid_spec.solution.pending.head,14)
  write(mid_spec.queue.contents(13),14)
  write(mid_spec.queue.head,14)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:27741},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(17),{knd:read,ky:"qh",vl:27741})
  write(ref.next,18)
  write(mid_spec.req_dest(17),prim)
  write(request.tx(req_msg.req(loc:m)),17)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:27741})
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:16,bd:{knd:write,ky:"qh",vl:19384}}})
{
  write(mid_spec.queue.tail,13)
  write(ref.rep.store("qh"),19384)
  write(ref.txres(16),{vl:0})
  write(ref.committed(16),1)
  write(mid_spec.solution.pending.tail,13)
  write(response.tx(loc:res),16)
  write(sec.rep.store("qh"),19384)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(16),1)
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:16,bd:{knd:write,ky:"qh",vl:19384}}})
{
  write(mid_spec.acked(16),1)
}
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:14,bd:{knd:write,ky:"qh",vl:26041}}})
{
  write(mid_spec.queue.tail,14)
  write(ref.rep.store("qh"),26041)
  write(ref.txres(14),{vl:0})
  write(ref.committed(14),1)
  write(mid_spec.solution.pending.tail,14)
  write(response.tx(loc:res),14)
  write(sec.rep.store("qh"),26041)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(14),1)
  write(cl_chans.spec.sent({tx:14,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:14,bd:{knd:write,ky:"qh",vl:26041}}})
{
  write(mid_spec.acked(14),1)
}
}
> cl_chans.recv(1,{tx:16,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:16,bd:{vl:0}},1),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:42759},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(18),{knd:read,ky:"d",vl:42759})
  write(ref.next,19)
  write(mid_spec.req_dest(18),prim)
  write(request.tx(req_msg.req(loc:m)),18)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:42759})
}
> cl_chans.recv(0,{tx:14,bd:{vl:0}})
{
  write(cl_chans.spec.sent({tx:14,bd:{vl:0}},0),0)
}
> ref.commit(17,prim)
{
  write(response_body.vl(fml:out),26041)
  write(ref.txres(17),{vl:26041})
  write(ref.committed(17),1)
}
> cl_chans.send(0,{tx:17,bd:{vl:26041}})
{
  write(service_spec.responded(17),1)
  write(cl_chans.spec.sent({tx:17,bd:{vl:26041}},0),1)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:24360},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(19),{knd:read,ky:"qh",vl:24360})
  write(ref.next,20)
  write(mid_spec.req_dest(19),sec)
  write(request.tx(req_msg.req(loc:m)),19)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:24360})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:24360}}}),1)
}
> sec.req_chan.recv({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:24360}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:19,bd:{knd:read,ky:"qh",vl:24360}}}),0)
  write(response_body.vl(fml:out),26041)
  write(ref.txres(19),{vl:26041})
  write(ref.committed(19),1)
  write(response.tx(loc:res),19)
  write(response_body.vl(fml:out),26041)
  write(response.bd(loc:res),{vl:26041})
  write(service_spec.responded(19),1)
  write(cl_chans.spec.sent({tx:19,bd:{vl:26041}},0),1)
}
> ref.commit(18,prim)
{
  write(response_body.vl(fml:out),64056)
  write(ref.txres(18),{vl:64056})
  write(ref.committed(18),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:16896},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(20),{knd:write,ky:"d",vl:16896})
  write(ref.next,21)
  write(mid_spec.req_dest(20),sec)
  write(request.tx(req_msg.req(loc:m)),20)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:16896})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:16896}}}),1)
}
> cl_chans.send(1,{tx:18,bd:{vl:64056}})
{
  write(service_spec.responded(18),1)
  write(cl_chans.spec.sent({tx:18,bd:{vl:64056}},1),1)
}
> sec.req_chan.recv({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:16896}}})
{
  write(sec.req_chan.spec.sent({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:16896}}}),0)
}
> ser.serialize(20)
{
  write(ser.serialized(20),1)
  write(mid_spec.solution.pending.contents(14),20)
  write(mid_spec.solution.pending.head,15)
  write(mid_spec.queue.contents(14),20)
  write(mid_spec.queue.head,15)
}
> cl.client_request(0,{knd:read,ky:"qh",vl:29747},sec)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(21),{knd:read,ky:"qh",vl:29747})
  write(ref.next,22)
  write(mid_spec.req_dest(21),sec)
  write(request.tx(req_msg.req(loc:m)),21)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:29747})
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:read,ky:"qh",vl:29747}}}),1)
}
> cl.client_request(1,{knd:write,ky:"qh",vl:22846},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(22),{knd:write,ky:"qh",vl:22846})
  write(ref.next,23)
  write(mid_spec.req_dest(22),prim)
  write(request.tx(req_msg.req(loc:m)),22)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"qh",vl:22846})
}
> ser.serialize(22)
{
  write(ser.serialized(22),1)
  write(mid_spec.solution.pending.contents(15),22)
  write(mid_spec.solution.pending.head,16)
  write(mid_spec.queue.contents(15),22)
  write(mid_spec.queue.head,16)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:16896}}})
{
  write(mid_spec.queue.tail,15)
  write(ref.rep.store("d"),16896)
  write(ref.txres(20),{vl:0})
  write(ref.committed(20),1)
  write(mid_spec.solution.pending.tail,15)
  write(response.tx(loc:res),20)
  write(sec.rep.store("d"),16896)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(20),1)
  write(cl_chans.spec.sent({tx:20,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:20,bd:{knd:write,ky:"d",vl:16896}}})
{
  write(mid_spec.acked(20),1)
}
}
> fwd_chan.rcvr.recv({cid:0,req:{tx:22,bd:{knd:write,ky:"qh",vl:22846}}})
{
  write(mid_spec.queue.tail,16)
  write(ref.rep.store("qh"),22846)
  write(ref.txres(22),{vl:0})
  write(ref.committed(22),1)
  write(mid_spec.solution.pending.tail,16)
  write(response.tx(loc:res),22)
  write(sec.rep.store("qh"),22846)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(22),1)
  write(cl_chans.spec.sent({tx:22,bd:{vl:0}},0),1)
< rev_chan.sndr.send({cid:0,req:{tx:22,bd:{knd:write,ky:"qh",vl:22846}}})
{
  write(mid_spec.acked(22),1)
}
}
> sec.req_chan.recv({cid:0,req:{tx:21,bd:{knd:read,ky:"qh",vl:29747}}})
{
  write(sec.req_chan.spec.sent({cid:0,req:{tx:21,bd:{knd:read,ky:"qh",vl:29747}}}),0)
  write(response_body.vl(fml:out),22846)
  write(ref.txres(21),{vl:22846})
  write(ref.committed(21),1)
  write(response.tx(loc:res),21)
  write(response_body.vl(fml:out),22846)
  write(response.bd(loc:res),{vl:22846})
  write(service_spec.responded(21),1)
  write(cl_chans.spec.sent({tx:21,bd:{vl:22846}},0),1)
}
> cl.client_request(1,{knd:write,ky:"d",vl:57866},prim)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(23),{knd:write,ky:"d",vl:57866})
  write(ref.next,24)
  write(mid_spec.req_dest(23),prim)
  write(request.tx(req_msg.req(loc:m)),23)
  write(request.bd(req_msg.req(loc:m)),{knd:write,ky:"d",vl:57866})
}
> cl_chans.recv(1,{tx:18,bd:{vl:64056}})
{
  write(cl_chans.spec.sent({tx:18,bd:{vl:64056}},1),0)
}
> cl.client_request(0,{knd:read,ky:"d",vl:31240},prim)
{
  write(req_msg.cid(loc:m),0)
  write(ref.txs(24),{knd:read,ky:"d",vl:31240})
  write(ref.next,25)
  write(mid_spec.req_dest(24),prim)
  write(request.tx(req_msg.req(loc:m)),24)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"d",vl:31240})
}
> ser.serialize(23)
{
  write(ser.serialized(23),1)
  write(mid_spec.solution.pending.contents(16),23)
  write(mid_spec.solution.pending.head,17)
  write(mid_spec.queue.contents(16),23)
  write(mid_spec.queue.head,17)
}
> fwd_chan.rcvr.recv({cid:1,req:{tx:23,bd:{knd:write,ky:"d",vl:57866}}})
{
  write(mid_spec.queue.tail,17)
  write(ref.rep.store("d"),57866)
  write(ref.txres(23),{vl:0})
  write(ref.committed(23),1)
  write(mid_spec.solution.pending.tail,17)
  write(response.tx(loc:res),23)
  write(sec.rep.store("d"),57866)
  write(response.bd(loc:res),{vl:0})
  write(service_spec.responded(23),1)
  write(cl_chans.spec.sent({tx:23,bd:{vl:0}},1),1)
< rev_chan.sndr.send({cid:1,req:{tx:23,bd:{knd:write,ky:"d",vl:57866}}})
{
  write(mid_spec.acked(23),1)
}
}
> ref.commit(24,prim)
{
  write(response_body.vl(fml:out),57866)
  write(ref.txres(24),{vl:57866})
  write(ref.committed(24),1)
}
> cl_chans.send(1,{tx:24,bd:{vl:57866}})
{
  write(service_spec.responded(24),1)
  write(cl_chans.spec.sent({tx:24,bd:{vl:57866}},1),1)
}
> cl_chans.recv(0,{tx:19,bd:{vl:26041}})
{
  write(cl_chans.spec.sent({tx:19,bd:{vl:26041}},0),0)
}
> cl.client_request(1,{knd:read,ky:"qh",vl:51258},sec)
{
  write(req_msg.cid(loc:m),1)
  write(ref.txs(25),{knd:read,ky:"qh",vl:51258})
  write(ref.next,26)
  write(mid_spec.req_dest(25),sec)
  write(request.tx(req_msg.req(loc:m)),25)
  write(request.bd(req_msg.req(loc:m)),{knd:read,ky:"qh",vl:51258})
  write(sec.req_chan.spec.sent({cid:1,req:{tx:25,bd:{knd:read,ky:"qh",vl:51258}}}),1)
}
test_completed
